<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>The Battle for the U.S. House of Representatives</title>
  <meta name="description" content="The Battle for the U.S. House of Representatives">
  <meta name="author" content="Frey Hargarten - StarTribune">

  <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v0.19.1/mapbox-gl.css' rel='stylesheet' />
  <link rel="stylesheet" href="../_common_resources/styles/startribune_dataviz_styles.css" />
  <link href="../_common_resources/charts/c3-master/c3.css" rel="stylesheet" type="text/css">
  
  <style>
/*BASE*/
    body, p { font-family:"Benton Sans",Helvetica,Arial,sans-serif; }
    #wrapper { width:700px; margin-right:auto; margin-left:auto; }
    .slide { margin-bottom:30px; }
    a { color:steelblue !important; }

/*MAPS*/
    #vMap, #dMap { width:100%; height:300px; }
    .map-overlay-container { position: absolute; width:400px; top: 0; left: 0; padding: 10px; z-index: 1; }
    .map-overlay { font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif; background-color: #fff; border-radius: 3px; padding: 10px; box-shadow:0 1px 2px rgba(0,0,0,0.20); }
    .map-overlay h2, .map-overlay p { margin: 0 0 10px; }
    .mapboxgl-ctrl-attrib { display:none; }
    .text { fill:#ffffff !important;  }
    #mnmap { float:left; text-align:center; width:100%; }
    rect:hover, text:hover { background-color:#333 !important; cursor:pointer; opacity:.5; }
    #mapFull path:hover, #mnmap path:hover { cursor:default !important; }
    .districtLabel { font-weight:900; }
    .mappage { text-align:center; width:57%; }

/*BUTTONS*/
    .switch, .step{ padding:2px; display:inline-block; width:100%; background-color:#fff; font-weight:900; font-family:"Benton Sans",Helvetica,Arial,sans-serif; border:1px solid black; margin:0 !important; margin:2px !important; }
    .switch:hover, .selected, .step:hover { background-color:#4C4C39 !important; color:#fff !important; cursor:pointer; margin:2px !important; }

/*CHATTER*/
    .chatterHead { font-weight:900; font-size:1.2em; text-align:left; }
    .chatter { width:100%; margin-right:auto; margin-left:auto; text-align:left; }

/*CHARTS*/
    #chart .c3-line { stroke-width:5px !important; }
    #chartV .c3-line { stroke-width:5px !important; }
    .fadeline { opacity:0.5; }
    .powerline { stroke-dasharray:5,5; stroke:#333; }
/*    .c3-axis-y .domain, .c3-axis-y .domain line { stroke:#fff !important; }*/
    #infobox { float:right; width:95%; padding:20px; }
    #fChart { height:500px; }
    .rBar, .rLabel { display:inline-block; width:32%; }
    .districtProfile .pct { float:right; }
    .bars { height:200px; }
    #infobox { font-size:0.8em;}
    .cell { display:inline-block; width:22%; vertical-align:top; margin-right:2px; }
    .th { font-weight:900; }
    .hottest { fill:#a70518; }

    .adjacent { width:100%; display:inline-block; text-align:left; vertical-align:top; } 
    .smallchart { height:200px; }
    .rank { width:12%; text-align:center; display:inline-block; }
    .rankbar { width:12%; text-align:center; display:inline-block; vertical-align:bottom !important; }
    .rank:hover { opacity:0.5; cursor:pointer; }
    .selected3 { background-color:#333 !important; }
    .zoom { float:none !important; text-align:center; padding:10px; }
    #darrow { float:left; }
    #rarrow { float:right; }
    #ranking { text-align:center; }
    #range { width:96%; margin-right:15px; margin-left:15px; }

    #chart1 .c3-line, #chart2 .c3-line, #chart3 .c3-line, #chart4 .c3-line, #chart5 .c3-line, #chart6 .c3-line, #chart7 .c3-line, #chart8 .c3-line { stroke-width:5px !important; opacity:0 !important; }
    #chart1 .c3-area, #chart2 .c3-area, #chart3 .c3-area, #chart4 .c3-area, #chart5 .c3-area, #chart6 .c3-area, #chart7 .c3-area, #chart8 .c3-area, #chart1 .c3-area { opacity:0.8 !important; }
    .rfade text { background-color:#bbb; fill:#8C1B17 !important; pointer-events: all; color:#8C1B17; }
    .rfade line { background-color:#8C1B17; fill:#8C1B17 !important; pointer-events: all;  stroke:#8C1B17 !important; pointer-events: all; color:#8C1B17; opacity:0.7 !important; }
    .dfade text { background-color:#3F88C5; fill:#3F88C5 !important; pointer-events: all; color:#3F88C5;  }
    .dfade line { background-color:#3F88C5; fill:#3F88C5 !important; pointer-events: all; stroke:#3F88C5 !important; pointer-events: all; color:#3F88C5; opacity:0.7 !important; }
    .slide { display:none; }

/*POWERBAR*/
    .powerBar { text-align:center; vertical-align:top; }
    .rows { width:47px;  display:inline-block; vertical-align:bottom; }
    .rowMid { width:85%; display:inline-block; }
    #dBar { width:37%; margin-bottom:21px; padding:1px; }
    #rBar { width:53%; margin-bottom:21px; padding:1px; }
    #dlBar { width:0; margin-bottom:21px; }
    #rlBar { width:0; margin-bottom:21px; }
    #dwBar { width:0; margin-bottom:21px; }
    #rwBar { width:0; margin-bottom:21px; }
    #tBar { width:0; margin-bottom:21px; }
    .bar { height:20px; width:100%; vertical-align:top; text-align:center; }
    .half { display:inline-block; height:20px;  }
    .bigNum { font-size:2.5em !important; }

/*SWATCHES*/
    .republican { background-color:#8C1B17; fill:#8C1B17 !important; pointer-events: all; font-weight:bold; color:#fff; }
    .r1 { background-color:#C68985; fill:#C68985 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .r2 { background-color:#A5484D; fill:#A5484D !important; color:white !important; pointer-events: all; font-weight:bold; }
    .r3 { background-color:#A52129; fill:#A52129 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .r4 { background-color:#8C1B17; fill:#8C1B17 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .r0 { background-color:#8C1B17; fill:#8C1B17 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .mid { background-color:#aaa; fill:#aaa !important; color:white !important; pointer-events: all; font-weight:bold; }
    .democrat { background-color:#3F88C5; fill:#3F88C5 !important; pointer-events: all; font-weight:bold; color:#fff;  }
    .d1 { background-color:#ABCEE8; fill:#ABCEE8 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .d2 { background-color:#5ca5c3; fill:#5ca5c3 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .d3 { background-color:#4f97c4; fill:#4f97c4 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .d4 { background-color:#3f88c5; fill:#3f88c5 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .d0 { background-color:#3F88C5; fill:#3F88C5 !important; color:white !important; pointer-events: all; font-weight:bold; }

/*DROPDOWN*/
    .wrapper-demo { width:100%; }
    .wrapper-dropdown-1 { display:inline-block;font-family:"Benton Sans",Helvetica,Arial,sans-serif;z-index:900;background:#ddd;color:#333;cursor:pointer;font-weight:bold;outline:none;padding:8px;position:relative;width:200px;border:1px solid #aaa;box-shadow:0 2px 1px rgba(0, 0, 0, 0.10);font-size:14px; width:100%; }
    .wrapper-dropdown-1 .dropdown { font-weight:normal;left:0;list-style:none;opacity:0;pointer-events:none;position:absolute;right:0;top:100%;border:1px solid #aaa;background:#fff;box-shadow:0 4px 5px rgba(0, 0, 0, 0.15);margin-top:0px !important; }
    ul.dropdown.months { box-sizing:border-box;margin:0;moz-box-sizing:border-box;padding:0;webkit-box-sizing:border-box;margin-top:-1px;border-radius:0 0 4px 4px;background-clip:padding-box; }
    .wrapper-dropdown-1 .dropdown { font-weight:normal;left:0;list-style:none;opacity:0;pointer-events:none;position:absolute;right:0;top:100%;border:1px solid #aaa;background:#fff;box-shadow:0 4px 5px rgba(0, 0, 0, 0.15);margin-top:0px !important; }
    .wrapper-dropdown-1 .dropdown li:hover a { background:#EFEFEF; }
    header[role="banner"] { width:100%;height:40px;z-index:1000;background:#f0f0f0; }

/*BREAKPOINTS*/
    @media (max-width:650px) {
    .mappage { text-align:center; width:70%; margin-left:auto; margin-right:auto; }
    .adjacent { width:100%; display:block; }
    #wrapper { width:100%; }
    .slide { margin-right:auto; margin-left:auto; }
    #mnmap { float:none; width:100%;  }
    #infobox { float:none; width:100%; }
    .cell { width:24%; }
    }
  </style> 
</head>

<body>
  <div id="wrapper">

<div id="dataviz">
<div class="slide" id="history">
<div class="chatterHead">A widening party gap</div>
<div class="chatter">From 1954, the Democrats owned the U.S. House of Representatives for 40 years until the Republican Revolution of 1994 made it more competitive. Since the 2010 midterm election, <span class='republican'>Republicans</span> have had held the House by comfortable margins, putting the chamber all but out of reach for the <span class='democrat'>Democrats</span> to retake in 2016.</div>
<div id="chart"></div>
<div class="breaker"></div>
</div>

<div class="slide" id="map">
<div class="chatterHead">A GOP vise grip</div>
<div class="chatter">Entering this campaign season, the <span class='republican'>GOP</span> has a 59-seat majority over the <span class='democrat'>Democrats</span>. Even if Democrats achieve major victories down the ballot this November, it's unlikely to be enough to achieve a majority in the chamber.</div>
<div class="powerbar">
<!-- <div class="rows"><div class="dflCount bigNum democrat">188</div><div>DEM</div></div> -->
      <div class="bar"><div class="half tips democrat" id="dBar" style="text-align:left;">188</div><div class="half tips d2" id="dlBar"></div><div class="half tips d1" id="dwBar"></div><div class="half tips mid" id="tBar"></div><div class="half tips r1" id="rwBar"></div><div class="half tips republican" id="rlBar"></div><div class="half tips r0" id="rBar" style="text-align:right;">247</div></div>
<!-- <div class="rows"><div class="gopCount bigNum republican">247</div><div>GOP</div></div>-->
</div>
<div class="breaker"></div>
<div id="mapFull" class='us'><svg width="100%" height="600" viewBox="0 0 650 400" preserveAspectRatio="xMidYMid"></svg></div>
<div class="breaker"></div>
</div>

<!-- <div class="slide" id="mncd" style="display:none;">
<div class="chatterHead">The battle for Minnesota's House seats</div>
<div class="chatter">Among Minnesota's eight U.S. House members, only three seats are hotly contested: the CD2 seat of retiring <strong>Rep. John Kline (R-Minn.)</strong>, longtime GOP stronghold CD3 occupied by <strong>Rep. Colin Peterson (R-Minn.)</strong> and the rematch for CD8 currently held by <strong>Rep. Rick Nolan (D-Minn.)</strong>.</div>
<div id="mnmap" class="mn"><svg width="400" height="460" viewBox="0 0 430 600" preserveAspectRatio="xMidYMid"></svg></div>
<div id="infobox">
  <div class="cell th">District</div><div class="cell th">Incumbent</div><div class="cell th">Challenger(s)</div><div class="cell th">Rating</div>
  <div class="cell mid">District 2</div><div class="cell mid">Open Seat</div><div class="cell"><div class="r3">Jason Lewis</div><div class="d3">Angie Craig</div></div><div class="cell mid">Competitive</div>
  <div class="cell r3">District 3</div><div class="cell r3">Erik Paulsen</div><div class="cell d3">Terri Bonoff</div><div class="cell mid">Competitive</div>
  <div class="cell d3">District 8</div><div class="cell d3">Rick Nolan</div><div class="cell r3">Stewart Mills</div><div class="cell mid">Competitive</div>
  <div class="cell d3">District 1</div><div class="cell d3">Tim Walz</div><div class="cell r3">Jim Hagedorn</div><div class="cell">Safe</div>
  <div class="cell d3">District 4</div><div class="cell d3">Betty McCollum</div><div class="cell r3">Greg Ryan</div><div class="cell">Safe</div>
  <div class="cell d3">District 5</div><div class="cell d3">Keith Ellison</div><div class="cell r3">Frank Drake</div><div class="cell">Safe</div>
  <div class="cell r3">District 6</div><div class="cell r3">Tom Emmer</div><div class="cell d3">David Snyder</div><div class="cell">Safe</div>
  <div class="cell d3">District 7</div><div class="cell d3">Collin Peterson</div><div class="cell r3">Dave Hughes</div><div class="cell">Safe</div>
</div>
<div class="breaker"></div>
</div> -->

<div class="slide" id="leanings">
<div class="chatterHead">The battle for Minnesota's congressional seats</div>
<div class="chatter">
<p>Minnesota accounts for just eight of the nation's House districts, but a few are pretty competitive this year, including races in CD2, CD3 and CD8.</p>
<p>To measure how they lean, one way is to use their <a href="https://cookpolitical.com" target="new_">Cook Partisan Voter Index (CPVI or PVI)</a>, which is how Democrat or Republican a state or district is by comparing a party's voting percentage to the national average from the past two presidential elections. <em>The Cook Political Report</em> assigns ranks according to these scores to describe how a district leans politically. The following is how Minnesota's congressional districts rank.</p>
<p>How a district otherwise leans doesn't always match with the party of its representive, but can be an indicator of whether a seat could be vulnerable to flipping control between parties. The least competitive districts have high CPVI scores for an incumbent candidate's party. For instance, Keith Ellison in CD5 and Tom Emmer in CD6 are in districts with high CPVI scores for Democrats and Republicans, respectively.</p>
</div>

<div class="breaker"></div>

<div id="rankingbar" style="text-align:center;">
    <div data="cd5" class="rankbar d4" style="height:390px">D+22</div><div data="cd4" class="rankbar d4" style="height:198px">D+11</div><div data="cd8" class="rankbar d1" style="height:18px">D+1</div><div data="cd2" class="rankbar r1" style="height:18px">R+1</div><div data="cd1" class="rankbar r1" style="height:36px">R+2</div><div data="cd3" class="rankbar r1" style="height:36px">R+2</div><div data="cd7" class="rankbar r4" style="height:108px">R+6</div><div data="cd6" class="rankbar r4" style="height:180px">R+10</div>

    <div data="cd5" class="rank d3">CD5</div><div data="cd4" class="rank d3">CD4</div><div data="cd8" class="rank d3">CD8</div><div data="cd2" class="rank mid">CD2</div><div data="cd1" class="rank d3">CD1</div><div data="cd3" class="rank r3">CD3</div><div data="cd7" class="rank d3">CD7</div><div data="cd6" class="rank r3">CD6</div>

    <div id="range"><div id="darrow">More Democrat</div><div id="rarrow">More Republican</div></div>
</div>

<div class="zoom">Reset</div>

<div class="breaker"></div>

<div id="filter"><input type="search" id="filter_box" placeholder="Search by district, candidate or keyword"></input></div>
<div id="results"></div>

<div class="breaker"></div>

<!-- CD1 -->
<div class='cd' id="cd1"> 
<div class="chatterHead">The Race for CD1</div>
<h4 class="d3">Rep. Tim Walz (D)</h4>
<div class="adjacent">
<p>Minnesota's Congressional District 1 is represented by Democrat Tim Walz, who has served <strong>5 terms</strong> in office.</p>

<p>He is running against <strong>Republican Jim Hagedorn</strong>.</p>

<img src="img/1.png" class="mappage" /> 

<p>The district has a median income of <strong>$57,321</strong> and has a minority population of <strong>8 percent</strong>, compared to 19% of the state as a whole. About <strong>16 percent</strong> of the district's residents are age 65 and older, compared to 14 percent statwide. Roughly <strong>27 percent</strong> have Bachelor's Degrees or higher, compared to about 33 percent throughout Minnesota.</p>

<p>The district's current Cook Partisan Voting Index score (CPVI) is <span class="r1">R+2</span>, ranking it as <span class="r1">Barely Republican</span>. In 2012, the district voted <strong>Barack Obama (D)</strong> for president.</p>
</div>
<div class="adjacent">
<h4>CPVI score over time</h4>
<div id="chart1" class="smallchart"></div>
<h4>Campaign finance</h4>
<div id="fChart1"></div>
</div>
</div>

<!-- CD2 -->
<div class='cd' id="cd2"> 
<div class="chatterHead">The Race for CD2</div>
<h4 class="mid">Open Seat</h4>
<div class="adjacent">
<p>Minnesota's Congressional District 2 is an open seat this year following the retirement of Republican John Kline, who served <strong>7 terms</strong> in office.</p>

<p><strong>Republican Jason Lewis</strong> and <strong>Democrat Angie Craig</strong> are facing off to fill this vacancy.</p>

<img src="img/2.png" class="mappage" /> 

<p>It has a median income of <strong>$76,409</strong> and has a minority population of <strong>15 percent</strong>, compared to 19% of the state as a whole. About <strong>12 percent</strong> of the district's residents are age 65 and older, compared to 14 percent statwide. Roughly <strong>38 percent</strong> have Bachelor's Degrees or higher, compared to about 33 percent throughout Minnesota.</p>

<p>The district's current Cook Partisan Voting Index score (CPVI) is <span class="r1">R+1</span>, ranking it as <span class="r1">Barely Republican</span>. In 2012, the district voted <strong>Barack Obama (D)</strong> for president.</p>

</div>
<div class="adjacent">
<h4>CPVI score over time</h4>
<div id="chart2" class="smallchart"></div>
<h4>Campaign finance</h4>
<div id="fChart2"></div>
</div>
</div>

<!-- CD3 -->
<div class='cd' id="cd3"> 
<div class="chatterHead">The Race for CD3</div>
<h4 class="r3">Rep. Erik Paulsen (R)</h4>
<div class="adjacent">
<p>Minnesota's Congressional District 3 is represented by Republican Erik Paulsen, who has served <strong>4 terms</strong> in office.</p>

<p>He is running against <strong>Democrat Terri Bonoff</strong>.</p>

<img src="img/3.png" class="mappage" /> 

<p>The district has a median income of <strong>$79,965</strong> and has a minority population of <strong>19 percent</strong>, compared to 19% of the state as a whole. About <strong>14 percent</strong> of the district's residents are age 65 and older, compared to 14 percent statwide. Roughly <strong>48 percent</strong> have Bachelor's Degrees or higher, compared to about 33 percent throughout Minnesota.</p>

<p>The district's current Cook Partisan Voting Index score (CPVI) is <span class="r1">R+2</span>, ranking it as <span class="r1">Barely Republican</span>. In 2012, the district voted <strong>Barack Obama (D)</strong> for president.</p>

</div>
<div class="adjacent">
<h4>CPVI score over time</h4>
<div id="chart3" class="smallchart"></div>
<h4>Campaign finance</h4>
<div id="fChart3"></div>
</div>
</div>

<!-- CD4 -->
<div class='cd' id="cd4">  
<div class="chatterHead">The Race for CD4</div>
<h4 class="d3">Rep. Betty McCollum (D)</h4>
<div class="adjacent">
<p>Minnesota's Congressional District 4 is represented by Democrat Betty McCollum, who has served <strong>8 terms</strong> in office.</p>

<p>She is running against <strong>Republican Greg Ryan</strong>.</p>

<img src="img/4.png" class="mappage" />

<p>The district has a median income of <strong>$61,244</strong> and has a minority population of <strong>28 percent</strong>, compared to 19% of the state as a whole. About <strong>13 percent</strong> of the district's residents are age 65 and older, compared to 14 percent statwide. Roughly <strong>43 percent</strong> have Bachelor's Degrees or higher, compared to about 33 percent throughout Minnesota.</p>

<p>The district's current Cook Partisan Voting Index score (CPVI) is <span class="d4">D+11</span>, ranking it as <span class="d4">Strongly Democrat</span>. In 2012, the district voted <strong>Barack Obama (D)</strong> for president.</p>

</div>
<div class="adjacent">
<h4>CPVI score over time</h4>
<div id="chart4" class="smallchart"></div>
<h4>Campaign finance</h4>
<div id="fChart4"></div>
</div>
</div>

<!-- CD5 -->
<div class='cd' id="cd5">
<div class="chatterHead">The Race for CD5</div>
<h4 class="d3">Rep. Keith Ellison (D)</h4>
<div class="adjacent">
<p>Minnesota's Congressional District 5 is represented by Democrat Keith Ellison, who has served <strong>5 terms</strong> in office.</p>

<p>He is running against <strong>Republican Frank Drake</strong>.</p>

<img src="img/5.png" class="mappage" /> 

<p>The district has a median income of <strong>$52,447</strong> and has a minority population of <strong>31 percent</strong>, compared to 19% of the state as a whole. About <strong>11 percent</strong> of the district's residents are age 65 and older, compared to 14 percent statwide. Roughly <strong>44 percent</strong> have Bachelor's Degrees or higher, compared to about 33 percent throughout Minnesota.</p>

<p>The district's current Cook Partisan Voting Index score (CPVI) is <span class="d4">D+22</span>, ranking it as <span class="d4">Strongly Democrat</span>. In 2012, the district voted <strong>Barack Obama (D)</strong> for president.</p>
 
</div>
<div class="adjacent">
<h4>CPVI score over time</h4>
<div id="chart5" class="smallchart"></div>
<h4>Campaign finance</h4>
<div id="fChart5"></div>
</div>
</div>

<!-- CD6 -->
<div class='cd' id="cd6">
<div class="chatterHead">The Race for CD6</div>
<h4 class="r3">Rep. Tom Emmer (R)</h4>
<div class="adjacent">
<p>Minnesota's Congressional District 6 is represented by Republican Tom Emmer, who has served <strong>1 term</strong> in office.</p>

<p>He is running against <strong>Democrat David Snyder</strong>.</p>

<img src="img/6.png" class="mappage" /> 

<p>The district has a median income of <strong>$71,604</strong> and has a minority population of <strong>8 percent</strong>, compared to 19% of the state as a whole. About <strong>10 percent</strong> of the district's residents are age 65 and older, compared to 14 percent statwide. Roughly <strong>30 percent</strong> have Bachelor's Degrees or higher, compared to about 33 percent throughout Minnesota.</p>

<p>The district's current Cook Partisan Voting Index score (CPVI) is <span class="r4">R+10</span>, ranking it as <span class="r4">Strongly Republican</span>. In 2012, the district voted <strong>Mitt Romney (R)</strong> for president.</p>
 
</div>
<div class="adjacent">
<h4>CPVI score over time</h4>
<div id="chart6" class="smallchart"></div>
<h4>Campaign finance</h4>
<div id="fChart6"></div>
</div>
</div>

<!-- CD7 -->
<div class='cd' id="cd7">
<div class="chatterHead">The Race for CD7</div>
<h4 class="d3">Rep. Collin Peterson (D)</h4>
<div class="adjacent">
<p>Minnesota's Congressional District 7 is represented by Democrat Collin Peterson, who has served <strong>13 terms</strong> in office.</p>

<p>He is running against <strong>Republican Dave Hughes</strong>.</p>

<img src="img/7.png" class="mappage" />  

<p>The district has a median income of <strong>$51,880</strong> and has a minority population of <strong>7 percent</strong>, compared to 19% of the state as a whole. About <strong>18 percent</strong> of the district's residents are age 65 and older, compared to 14 percent statwide. Roughly <strong>21 percent</strong> have Bachelor's Degrees or higher, compared to about 33 percent throughout Minnesota.</p>

<p>The district's current Cook Partisan Voting Index score (CPVI) is <span class="r4">R+6</span>, ranking it as <span class="r4">Strongly Republican</span>. In 2012, the district voted <strong>Mitt Romney (R)</strong> for president.</p>

</div>
<div class="adjacent">
<h4>CPVI score over time</h4>
<div id="chart7" class="smallchart"></div>
<h4>Campaign finance</h4>
<div id="fChart7"></div>
</div>
</div>

<!-- CD8 -->
<div class='cd' id="cd8"> 
<div class="chatterHead">The Race for CD8</div>
<h4 class="d3">Rep. Rick Nolan (D)</h4>
<div class="adjacent">
<p>Minnesota's Congressional District 8 is represented by Democrat Rick Nolan, who has served <strong>2 terms</strong> in office.</p>

<p>He is running against <strong>Republican Stewart Mills</strong> in a rematch from 2014.</p>

<img src="img/8.png" class="mappage" /> 

<p>The district has a median income of <strong>$51,322</strong> and has a minority population of <strong>7 percent</strong>, compared to 19% of the state as a whole. About <strong>18 percent</strong> of the district's residents are age 65 and older, compared to 14 percent statwide. Roughly <strong>23 percent</strong> have Bachelor's Degrees or higher, compared to about 33 percent throughout Minnesota.</p>

<p>The district's current Cook Partisan Voting Index score (CPVI) is <span class="d1">D+1</span>, ranking it as <span class="d1">Barely Democrat</span>. In 2012, the district voted <strong>Barack Obama (D)</strong> for president.</p>

</div>
<div class="adjacent">
<h4>CPVI score over time</h4>
<div id="chart8" class="smallchart"></div>
<h4>Campaign finance</h4>
<div id="fChart8"></div>
</div>
</div>

<!-- <div class="slide" id="finance" style="display:none;">
<div class="chatterHead">Where the money is flooding in</div>
<div class="chatter">The most competitive races have drawn the bulk of campaign contributions. In the CD2 battle, <strong>Angie Craig (D)</strong> has blown by <strong>Jason Lewis (R)</strong>, <strong>Paulsen</strong> has dominated fundraising in CD3, and the CD8 race between <strong>Nolan</strong> and <strong>Mills</strong> is nearly even in terms of money.</div>
<div id="fChart"></div>
<div class="breaker"></div>
</div> -->
</div>
  </div>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="../_common_resources/charts/c3-master/c3.min.js"></script>
<script src='https://api.tiles.mapbox.com/mapbox-gl-js/v0.19.1/mapbox-gl.js'></script>
<script src="//d3js.org/topojson.v1.min.js"></script>
<script>

d3.json("./data/ushouse2014.json", function(error, dataLoad) {

  var data = dataLoad.mn2014;

$.urlParam = function(name){
  var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
  if (results != null) { return results[1] || 0; }
  else { return null; }
}

var selected = $.urlParam('chart');

if (selected != null){
$(".slide").hide();
$("#" + selected).show();
} else { $(".slide").show(); }

//SEARCH FILTER TABLE
  $( document ).ready(function() {
     $('#filter_box').keyup(function(i){
        $('.cd').hide();
        var txt = $('#filter_box').val();
        $('.cd').each(function(){
           if($(this).text().toUpperCase().indexOf(txt.toUpperCase()) != -1){
               $(this).show();
           }
        });
        var count = $('.cd:visible').length;
        $('#results').html(count);
        if (count == 8) { $('#results').html(""); }
    });

// });
});

$(".rank").click(function() {
    $(".rank").removeClass("selected3");
    $(this).addClass("selected3");
    $('.cd').hide();
    $("#" + $(this).attr("data")).show();
});

$(".zoom").click(function() {
  $(".rank").removeClass("selected3");
  $('.cd').show();
});

// MAPPAGE
d3.json('./shapefiles/us_cd_mn_2012.json', function(error, cd) {
d3.json('./shapefiles/cdpct.json', function(error, blocks) {

mapboxgl.accessToken = 'pk.eyJ1Ijoic2hhZG93ZmxhcmUiLCJhIjoiS3pwY1JTMCJ9.pTSXx_LFgR3XBpCNNxWPKA';
var map = new mapboxgl.Map({
    container: 'dMap',
    style: 'mapbox://styles/shadowflare/cilea5110001ra8ktm7409xze',
    center: [-93.2175,44.731944],
    zoom: 7,
    minZoom: 2
});

map.scrollZoom.disable();
map.addControl(new mapboxgl.Navigation());

map.on('load', function() {

//PRECINCTS
  var shapeObj3 = new mapboxgl.GeoJSONSource({
   data: blocks
});

  map.addSource('blocks', shapeObj3);

   map.addLayer({
        'id': 'blocks-layer',
        'interactive': true,
        'source': 'blocks',
        'type': 'fill',
        // "filter": [
        // "==",
        // "COUNTYNAME",
        // layer[0]
        // ],
             'paint': {
            'fill-color':{
            // property: 'B19113e1',
            property: 'CDPCT', 
            stops: [
                [0, '#8C1B17'],
                [0.20, '#A52129'],
                [0.30, '#A5484D'],
                [0.40, '#C68985'],
                [0.50, '#ABCEE8'],
                [0.60, '#5ca5c3'],
                [0.70, '#4f97c4'],
                [0.80, '#3f88c5']
            ]
        },
             'fill-opacity': 0.75
      }
    });

//CD
  var shapeObj2 = new mapboxgl.GeoJSONSource({
   data: cd
});

  map.addSource('cd', shapeObj2);

  var layers = [
  ["1", "#3F88C5"],
  ["2", "#333"],
  ["3", "#A52129"],
  ["4", "#3F88C5"],
  ["5", "#3F88C5"],
  ["6", "#A52129"],
  ["7", "#3F88C5"],
  ["8", "#3F88C5"]
];

layers.forEach(function(layer, i) {
   map.addLayer({
        'id': 'cd-layer-' + i,
        'interactive': true,
        'source': 'cd',
        'type': 'fill',
        "filter": [
        "==",
        "DISTRICT",
        layer[0]
        ],
        'paint': {
            'fill-antialias' : true,
            'fill-opacity': 1,
            'fill-color': 'rgba(51, 51, 51, 0)',
            'fill-outline-color': 'rgba(51, 51, 51, 1)'
        }
    });
   });

var popup = new mapboxgl.Popup({
    closeButton: false,
    closeOnClick: false
});

map.on('mousemove', function(e) {
    var features = map.queryRenderedFeatures(e.point, { layers: ['cd-layer-0','cd-layer-1','cd-layer-2','cd-layer-3','cd-layer-4','cd-layer-5','cd-layer-6','cd-layer-7','cd-layer-8'] });
    // Change the cursor style as a UI indicator.
    map.getCanvas().style.cursor = (features.length) ? 'pointer' : '';

    if (!features.length) {
        popup.remove();
        return;
    }

    var feature = features[0];

    // Populate the popup and set its coordinates
    // based on the feature found.
    popup.setLngLat(e.lngLat)
        .setHTML("Congressional District " + feature.properties.DISTRICT)
        .addTo(map);
});

});




});
});


function mapColor(d, race, dataCompare){
  if (race == "house"){
    for (var i=0; i < dataCompare.length; i++){
    if ((dataCompare[i].STATEFP + dataCompare[i].district) == d.properties.GEOID){
      if (dataCompare[i].party_id == "R") { return "republican"; }
      else if (dataCompare[i].party_id == "D") { return "democrat"; }
    }
} 
 } else if (race == "lean") {
    for (var i=0; i < dataCompare.length; i++){
    if ((dataCompare[i].STATEFP + dataCompare[i].district) == d.properties.GEOID){
      if (dataCompare[i].party_id == "R" && dataCompare[i].vote_pct >= .50) { 
        if (dataCompare[i].vote_pct >= .80) { return "r4"; }
        if (dataCompare[i].vote_pct >= .70) { return "r3"; }
        if (dataCompare[i].vote_pct >= .60) { return "r2"; }
        if (dataCompare[i].vote_pct >= .45) { return "r1"; }
      }
      else if (dataCompare[i].party_id == "D" && dataCompare[i].vote_pct >= .50) { 
        if (dataCompare[i].vote_pct >= .80) { return "d4"; }
        else if (dataCompare[i].vote_pct >= .70) { return "d3"; }
        else if (dataCompare[i].vote_pct >= .60) { return "d2"; }
        else if (dataCompare[i].vote_pct >= .45) { return "d1"; }
      }
    }
} 
      } else if (race == "margins") {
    for (var i=0; i < dataCompare.length; i++){
    if ((dataCompare[i].STATEFP + dataCompare[i].district) == d.properties.GEOID){
      if (dataCompare[i].party_id == "R" && dataCompare[i].vote_pct >= .50) { 
        if (dataCompare[i].vote_pct >= .80) { return "r4"; }
        if (dataCompare[i].vote_pct >= .70) { return "r3"; }
        if (dataCompare[i].vote_pct >= .60) { return "r2"; }
        if (dataCompare[i].vote_pct >= .45) { return "r1"; }
      }
      else if (dataCompare[i].party_id == "D" && dataCompare[i].vote_pct >= .50) { 
        if (dataCompare[i].vote_pct >= .80) { return "d4"; }
        else if (dataCompare[i].vote_pct >= .70) { return "d3"; }
        else if (dataCompare[i].vote_pct >= .60) { return "d2"; }
        else if (dataCompare[i].vote_pct >= .45) { return "d1"; }
      }
    }
} 
      }
}

function mapTips(d, subject, dataCompare){ 
  if (subject == "state") { d.properties.NAME; }
  else {
  for (var i=0; i < dataCompare.length; i++){
    if ((dataCompare[i].STATEFP + dataCompare[i].district) == d.properties.GEOID){
      // if (dataCompare[i].party_id == "R" && dataCompare[i].vote_pct >= .48) { 

        // if (dataCompare[i].vote_pct >= .80) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div><div> " + partyString + "</div>"; }
        // if (dataCompare[i].vote_pct >= .70) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + " (" + partyString + ")</div>"; }
        // if (dataCompare[i].vote_pct >= .60) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + " (" + partyString + ")</div>"; }
        // if (dataCompare[i].vote_pct >= .45) { 

        if (dataCompare[i].party_id == "D") { var partyString = dataCompare[i].candidate  + " <span class='democrat'>(" + dataCompare[i].party_id + ")</span>"; }
        else if (dataCompare[i].party_id == "R") { var partyString = dataCompare[i].candidate  + " <span class='republican'>(" + dataCompare[i].party_id + ")</span>"; }

          return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div><div>" + partyString + "</div>"; 
        // }
      // }
      // else if (dataCompare[i].party_id == "D" && dataCompare[i].vote_pct >= .48) { 
      //   if (dataCompare[i].vote_pct >= .80) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
      //   else if (dataCompare[i].vote_pct >= .70) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
      //   else if (dataCompare[i].vote_pct >= .60) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
      //   else if (dataCompare[i].vote_pct >= .48) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
      // }
      }
    }      
  }
}

function mapBuild(container, boxContainer, chartContainer, shape, race, geo, dataCompare, index) {

var width = 700,
    height = 400,
    centered;

if (geo=="us") { var projection = d3.geo.albersUsa().scale(700).translate([330, 200]); 
    var width = 700,
    height = 400,
    centered; }
else if (geo=="mn") { var projection = d3.geo.albersUsa().scale(5037).translate([50, 970]);
    var width = 320,
    height = 350,
    centered; }
else if (geo=="mnBig") { var projection = d3.geo.albersUsa().scale(5037).translate([50, 970]);
    var width = 400,
    height = 460,
    centered; }
else if (geo=="metro") { var projection = d3.geo.mercator().scale([16800]).center([-92.403259,44.988113]); }

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select(container + " svg")
    .attr("width", width)
    .attr("height", height);

svg.append("rect")
    .attr("class", "background")
    .attr("width", width)
    .attr("height", height);

var g = svg.append("g");

d3.json("shapefiles/" + shape, function(error, us) {

  g.append("g")
      .attr("class", "states")
    .selectAll("path")
      .data(us.features)
    .enter().append("path")
      .attr("d", path)
      // .on("click", clicked)
      .attr("id", function(d) { var str = geo + "_" + d.properties.DISTRICT; return str.replace(new RegExp(" ", "g"),"-"); })
      .attr("precinctName", function(d){ return d.properties.DISTRICT; })
      .attr("class", function(d){
        if (race == "state"){ 
          if (d.properties.DISTRICT == 1) { return "d4"; }
          if (d.properties.DISTRICT == 2) { return "none"; }
          if (d.properties.DISTRICT == 3) { return "r4"; }
          if (d.properties.DISTRICT == 4) { return "d4"; }
          if (d.properties.DISTRICT == 5) { return "d4"; }
          if (d.properties.DISTRICT == 6) { return "r4"; }
          if (d.properties.DISTRICT == 7) { return "d4"; }
          if (d.properties.DISTRICT == 8) { return "d4"; }
         }
        else { return mapColor(d, race, dataCompare); }
         
        })
       .on("mousedown", function(d, i){  

       })
      .style("stroke-width", ".5px")
      .style("stroke", "#fff")
      .call(d3.helper.tooltip(function(d, i){
        if (race == "state"){ 
          if (d.properties.DISTRICT == 1) { return "<div class='districtLabel'>Congressional District " + d.properties.DISTRICT + "</div><div>Rep. Tim Walz (<span class='d4'>DFL</span>)</div>"; }
          if (d.properties.DISTRICT == 2) { return "<div class='districtLabel'>Congressional District " + d.properties.DISTRICT + "</div><div>Open Seat</div>"; }
          if (d.properties.DISTRICT == 3) { return "<div class='districtLabel'>Congressional District " + d.properties.DISTRICT + "</div><div>Rep. Erik Paulsen (<span class='r4'>R</span>)</div>"; }
          if (d.properties.DISTRICT == 4) { return "<div class='districtLabel'>Congressional District " + d.properties.DISTRICT + "</div><div>Rep. Betty McCollum (<span class='d4'>DFL</span>)</div>"; }
          if (d.properties.DISTRICT == 5) { return "<div class='districtLabel'>Congressional District " + d.properties.DISTRICT + "</div><div>Rep. Keith Ellison (<span class='d4'>DFL</span>)</div>"; }
          if (d.properties.DISTRICT == 6) { return "<div class='districtLabel'>Congressional District " + d.properties.DISTRICT + "</div><div>Rep. Tom Emmer (<span class='r4'>R</span>)</div>"; }
          if (d.properties.DISTRICT == 7) { return "<div class='districtLabel'>Congressional District " + d.properties.DISTRICT + "</div><div>Rep. Collin Peterson (<span class='d4'>DFL</span>)</div>"; }
          if (d.properties.DISTRICT == 8) { return "<div class='districtLabel'>Congressional District " + d.properties.DISTRICT + "</div><div>Rep. Rick Nolan (<span class='d4'>DFL</span>)</div>"; } 
        }
        else { return mapTips(d, race, dataCompare); }
      }));

  g.append("path")
      //.datum(topojson.mesh(us, us.features, function(a, b) { return a !== b; }))
      .attr("id", "state-borders")
      .attr("d", path);

});

var zoom = d3.behavior.zoom()
    .on("zoom",function() {
        g.attr("transform","translate("+ 
            d3.event.translate.join(",")+")scale("+d3.event.scale+")");
        g.selectAll("circle")
            .attr("d", path.projection(projection));
        g.selectAll("path")  
            .attr("d", path.projection(projection)); 

  });


function clicked(d) {
  var x, y, k;

  if (d && centered !== d) {
    var centroid = path.centroid(d);
    x = centroid[0];
    y = centroid[1];
    k = 6;
    centered = d;
  } else {
    x = width / 2;
    y = height / 2;
    k = 3;
    centered = null;
  }

  d3.selectAll("#mapMetro path, #mapState path")
      .classed("faded", false)
      .classed("active", false);

  g.selectAll("path")
      .classed("faded", true)
      .classed("active", centered && function (d) { return d === centered; });

  g.transition()
      .duration(750)
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")")
      .style("stroke-width", 1.5 / k + "px");

}

function mnzoom(d) {
  var x, y, k;

    var centroid = path.centroid(d);
    x = 429.8542649319006;
    y = 76.27472769218944;
    k = 5;

  g.transition()
      .duration(750)
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")")
      .style("stroke-width", "0.5px");

  g.selectAll("path").style("stroke-width", "0.5px");
}

function clicked2(d) {
  var x, y, k;

  if (d && centered !== d) {
    var centroid = path.centroid(d);
    x = centroid[0];
    y = centroid[1];
    k = 1;
    centered = d;
  } else {
    x = width / 2;
    y = height / 2;
    k = 1;
    centered = null;
  }

  g.selectAll("path")
      .classed("faded", false)
      .classed("active", centered && function (d) { return d === centered; });

        g.transition()
      .duration(750)
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")")
      .style("stroke-width","0.5px");
}

$(window).on("resize", function() {
var aspect = 650 / 400, chart = $("#mapFull svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  });
var aspect = 650 / 400, chart = $("#mapFull svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);

}

d3.helper = {};

d3.helper.tooltip = function(accessor){
    return function(selection){
        var tooltipDiv;
        var bodyNode = d3.select('body').node();
        selection.on("mouseover", function(d, i){
            // Clean up lost tooltips
            d3.select('body').selectAll('div.tooltip').remove();
            // Append tooltip
            tooltipDiv = d3.select('body').append('div').attr('class', 'tooltip');
            var absoluteMousePos = d3.mouse(bodyNode);
            tooltipDiv.style('left', (absoluteMousePos[0] + 10)+'px')
                .style('top', (absoluteMousePos[1] - 15)+'px')
                .style('position', 'absolute') 
                .style('z-index', 1001);
            // Add text using the accessor function
            var tooltipText = accessor(d, i) || '';
            // Crop text arbitrarily
            //tooltipDiv.style('width', function(d, i){return (tooltipText.length > 80) ? '300px' : null;})
            //    .html(tooltipText);
        })
        .on('mousemove', function(d, i) {
            // Move tooltip
            var absoluteMousePos = d3.mouse(bodyNode);
            tooltipDiv.style('left', (absoluteMousePos[0] + 10)+'px')
                .style('top', (absoluteMousePos[1] - 15)+'px');
            var tooltipText = accessor(d, i) || '';
            tooltipDiv.html(tooltipText);
        })
        .on("mouseout", function(d, i){
            // Remove tooltip
            tooltipDiv.remove();
        });

    };
};

function mapReshade(container, shape, subject, race, dataCompare) {
  $(".district").removeClass("selected,fadeBox");
  $(".district").addClass("fadeBox");

d3.json("shapefiles/" + shape, function(error, us) {
d3.selectAll(container + " svg g path")
      .data(us.features)
      .attr("class", function(d){
    if (subject == "current") { 
      $(".district").removeClass("fadeBox");
    for (var i=0; i < dataCompare.length; i++){
    if ((dataCompare[i].STATEFP + dataCompare[i].district) == d.properties.GEOID){
      if (dataCompare[i].party_id == "R" && dataCompare[i].vote_pct >= .48) { return "r4"; }
      else if (dataCompare[i].party_id == "D" && dataCompare[i].vote_pct >= .48) { return "d4"; }
    }
  } 
}

  else if (subject == "hot") { 
    for (var i=0; i < dataCompare.length; i++){
      if (d.properties.DISTRICT == dataCompare[i].district){
    if (dataCompare[i].HotDistrict == "x"){

        $("#d" + d.properties.DISTRICT).removeClass("fadeBox");
        $("#d" + d.properties.DISTRICT).addClass("selected,thisBox");

      if (dataCompare[i].party == "RPM") { 
        if  (dataCompare[i].PCT2014 > 70) { return "r3"; }
        else if  (dataCompare[i].PCT2014 > 60) { return "r2"; }
        else if  (dataCompare[i].PCT2014 > 50) { return "r1"; }
      }
      else if (dataCompare[i].party == "DFL") { 
        if  (dataCompare[i].PCT2014 > 70) { return "d3"; }
        else if  (dataCompare[i].PCT2014 > 60) { return "d2"; }
        else if  (dataCompare[i].PCT2014 > 50) { return "d1"; }
      }
    }
     
  }
}
 return "mid";
}
        else if (subject == "open") { 
    for (var i=0; i < dataCompare.length; i++){
      if (d.properties.DISTRICT == dataCompare[i].district){
    if (d.properties.DISTRICT == "25B" || d.properties.DISTRICT == "42B" || d.properties.DISTRICT == "52B" || d.properties.DISTRICT == "54A"){

        $("#d" + d.properties.DISTRICT).removeClass("fadeBox");
        $("#d" + d.properties.DISTRICT).addClass("selected,thisBox");


      if (dataCompare[i].party == "RPM") { 
        if  (dataCompare[i].PCT2014 > 70) { return "r3"; }
        else if  (dataCompare[i].PCT2014 > 60) { return "r2"; }
        else if  (dataCompare[i].PCT2014 > 50) { return "r1"; }
      }
      else if (dataCompare[i].party == "DFL") { 
        if  (dataCompare[i].PCT2014 > 70) { return "d3"; }
        else if  (dataCompare[i].PCT2014 > 60) { return "d2"; }
        else if  (dataCompare[i].PCT2014 > 50) { return "d1"; }
      }
    }
     
  }
}
 return "mid";
         }
        else if (subject == "rematch") { 
    for (var i=0; i < dataCompare.length; i++){
      if (d.properties.DISTRICT == dataCompare[i].district){
    if (d.properties.DISTRICT == "02A" || d.properties.DISTRICT == "10A" || d.properties.DISTRICT == "10B" || d.properties.DISTRICT == "11B" || d.properties.DISTRICT == "12A" || d.properties.DISTRICT == "14B" || d.properties.DISTRICT == "17A" || d.properties.DISTRICT == "17B" || d.properties.DISTRICT == "24B" || d.properties.DISTRICT == "56B" || d.properties.DISTRICT == "50B" || d.properties.DISTRICT == "27A"){

        $("#d" + d.properties.DISTRICT).removeClass("fadeBox");
        $("#d" + d.properties.DISTRICT).addClass("selected,thisBox");

      if (dataCompare[i].party == "RPM") { 
        if  (dataCompare[i].PCT2014 > 70) { return "r3"; }
        else if  (dataCompare[i].PCT2014 > 60) { return "r2"; }
        else if  (dataCompare[i].PCT2014 > 50) { return "r1"; }
      }
      else if (dataCompare[i].party == "DFL") { 
        if  (dataCompare[i].PCT2014 > 70) { return "d3"; }
        else if  (dataCompare[i].PCT2014 > 60) { return "d2"; }
        else if  (dataCompare[i].PCT2014 > 50) { return "d1"; }
      }
    }
     
  }
}
 return "mid";
         }
         else if (subject == "margins"){
          $(".district").removeClass("fadeBox");
    for (var i=0; i < dataCompare.length; i++){
    if ((dataCompare[i].STATEFP + dataCompare[i].district) == d.properties.GEOID){
      if (dataCompare[i].party_id == "R" && dataCompare[i].vote_pct >= .50) { 
        if (dataCompare[i].vote_pct >= .80) { return "r4"; }
        if (dataCompare[i].vote_pct >= .70) { return "r3"; }
        if (dataCompare[i].vote_pct >= .60) { return "r2"; }
        if (dataCompare[i].vote_pct >= .48) { return "r1"; }
      }
      else if (dataCompare[i].party_id == "D" && dataCompare[i].vote_pct >= .50) { 
        if (dataCompare[i].vote_pct >= .80) { return "d4"; }
        else if (dataCompare[i].vote_pct >= .70) { return "d3"; }
        else if (dataCompare[i].vote_pct >= .60) { return "d2"; }
        else if (dataCompare[i].vote_pct >= .48) { return "d1"; }
      }
    }
}    }
        else if (subject == "lean"){
          $(".district").removeClass("fadeBox");
  for (var i=0; i < dataCompare.length; i++){
    if ((dataCompare[i].STATEFP + dataCompare[i].district) == d.properties.GEOID){
      if (dataCompare[i].party_id == "R" && dataCompare[i].vote_pct >= .48) { 
        if (dataCompare[i].vote_pct >= .80) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
        if (dataCompare[i].vote_pct >= .70) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
        if (dataCompare[i].vote_pct >= .60) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
        if (dataCompare[i].vote_pct >= .48) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
      }
      else if (dataCompare[i].party_id == "D" && dataCompare[i].vote_pct >= .48) { 
        if (dataCompare[i].vote_pct >= .80) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
        else if (dataCompare[i].vote_pct >= .70) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
        else if (dataCompare[i].vote_pct >= .60) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
        else if (dataCompare[i].vote_pct >= .48) { return "<div>" + dataCompare[i].state + " " + dataCompare[i].district + "</div>"; }
      }
    }
} 
         }
      });
});
}

//POWER HISTORY
// function chartBuilder(){
// var  padding = {
//         top: 20,
//         right: 40,
//         bottom: 20,
//         left: 60,
//     };

// var chart = c3.generate({
//         bindto: '#chart',
//         padding: padding,
//     data: {
//         x: 'x',
//         columns: [
//             ['x',2000,2002,2004,2006,2008,2010,2012,2014],
//             ['DEM Seats',212,205,202,236,257,193,201,188],
//             ['GOP Seats',221,229,231,199,178,242,234,247]
//         ],
//         type: 'line'
//     },
//     color:  {  pattern: ["#3F88C5","#A52129"] },
//     axis: {
//       y: {
//             min: 0,
//             max: 300,
//             padding: {bottom: 0},
//             tick: {
//              values: [0, 100, 218, 330],
//              count: 4,
//              format: d3.format('.0f')
//             }
//         },
//         x: {
//             tick: {
//                 values: ['2000', '2004', '2008', '2012', '2014'],
//                 count: 5,
//                 multiline: false
//             },
//             padding: {
//             left: .7,
//             right: .3
//           }
//           }
//         },
//     grid: {
//         y: {
//           lines: [
//                 {value: 218, text: '', position: 'start', class:'powerline'}
//           ]

//         },
//         x: {
//             lines: [
//                 {value: 2000, text: 'Bush (R) Win', position: 'start', class:'fadeline'},
//                 {value: 2002, text: 'Midterm', position: 'start', class:'fadeline'},
//                 {value: 2004, text: 'Bush (R) Win', position: 'start', class:'fadeline'},
//                 {value: 2006, text: 'Midterm', position: 'start', class:'fadeline'},
//                 {value: 2008, text: 'Obama (D) Win', position: 'start', class:'fadeline'},
//                 {value: 2010, text: 'Midterm', position: 'start', class:'fadeline'},
//                 {value: 2012, text: 'Obama (D) Win', position: 'start', class:'fadeline'},
//                 {value: 2014, text: 'Midterm', position: 'start', class:'fadeline'}
//             ]
//         }
//     }
// });
// }

// chartBuilder();

function houseChart(){

d3.csv("./data/house.csv", function(d) {
  return {
    year: +d.year,
    dem: +d.dem,
    rep: +d.rep,
    ind: +d.ind
  };
}, function(error, rows) {

var dataT = rows;

var x = [];
var rep = [];
var dem = [];
var ind = [];

x[0] = "x";
rep[0] = "GOP Seats";
dem[0] = "DEM Seats";
ind[0] = "IND Seats";

for (var i=1; i <= dataT.length; i++){
  x[i] = dataT[i-1].year;
  rep[i] = dataT[i-1].rep;
  dem[i] = dataT[i-1].dem;
  ind[i] = dataT[i-1].ind;
}

var  padding = {
        top: 20,
        right: 60,
        bottom: 20,
        left: 60,
    };

var houseChart = c3.generate({
      bindto: "#chart",
      padding: padding,
      data: {
            x: 'x',
            columns: [
                x,
                dem,
                rep,
                ind
            ],
        types: {
          'DEM Seats':'line',
          'GOP Seats':'line',
          'IND Seats':'line'
         }
        },        
        color: {
              pattern: ['#3F88C5','#8C1B17',"#bbbbbb"]
            },
        axis: {
              y: {
                    // max: 1,
                    // min: 0,
                    padding: {bottom: 0, top: 0},
                    tick: {
                     count: 4,
                     format: d3.format('.0f')
                    }
                },
            x: {
                 tick: {
                     values: [1854,1880,1900,1920,1940,1960,1980,2000,2014],
                     count: 9
                }
            }
        },
        grid: {
        x: {
             lines: [
                {value: 1954, text: 'Democrat Dominance', position: 'start', class: 'dfade'},
                {value: 1994, text: 'Republican Revolution', position: 'start', class: 'rfade'}
            ]
        }
    },
         regions: [
        {axis: 'x', start: 2010, end: 2014, class: 'hottest'},
    ]
// subchart: {
// show: true
// }
});

});

}

houseChart();

//VOTING HISTORY
function chartV(){
var  padding = {
        top: 20,
        right: 40,
        bottom: 20,
        left: 60,
    };

var chartV = c3.generate({
        bindto: '#chartV',
        padding: padding,
    data: {
        x: 'x',
        columns: [
            ['x',2000,2002,2004,2006,2008,2010,2012,2014],
            ['DEM Vote %',212,205,202,236,257,193,201,188],
            ['GOP Vote %',221,229,231,199,178,242,234,247]
        ],
        type: 'line'
    },
    color:  {  pattern: ["#4192A1","#9C0004"] },
    axis: {
      y: {
            min: 0,
            padding: {bottom: 0},
            tick: {
             count: 4,
             format: d3.format('.0f')
            }
        },
        x: {
            tick: {
                values: ['2000', '2004', '2008', '2012', '2014'],
                count: 5,
                multiline: false
            },
            padding: {
            left: .7,
            right: .3
          }
          }
        },
    grid: {
        x: {
            lines: [
                {value: 2000, text: 'Bush (R) Win', position: 'start'},
                {value: 2002, text: 'Midterm', position: 'start'},
                {value: 2004, text: 'Bush (R) Win', position: 'start'},
                {value: 2006, text: 'Midterm', position: 'start'},
                {value: 2008, text: 'Obama (D) Win', position: 'start'},
                {value: 2010, text: 'Midterm', position: 'start'},
                {value: 2012, text: 'Obama (D) Win', position: 'start'},
                {value: 2014, text: 'Midterm', position: 'start'}
            ]
        }
    }
});
}

chartV();

//CPVI HISTORY
function chartCPVI(){
var  padding = {
        top: 20,
        right: 20,
        bottom: 20,
        left: 70,
    };

var chart1 = c3.generate({
        bindto: '#chart1',
        padding: padding,
    data: {
        x: 'x',
        columns: [
            ['x',2006,2010,2014],
            // ['MN DEM Vote %',0.549,0.465,0.497,0.529,0.435,0.511,0.479,0.511,0.541,0.527],
            // // ['MN GOP Vote %',0.420,0.425,0.495,0.459,0.319,0.350,0.455,0.477,0.438,0.450],
            // ['National DEM Vote %',0.501,0.410,0.406,0.457,0.430,0.492,0.484,0.482,0.529,0.51]
            // ['Minnesota PVI Score',5.15,7.3,8.15,3.85,1.2,0.7,1.2,2.05,1.45]
            ['CPVI',2,1,1]
        ],
        type: 'area'
    },
    legend: {
      show: false
    },
    point: {
            show: false
        },
    color:  {  pattern: ["#A52129"] },
    axis: {
      y: {
            max: 25,
            min: 0,
            // label: 'Minnesota Electoral Votes',
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
             count: 4,
             format: d3.format('+.0f')
            }
        },
        x: {
            // type:'category',
            // categories: ['1976-1980','1980-1984','1984-1988','1988-1992','1992-1996','1996-2000','2000-2004','2004-2008','2008-2012'],
            // categories: ['1994','1998','2002','2006','2010','2014'],
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
                // values: ['1976', '1984', '1992', '2004', '2012'],
                count: 3,
                multiline: false
            },
            padding: {
            // left: .7,
            // right: .3
          }
          }
        },
    grid: {
        y: {
          lines: [
                {value: 218, text: '', position: 'start', class:'powerline'}
          ]

        }
    },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>R" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chart2 = c3.generate({
        bindto: '#chart2',
        padding: padding,
    data: {
        x: 'x',
        columns: [
            ['x',2006,2010,2014],
            // ['MN DEM Vote %',0.549,0.465,0.497,0.529,0.435,0.511,0.479,0.511,0.541,0.527],
            // // ['MN GOP Vote %',0.420,0.425,0.495,0.459,0.319,0.350,0.455,0.477,0.438,0.450],
            // ['National DEM Vote %',0.501,0.410,0.406,0.457,0.430,0.492,0.484,0.482,0.529,0.51]
            // ['Minnesota PVI Score',5.15,7.3,8.15,3.85,1.2,0.7,1.2,2.05,1.45]
            ['CPVI',3,2,2]
        ],
        type: 'area'
    },
    legend: {
      show: false
    },
    point: {
            show: false
        },
    color:  {  pattern: ["#A52129"] },
    axis: {
      y: {
            max: 25,
            min: 0,
            // label: 'Minnesota Electoral Votes',
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
             count: 4,
             format: d3.format('+.0f')
            }
        },
        x: {
            // type:'category',
            // categories: ['1976-1980','1980-1984','1984-1988','1988-1992','1992-1996','1996-2000','2000-2004','2004-2008','2008-2012'],
            // categories: ['1994','1998','2002','2006','2010','2014'],
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
                // values: ['1976', '1984', '1992', '2004', '2012'],
                count: 3,
                multiline: false
            },
            padding: {
            // left: .7,
            // right: .3
          }
          }
        },
    grid: {
        y: {
          lines: [
                {value: 218, text: '', position: 'start', class:'powerline'}
          ]

        }
    },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>R" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chart3 = c3.generate({
        bindto: '#chart3',
        padding: padding,
    data: {
        x: 'x',
        columns: [
            ['x',2006,2010,2014],
            // ['MN DEM Vote %',0.549,0.465,0.497,0.529,0.435,0.511,0.479,0.511,0.541,0.527],
            // // ['MN GOP Vote %',0.420,0.425,0.495,0.459,0.319,0.350,0.455,0.477,0.438,0.450],
            // ['National DEM Vote %',0.501,0.410,0.406,0.457,0.430,0.492,0.484,0.482,0.529,0.51]
            // ['Minnesota PVI Score',5.15,7.3,8.15,3.85,1.2,0.7,1.2,2.05,1.45]
            ['CPVI',1,2,2]
        ],
        type: 'area'
    },
    legend: {
      show: false
    },
    point: {
            show: false
        },
    color:  {  pattern: ["#A52129"] },
    axis: {
      y: {
            max: 25,
            min: 0,
            // label: 'Minnesota Electoral Votes',
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
             count: 4,
             format: d3.format('+.0f')
            }
        },
        x: {
            // type:'category',
            // categories: ['1976-1980','1980-1984','1984-1988','1988-1992','1992-1996','1996-2000','2000-2004','2004-2008','2008-2012'],
            // categories: ['1994','1998','2002','2006','2010','2014'],
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
                // values: ['1976', '1984', '1992', '2004', '2012'],
                count: 3,
                multiline: false
            },
            padding: {
            // left: .7,
            // right: .3
          }
          }
        },
    grid: {
        y: {
          lines: [
                {value: 218, text: '', position: 'start', class:'powerline'}
          ]

        }
    },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>R" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chart4 = c3.generate({
        bindto: '#chart4',
        padding: padding,
    data: {
        x: 'x',
        columns: [
            ['x',2006,2010,2014],
            // ['MN DEM Vote %',0.549,0.465,0.497,0.529,0.435,0.511,0.479,0.511,0.541,0.527],
            // // ['MN GOP Vote %',0.420,0.425,0.495,0.459,0.319,0.350,0.455,0.477,0.438,0.450],
            // ['National DEM Vote %',0.501,0.410,0.406,0.457,0.430,0.492,0.484,0.482,0.529,0.51]
            // ['Minnesota PVI Score',5.15,7.3,8.15,3.85,1.2,0.7,1.2,2.05,1.45]
            ['CPVI',12,11,11]
        ],
        type: 'area'
    },
    legend: { 
      show: false
    },
    point: {
            show: false
        },
    color:  {  pattern: ["#3F88C5"] },
    axis: {
      y: {
            max: 25,
            min: 0,
            // label: 'Minnesota Electoral Votes',
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
             count: 4,
             format: d3.format('+.0f')
            }
        },
        x: {
            // type:'category',
            // categories: ['1976-1980','1980-1984','1984-1988','1988-1992','1992-1996','1996-2000','2000-2004','2004-2008','2008-2012'],
            // categories: ['1994','1998','2002','2006','2010','2014'],
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
                // values: ['1976', '1984', '1992', '2004', '2012'],
                count: 3,
                multiline: false
            },
            padding: {
            // left: .7,
            // right: .3
          }
          }
        },
    grid: {
        y: {
          lines: [
                {value: 218, text: '', position: 'start', class:'powerline'}
          ]

        }
    },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>D" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chart5 = c3.generate({
        bindto: '#chart5',
        padding: padding,
    data: {
        x: 'x',
        columns: [
            ['x',2006,2010,2014],
            // ['MN DEM Vote %',0.549,0.465,0.497,0.529,0.435,0.511,0.479,0.511,0.541,0.527],
            // // ['MN GOP Vote %',0.420,0.425,0.495,0.459,0.319,0.350,0.455,0.477,0.438,0.450],
            // ['National DEM Vote %',0.501,0.410,0.406,0.457,0.430,0.492,0.484,0.482,0.529,0.51]
            // ['Minnesota PVI Score',5.15,7.3,8.15,3.85,1.2,0.7,1.2,2.05,1.45]
            ['CPVI',21,22,22]
        ],
        type: 'area'
    },
    legend: {
      show: false
    },
    point: {
            show: false
        },
    color:  {  pattern: ["#3F88C5"] },
    axis: {
      y: {
            max: 25,
            min: 0,
            // label: 'Minnesota Electoral Votes',
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
             count: 4,
             format: d3.format('+.0f')
            }
        },
        x: {
            // type:'category',
            // categories: ['1976-1980','1980-1984','1984-1988','1988-1992','1992-1996','1996-2000','2000-2004','2004-2008','2008-2012'],
            // categories: ['1994','1998','2002','2006','2010','2014'],
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
                // values: ['1976', '1984', '1992', '2004', '2012'],
                count: 3,
                multiline: false
            },
            padding: {
            // left: .7,
            // right: .3
          }
          }
        },
    grid: {
        y: {
          lines: [
                {value: 218, text: '', position: 'start', class:'powerline'}
          ]

        }
    },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>D" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chart6 = c3.generate({
        bindto: '#chart6',
        padding: padding,
    data: {
        x: 'x',
        columns: [
            ['x',2006,2010,2014],
            // ['MN DEM Vote %',0.549,0.465,0.497,0.529,0.435,0.511,0.479,0.511,0.541,0.527],
            // // ['MN GOP Vote %',0.420,0.425,0.495,0.459,0.319,0.350,0.455,0.477,0.438,0.450],
            // ['National DEM Vote %',0.501,0.410,0.406,0.457,0.430,0.492,0.484,0.482,0.529,0.51]
            // ['Minnesota PVI Score',5.15,7.3,8.15,3.85,1.2,0.7,1.2,2.05,1.45]
            ['CPVI',6,8,10]
        ],
        type: 'area'
    },
    legend: {
      show: false
    },
    point: {
            show: false
        },
    color:  {  pattern: ["#A52129"] },
    axis: {
      y: {
            max: 25,
            min: 0,
            // label: 'Minnesota Electoral Votes',
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
             count: 4,
             format: d3.format('+.0f')
            }
        },
        x: {
            // type:'category',
            // categories: ['1976-1980','1980-1984','1984-1988','1988-1992','1992-1996','1996-2000','2000-2004','2004-2008','2008-2012'],
            // categories: ['1994','1998','2002','2006','2010','2014'],
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
                // values: ['1976', '1984', '1992', '2004', '2012'],
                count: 3,
                multiline: false
            },
            padding: {
            // left: .7,
            // right: .3
          }
          }
        },
    grid: {
        y: {
          lines: [
                {value: 218, text: '', position: 'start', class:'powerline'}
          ]

        }
    },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>R" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chart7 = c3.generate({
        bindto: '#chart7',
        padding: padding,
    data: {
        x: 'x',
        columns: [
            ['x',2006,2010,2014],
            // ['MN DEM Vote %',0.549,0.465,0.497,0.529,0.435,0.511,0.479,0.511,0.541,0.527],
            // // ['MN GOP Vote %',0.420,0.425,0.495,0.459,0.319,0.350,0.455,0.477,0.438,0.450],
            // ['National DEM Vote %',0.501,0.410,0.406,0.457,0.430,0.492,0.484,0.482,0.529,0.51]
            // ['Minnesota PVI Score',5.15,7.3,8.15,3.85,1.2,0.7,1.2,2.05,1.45]
            ['CPVI',6,5,6]
        ],
        type: 'area'
    },
    legend: {
      show: false
    },
    point: {
            show: false
        },
    color:  {  pattern: ["#A52129"] },
    axis: {
      y: {
            max: 25,
            min: 0,
            // label: 'Minnesota Electoral Votes',
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
             count: 4,
             format: d3.format('+.0f')
            }
        },
        x: {
            // type:'category',
            // categories: ['1976-1980','1980-1984','1984-1988','1988-1992','1992-1996','1996-2000','2000-2004','2004-2008','2008-2012'],
            // categories: ['1994','1998','2002','2006','2010','2014'],
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
                // values: ['1976', '1984', '1992', '2004', '2012'],
                count: 3,
                multiline: false
            },
            padding: {
            // left: .7,
            // right: .3
          }
          }
        },
    grid: {
        y: {
          lines: [
                {value: 218, text: '', position: 'start', class:'powerline'}
          ]

        }
    },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>R" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chart8 = c3.generate({
        bindto: '#chart8',
        padding: padding,
    data: {
        x: 'x',
        columns: [
            ['x',2006,2010,2014],
            // ['MN DEM Vote %',0.549,0.465,0.497,0.529,0.435,0.511,0.479,0.511,0.541,0.527],
            // // ['MN GOP Vote %',0.420,0.425,0.495,0.459,0.319,0.350,0.455,0.477,0.438,0.450],
            // ['National DEM Vote %',0.501,0.410,0.406,0.457,0.430,0.492,0.484,0.482,0.529,0.51]
            // ['Minnesota PVI Score',5.15,7.3,8.15,3.85,1.2,0.7,1.2,2.05,1.45]
            ['CPVI',3,3,1]
        ],
        type: 'area'
    },
    legend: {
      show: false
    },
    point: {
            show: false
        },
    color:  {  pattern: ["#3F88C5"] },
    axis: {
      y: {
            max: 25,
            min: 0,
            // label: 'Minnesota Electoral Votes',
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
             count: 4,
             format: d3.format('+.0f')
            }
        },
        x: {
            // type:'category',
            // categories: ['1976-1980','1980-1984','1984-1988','1988-1992','1992-1996','1996-2000','2000-2004','2004-2008','2008-2012'],
            // categories: ['1994','1998','2002','2006','2010','2014'],
            padding: {left: 0, right: 0, bottom: 0, top: 0},
            tick: {
                // values: ['1976', '1984', '1992', '2004', '2012'],
                count: 3,
                multiline: false
            },
            padding: {
            // left: .7,
            // right: .3
          }
          }
        },
    grid: {
        y: {
          lines: [
                {value: 218, text: '', position: 'start', class:'powerline'}
          ]

        }
    },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>D" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});
}

chartCPVI();

//Campaign Finance
function chartF(){
var  padding = {
        top: 20,
        right: 40,
        bottom: 20,
        left: 70,
    };

var chartF1 = c3.generate({
      bindto: "#fChart1",
      padding: padding,
        data: {
                // x: 'x',
                columns: [
                    // ['x','Trump','Clinton'],
                    ['Money Raised', 1148377, 193810]
                    // ['Campaign', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['PAC', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['SuperPac', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200]
                ],
            type: 'bar',
            colors: {
            'Money Raised': function(d) {
                return (d.index == 0 || d.index == 2 || d.index == 4 || d.index == 6 || d.index == 8 || d.index == 10 || d.index == 12 || d.index == 14) ? '#3f88c5': '#A52129';
            }
          }
            // groups: [
            //     ['Independent', 'Campaign','PAC','SuperPac']
            // ]
            },

            legend: {
              show: false
            },
            axis: {
              rotated: false,
              y: {
                    min: 0,
                    padding: {bottom: 0},
                    tick: {
                     count: 4,
                     format: d3.format('$,.0f')
                    }
                },
                x: {
                    type: 'category',
                    categories: ['Walz','Hagedorn']
                }
            },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              console.log(d)

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              if (d[i].index == 0 || d[i].index == 2 || d[i].index == 4 || d[i].index == 6 || d[i].index == 8 || d[i].index == 10 || d[i].index == 12 || d[i].index == 14){
                bgcolor = "#3f88c5";
              } else {
                bgcolor = "#A52129";
              }

              // bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chartF2 = c3.generate({
      bindto: "#fChart2",
      padding: padding,
        data: {
                // x: 'x',
                columns: [
                    // ['x','Trump','Clinton'],
                    ['Money Raised', 2522267, 358428]
                    // ['Campaign', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['PAC', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['SuperPac', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200]
                ],
            type: 'bar',
            colors: {
            'Money Raised': function(d) {
                return (d.index == 0 || d.index == 2 || d.index == 4 || d.index == 6 || d.index == 8 || d.index == 10 || d.index == 12 || d.index == 14) ? '#3f88c5': '#A52129';
            }
          }
            // groups: [
            //     ['Independent', 'Campaign','PAC','SuperPac']
            // ]
            },

            legend: {
              show: false
            },
            axis: {
              rotated: false,
              y: {
                    min: 0,
                    padding: {bottom: 0},
                    tick: {
                     count: 4,
                     format: d3.format('$,.0f')
                    }
                },
                x: {
                    type: 'category',
                    categories: ['Craig','Lewis']
                }
            },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              console.log(d)

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              if (d[i].index == 0 || d[i].index == 2 || d[i].index == 4 || d[i].index == 6 || d[i].index == 8 || d[i].index == 10 || d[i].index == 12 || d[i].index == 14){
                bgcolor = "#3f88c5";
              } else {
                bgcolor = "#A52129";
              }

              // bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chartF3 = c3.generate({
      bindto: "#fChart3",
      padding: padding,
        data: {
                // x: 'x',
                columns: [
                    // ['x','Trump','Clinton'],
                    ['Money Raised', 675738, 3093903]
                    // ['Campaign', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['PAC', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['SuperPac', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200]
                ],
            type: 'bar',
            colors: {
            'Money Raised': function(d) {
                return (d.index == 0 || d.index == 2 || d.index == 4 || d.index == 6 || d.index == 8 || d.index == 10 || d.index == 12 || d.index == 14) ? '#3f88c5': '#A52129';
            }
          }
            // groups: [
            //     ['Independent', 'Campaign','PAC','SuperPac']
            // ]
            },

            legend: {
              show: false
            },
            axis: {
              rotated: false,
              y: {
                    min: 0,
                    padding: {bottom: 0},
                    tick: {
                     count: 4,
                     format: d3.format('$,.0f')
                    }
                },
                x: {
                    type: 'category',
                    categories: ['Bonoff','Paulsen']
                }
            },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              console.log(d)

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              if (d[i].index == 0 || d[i].index == 2 || d[i].index == 4 || d[i].index == 6 || d[i].index == 8 || d[i].index == 10 || d[i].index == 12 || d[i].index == 14){
                bgcolor = "#3f88c5";
              } else {
                bgcolor = "#A52129";
              }

              // bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chartF4 = c3.generate({
      bindto: "#fChart4",
      padding: padding,
        data: {
                // x: 'x',
                columns: [
                    // ['x','Trump','Clinton'],
                    ['Money Raised', 674926, 11637]
                    // ['Campaign', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['PAC', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['SuperPac', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200]
                ],
            type: 'bar',
            colors: {
            'Money Raised': function(d) {
                return (d.index == 0 || d.index == 2 || d.index == 4 || d.index == 6 || d.index == 8 || d.index == 10 || d.index == 12 || d.index == 14) ? '#3f88c5': '#A52129';
            }
          }
            // groups: [
            //     ['Independent', 'Campaign','PAC','SuperPac']
            // ]
            },

            legend: {
              show: false
            },
            axis: {
              rotated: false,
              y: {
                    min: 0,
                    padding: {bottom: 0},
                    tick: {
                     count: 4,
                     format: d3.format('$,.0f')
                    }
                },
                x: {
                    type: 'category',
                    categories: ['McCollum','Ryan']
                }
            },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              console.log(d)

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              if (d[i].index == 0 || d[i].index == 2 || d[i].index == 4 || d[i].index == 6 || d[i].index == 8 || d[i].index == 10 || d[i].index == 12 || d[i].index == 14){
                bgcolor = "#3f88c5";
              } else {
                bgcolor = "#A52129";
              }

              // bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chartF5 = c3.generate({
      bindto: "#fChart5",
      padding: padding,
        data: {
                // x: 'x',
                columns: [
                    // ['x','Trump','Clinton'],
                    ['Money Raised', 1822925, 21236]
                    // ['Campaign', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['PAC', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['SuperPac', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200]
                ],
            type: 'bar',
            colors: {
            'Money Raised': function(d) {
                return (d.index == 0 || d.index == 2 || d.index == 4 || d.index == 6 || d.index == 8 || d.index == 10 || d.index == 12 || d.index == 14) ? '#3f88c5': '#A52129';
            }
          }
            // groups: [
            //     ['Independent', 'Campaign','PAC','SuperPac']
            // ]
            },

            legend: {
              show: false
            },
            axis: {
              rotated: false,
              y: {
                    min: 0,
                    padding: {bottom: 0},
                    tick: {
                     count: 4,
                     format: d3.format('$,.0f')
                    }
                },
                x: {
                    type: 'category',
                    categories: ['Ellison','Drake']
                }
            },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              console.log(d)

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              if (d[i].index == 0 || d[i].index == 2 || d[i].index == 4 || d[i].index == 6 || d[i].index == 8 || d[i].index == 10 || d[i].index == 12 || d[i].index == 14){
                bgcolor = "#3f88c5";
              } else {
                bgcolor = "#A52129";
              }

              // bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chartF6 = c3.generate({
      bindto: "#fChart6",
      padding: padding,
        data: {
                // x: 'x',
                columns: [
                    // ['x','Trump','Clinton'],
                    ['Money Raised', 22163, 1286808]
                    // ['Campaign', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['PAC', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['SuperPac', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200]
                ],
            type: 'bar',
            colors: {
            'Money Raised': function(d) {
                return (d.index == 0 || d.index == 2 || d.index == 4 || d.index == 6 || d.index == 8 || d.index == 10 || d.index == 12 || d.index == 14) ? '#3f88c5': '#A52129';
            }
          }
            // groups: [
            //     ['Independent', 'Campaign','PAC','SuperPac']
            // ]
            },

            legend: {
              show: false
            },
            axis: {
              rotated: false,
              y: {
                    min: 0,
                    padding: {bottom: 0},
                    tick: {
                     count: 4,
                     format: d3.format('$,.0f')
                    }
                },
                x: {
                    type: 'category',
                    categories: ['Snyder','Emmer']
                }
            },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              console.log(d)

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              if (d[i].index == 0 || d[i].index == 2 || d[i].index == 4 || d[i].index == 6 || d[i].index == 8 || d[i].index == 10 || d[i].index == 12 || d[i].index == 14){
                bgcolor = "#3f88c5";
              } else {
                bgcolor = "#A52129";
              }

              // bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chartF7 = c3.generate({
      bindto: "#fChart7",
      padding: padding,
        data: {
                // x: 'x',
                columns: [
                    // ['x','Trump','Clinton'],
                    ['Money Raised', 7575, 887175]
                    // ['Campaign', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['PAC', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['SuperPac', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200]
                ],
            type: 'bar',
            colors: {
            'Money Raised': function(d) {
                return (d.index == 0 || d.index == 2 || d.index == 4 || d.index == 6 || d.index == 8 || d.index == 10 || d.index == 12 || d.index == 14) ? '#3f88c5': '#A52129';
            }
          }
            // groups: [
            //     ['Independent', 'Campaign','PAC','SuperPac']
            // ]
            },

            legend: {
              show: false
            },
            axis: {
              rotated: false,
              y: {
                    min: 0,
                    padding: {bottom: 0},
                    tick: {
                     count: 4,
                     format: d3.format('$,.0f')
                    }
                },
                x: {
                    type: 'category',
                    categories: ['Peterson','Hughes']
                }
            },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              console.log(d)

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              if (d[i].index == 0 || d[i].index == 2 || d[i].index == 4 || d[i].index == 6 || d[i].index == 8 || d[i].index == 10 || d[i].index == 12 || d[i].index == 14){
                bgcolor = "#3f88c5";
              } else {
                bgcolor = "#A52129";
              }

              // bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});

var chartF8 = c3.generate({
      bindto: "#fChart8",
      padding: padding,
        data: {
                // x: 'x',
                columns: [
                    // ['x','Trump','Clinton'],
                    ['Money Raised', 1597405, 1352986]
                    // ['Campaign', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['PAC', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200],
                    // ['SuperPac', .30, .200, .30, .200, .30, .200, .30, .200, .200, .30, .200, .30, .200, .30, .200, .30, .200, .200]
                ],
            type: 'bar',
            colors: {
            'Money Raised': function(d) {
                return (d.index == 0 || d.index == 2 || d.index == 4 || d.index == 6 || d.index == 8 || d.index == 10 || d.index == 12 || d.index == 14) ? '#3f88c5': '#A52129';
            }
          }
            // groups: [
            //     ['Independent', 'Campaign','PAC','SuperPac']
            // ]
            },

            legend: {
              show: false
            },
            axis: {
              rotated: false,
              y: {
                    min: 0,
                    padding: {bottom: 0},
                    tick: {
                     count: 4,
                     format: d3.format('$,.0f')
                    }
                },
                x: {
                    type: 'category',
                    categories: ['Nolan','Mills']
                }
            },
        tooltip: {
      contents: function (d, defaultTitleFormat, defaultValueFormat, color) {
          var $$ = this, config = $$.config,
              titleFormat = config.tooltip_format_title || defaultTitleFormat,
              nameFormat = config.tooltip_format_name || function (name) { return name; },
              valueFormat = config.tooltip_format_value || defaultValueFormat,
              text, i, title, value, name, bgcolor;
          for (i = 0; i < d.length; i++) {
              if (! (d[i] && (d[i].value || d[i].value === 0))) { continue; }

              console.log(d)

              if (! text) {
                  title = titleFormat ? titleFormat(d[i].x) : d[i].x;
                  text = "<table class='" + $$.CLASS.tooltip + "'>" + (title || title === 0 ? "<tr><th colspan='2'>" + title + "</th></tr>" : "");
              }

              name = nameFormat(d[i].name);
              value = valueFormat(d[i].value, d[i].ratio, d[i].id, d[i].index);
              if (d[i].index == 0 || d[i].index == 2 || d[i].index == 4 || d[i].index == 6 || d[i].index == 8 || d[i].index == 10 || d[i].index == 12 || d[i].index == 14){
                bgcolor = "#3f88c5";
              } else {
                bgcolor = "#A52129";
              }

              // bgcolor = $$.levelColor ? $$.levelColor(d[i].value) : color(d[i].id);

              text += "<tr class='" + $$.CLASS.tooltipName + "-" + d[i].id + "'>";
              text += "<td class='name'><span style='background-color:" + bgcolor + "'></span>" + name + "</td>";
              text += "<td class='value'>" + value + "</td>";
              text += "</tr><tr>";
              text += "</tr>";
              
          }
          return text + "</table>";
      }
    }
});
}

chartF();

mapBuild("#mapFull", "#infobox", "#chart", "us_congress.json", "house", "us", data, 0);
mapBuild("#mnmap", "#infobox", "#chart", "us_cd_mn_2012.json", "state", "mnBig", data, 0);

var aspect = 650 / 400, chart = $("#mapFull svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);

// var aspect = 430 / 600, chart2 = $("#mnmap svg");
//   var targetWidth = chart2.parent().width();
//   chart2.attr("width", targetWidth);
//   chart2.attr("height", targetWidth / aspect);
  
});

</script>
</html>