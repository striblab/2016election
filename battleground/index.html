<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Battleground 2016</title>
  <meta name="description" content="Battleground 2016">
  <meta name="author" content="Frey Hargarten - StarTribune">

  <link rel="stylesheet" href="../_common_resources/styles/startribune_dataviz_styles.css" />
  <link rel="stylesheet" href="../_common_resources/interfaces/d3.slider-master/d3.slider.css" />
  <link href="../_common_resources/charts/c3-master/c3.css" rel="stylesheet" type="text/css">
  
  <style>
    /* PAGE BASE */
    body { font-family:"Benton Sans",Helvetica,Arial,sans-serif !important; overflow-x:hidden !important; }
    p { font-family:"Benton Sans",Helvetica,Arial,sans-serif !important; }
    a { color:#000; }
    #wrapper { text-align:center; height:auto; width:980px; margin-left:auto; margin-right:auto; }
    
    /* SWITCHES AND BUTTONS */
    #bottomSwitches { text-align:center; margin-left:auto; margin-right:auto; width:100%; }
    #viewSwitches { display:inline-block; border-right:1px solid #ddd; }
    .switch { padding:10px; display:inline-block; text-align:center; width:24.5%; background-color:#fff; font-weight:900; font-family:"Benton Sans",Helvetica,Arial,sans-serif; border:1px solid black; }
    .switch:hover, .selected2, .mapSwitch:hover, .typeSwitch:hover, .layerSwitch:hover /*.raceSwitch:hover*/ { opacity:1 !important; cursor:pointer; background-color:#fff !important; color:#000 !important; }
    .typeSwitch, .layerSwitch, .stateSwitch { width:60px; display:inline-block; opacity:.4; margin:5px; }
    .switch img { width:40px; }
    .mapSwitch img, .typeSwitch img, .layerSwitch img, .stateSwitch img { width:100%; }
    #raceSwitcher { float:left; width:20%; font-size:0.9em; }
    .raceSwitch { background:transparent; }
    #datavizPane { float:right; width:78%; }

     /* PANES */
    .dataviz { width:100%;  }
    #rightSide { width:100%; font-size:.8em; }
    #infobox { width:60%; margin-right:auto; margin-left:auto; }

    #allResults { height:200px; border-right:2px solid #ddd; overflow-x:hidden; overflow-y:auto; }

     /* MAPS */
    .map, .carto { width:800px; margin-right:auto; margin-left:auto; text-align:center;  }
    .noclicky { pointer-events:none !important; opacity:0.7; }
    .gone { pointer-events:none !important; opacity:0; }
    rect:hover, text:hover { background-color:#333 !important; cursor:pointer; opacity:.5; }
    #mnhouse .map, #mnhouse .carto, #mnsenate .map, #mnsenate .carto, #mnhouse .map svg, #mnhouse .carto svg, #mnsenate .map svg, #mnsenate .carto svg { display:inline-block; width:320px !important; height:350px !important; }
    .carto, #mnhouse .carto, #mnsenate .carto  { display:none; }

     /* RESET BUTTON */
    .zoom { float:none !important; text-align:center; }

    /* POWER BAR */
    #partyLabels, #partyBar, #partyCount { width:100%; }
    .bar, .count, .label { display:inline-block; }
    .backbar { background-color:#cccccc; padding:0 !important; margin:0!important; height:24px; }
    .label, .count { width:24%; }
    .bar { width:0; height:24px; }
    .gopLabel, .gopCount, .gopVotes { text-align:right !important; }
    .demsLabel, .demsCount, .demsVotes { text-align:left !important; }
    #demsBar { background-color:#0D4773; }
    #gopBar { background-color:#9C0004; }
    #undBar { background-color:#ddd; }
    #indBar { background-color:#E07242; }
    #dWin { float:left; }
    #rWin { float:right; }
    #indLabel, #undLabel, #indCount, #undCount { text-align:center; }
    #remaining { width:100%; }
    .check { width:20px; height:20px; }
    .demWin { float:left; }
    .gopWin { float:right; }

    /* COLOR SWATCHES */
    .republican { fill:#d34A44 !important; pointer-events: all; font-weight:bold; background-color:#d34A44; stroke:#8C1B17 !important; }
    .rlikely { background-color:#A5484D; fill:#A5484D !important; pointer-events: all; font-weight:bold; }
    .rlean { background-color:#f7816E; fill:#f7816E !important; pointer-events: all; font-weight:bold; }
    .democrat { fill:#3585BC !important; pointer-events: all; font-weight:bold; background-color:#3585BC; stroke:#3F88C5 !important; }
    .dlikely { background-color:#5ca5c3; fill:#5ca5c3 !important; pointer-events: all; font-weight:bold; }
    .dlean { background-color:#72A9D6; fill:#72A9D6 !important; pointer-events: all; font-weight:bold; }
    .r1 { background-color:#eca795; fill:#eca795 !important; color:black !important; pointer-events: all; font-weight:bold; }
    .r2 { background-color:#e58970; fill:#e58970 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .r3 { background-color:#df6a4c; fill:#df6a4c !important; color:white !important; pointer-events: all; font-weight:bold; }
    .r4 { background-color:#d84c27; fill:#d84c27 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .mid { background-color:#fff !important; fill:#ddd !important; color:#bbb !important; pointer-events: all; font-weight:bold; }
    .gray3 { color:black !important; }
    .d1 { background-color:#97bedb; fill:#97bedb !important; color:black !important; pointer-events: all; font-weight:bold; }
    .d2 { background-color:#73a7ce; fill:#73a7ce !important; color:white !important; pointer-events: all; font-weight:bold; }
    .d3 { background-color:#4f90c1; fill:#4f90c1 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .d4 { background-color:#2b7ab5; fill:#2b7ab5 !important; color:white !important; pointer-events: all; font-weight:bold; }
    .independent { fill:#66AF50; background-color:#66AF50; color:#333 !important; }
    .none { fill:#cccccc !important; background-color:#cccccc !important; }
    path { stroke-opacity:0.7 !important; }

    /* LEGENDS */
    #legends { text-align:center; }
    .legendLabel { display:inline-block; height:15px; width:50px; }
    .brick { height:15px; width:50px; display:inline-block; }
    .partyBlock { display:inline-block; margin-left:10px; }
    .tinybreak { clear:both; display:block; }
    #legendMargins { display:none; }

    /*CARTOGRAM*/
    .dem rect { fill:#3F88C5 !important; }
    .rep rect { fill:#D90429 !important; }
    .battleground rect { fill:#cccccc !important; }
    .cartoState:hover { opacity:0.5; }
    .cartoState rect { stroke-width:0.8px; stroke:#fff !important; }
    .cartoState rect:hover { opacity:1; cursor:default; }
    #cartogram { text-align:center; width:800px; height:600px; /*margin-left: auto; margin-right: auto;*/ }
    #cartogram text { font-weight:900; pointer-events:none !important; }
    polygon { stroke:#fff !important; stroke-width:1px; }
    .stateLabel { display:inline-block; width:68%; text-align:left; background-color:transparent !important; }
    .votes { display:inline-block; width:30%; text-align:left; background-color:transparent !important; font-family:"Benton Sans",Helvetica,Arial,sans-serif !important; }
    .stateLabel { font-family:"Benton Sans",Helvetica,Arial,sans-serif !important; font-weight:400; }
    .num:hover { opacity:0.5; }
 /*   #cartogram text { display:none; }*/
    .thisThing { opacity:0.5; }
    #legendMain { font-size:0.75em; }
    .totalNum { font-size:1.4em; font-weight:900; }
    .slide { display:none; }

    /* TABLES */
    #table { height:604px; }
    #chamber { width:450px; height:275px; margin-right:auto; margin-left:auto; text-align:center; display:none; }
    .column { width:48%; display:inline-block; vertical-align:top; }
    .counter div { width:48%; display:inline-block; }
    .tableHead { display:inline-block; padding:10px; border-bottom:1px solid #ddd; width:24%; font-weight:900; font-family:"Poynter Serif RE"; }
    .tableCell { display:inline-block; padding:10px; border-bottom:1px solid #ddd; width:24%; font-family:"Benton Sans"; }
    .tableBreak { clear:both; display:block; }
    .table { text-align:center; width:100%; overflow-x:hidden; overflow-y:auto; height:auto; }
    #filter input { border-radius:0 !important; }
    .chamberLabel { width:100%; display:block !important; text-align:center !important; margin-left:auto; margin-right:auto;  padding:7px; font-weight:900; }
    .district { display:inline-block; }
    .box { width:60px; height:40px; padding:3px; border:1px solid #000; vertical-align:middle; margin:2px; font-size:.7em; }
    .box:hover { background-color:#333; cursor:pointer; }

    /* HISTORICAL DATA */
    #historyview { width:540px; margin-left:auto; margin-right:auto; }
    .mapThumb { width:300px; margin-right:auto; margin-left:auto; }
    .mapThumb img { width:100%; }
    .chartTitle { text-align:center; }
    .turnout { text-align:center; }
    .d_history { float:left; }
    .r_history { float:right; }
    .historyBox { width:65%; margin-left:auto; margin-right:auto; padding:15px; }
    .smallbreak { clear:both; }

    /* INFOBOXES */
    .districtName { font-weight:900; font-size:1.2em; }
    .name { font-weight:900 !important; }
    .statRow { width:100%; }
    .cell { display:inline-block; text-align:center; }
    .statNum { padding:7px; font-size:1.2em; font-weight:400; }
    .statNum:hover { cursor:pointer; background-color:#333; color:#fff; }
    .raceRow .cell { width:50%; }
    .femaleRow .cell, .maleRow .cell, .schoolRow .cell { width:25%; }
    .incomeRow .cell { width:100%; }
    .stats .label { font-size:.5em; font-family:"Benton Sans",Helvetica,Arial,sans-serif; text-align:center; width:66% !important; }
    .pct path { stroke-width:.02px !important; }
    h2 { text-align:center; padding:10px; }
    .candidate { float:left; width:48%; }
    .pct { float:right; width:48%; }
    .tooltip { width:150px; }
    .resultsRow div { display:inline-block; width:24%; text-align:left; }
    .resultsRow { clear:both; }
    .resultsHead { font-weight:bold; }
    .reportingRow { margin-top:5px; float:right; color:#aaa; font-size:0.8em; }
    .tableRow { clear:both; text-align:left !important; margin:10px; }

    .hideIT { display:none; }

    /* NAV MENU */
    @import url(http://fonts.googleapis.com/css?family=Raleway:400,200);
    #cssmenu { text-align:left !important; }
    #cssmenu, #cssmenu ul, #cssmenu ul li, #cssmenu ul li a { margin: 0; padding: 0; border: 0; list-style: none; line-height: 1; display: block; position: relative; -webkit-box-sizing: border-box; -moz-box-sizing: border-box; box-sizing: border-box; }
    #cssmenu { width: 220px; font-family: "Benton Sans", sans-serif; color: #ffffff; position: absolute; top: 0; bottom: 0; left: 0; background: white; border-right: 1px solid #c5c5c5; }
    #cssmenu ul ul { display: none; }
    #cssmenu > ul > li.active > ul { display: block; }
    .align-right { float: right; }
    #cssmenu > ul > li > a { padding: 16px 22px; cursor: pointer; z-index: 2; font-size: 16px; text-decoration: none; color: #757575; background: #ffffff; -webkit-transition: color .2s ease; -o-transition: color .2s ease; transition: color .2s ease; }
    #cssmenu > ul > li > a:hover { color: #c1bebe; }
    #cssmenu > ul > li.has-sub a:active { color: #fff; background: #d8d8d8; -webkit-transition: all 0.1s ease-out; -moz-transition: all 0.1s ease-out; -ms-transition: all 0.1s ease-out; -o-transition: all 0.1s ease-out; transition: all 0.1s ease-out; }
    #cssmenu ul > li.has-sub > a:after {  position: absolute; right: 26px; top: 19px; z-index: 5; display: block; height: 10px; width: 2px; background: #757575; content: ""; -webkit-transition: all 0.1s ease-out; -moz-transition: all 0.1s ease-out; -ms-transition: all 0.1s ease-out; -o-transition: all 0.1s ease-out; transition: all 0.1s ease-out; }
    #cssmenu ul > li.has-sub > a:before { position: absolute; right: 22px; top: 23px; display: block; width: 10px; height: 2px; background: #757575; content: ""; -webkit-transition: all 0.1s ease-out; -moz-transition: all 0.1s ease-out; -ms-transition: all 0.1s ease-out; -o-transition: all 0.1s ease-out; transition: all 0.1s ease-out; }
    #cssmenu ul > li.has-sub.open > a:after,
    #cssmenu ul > li.has-sub.open > a:before { -webkit-transform: rotate(45deg); -moz-transform: rotate(45deg); -ms-transform: rotate(45deg); -o-transform: rotate(45deg); transform: rotate(45deg); }
    #cssmenu ul ul li a { padding: 14px 22px; cursor: pointer; z-index: 2; font-size: 14px; text-decoration: none; color: #989898; background: #efefef; -webkit-transition: color .2s ease; -o-transition: color .2s ease; transition: color .2s ease; }
    #cssmenu ul ul ul li a { padding-left: 32px; }
    #cssmenu ul ul li a:hover { color: #000; }
    #cssmenu ul ul > li.has-sub > a:after { top: 16px; right: 26px; background: #dddddd; }
    #cssmenu ul ul > li.has-sub > a:before { top: 20px; background: #dddddd; }

    /* BREAKPOINTS */
     @media (max-width:980px) {
      #raceSwitcher { display:none; }
      #cartogram { text-align:center; width:100%; height:auto; }
      #datavizPane { width:100%; }
      #wrapper { width:100%; }
      .map { width:100%; height:auto; }
      .carto { width:100%; height:auto; }
      #rightSide, .dataviz { width:100%; float:none; }
      #historyview { width:100%; margin-left:auto; margin-right:auto; }
      #viewSwitches { display:block; border-right:0; }
     }
  </style>
</head>

<body>
  <div id="wrapper">

<div id="mobileMenu">

</div>

<!-- RACE SWITCHING BAR -->
<div id="raceSwitcher">
<div id='cssmenu'>
<ul>
   <li class='<!-- active--> has-sub'><a href='index.html'>President</a>
      <ul>
         <li class="raceSwitch uszoom" data="president" legend="legendWinners" type="carto" layer="country" dLabel="Clinton" rLabel="Trump"><a href='#'><div><div><strong>U.S.</strong> electoral</div></div></a>
         </li>
         <li class="raceSwitch uszoom" data="president" legend="legendWinners" type="geo" layer="country" dLabel="Clinton" rLabel="Trump"><a href='#'> <div><div><strong>U.S.</strong> popular by state</div></div></a>
         </li>
         <li class="raceSwitch uszoom" data="president" legend="legendMargins" type="geo" layer="counties" dLabel="Clinton" rLabel="Trump"><a href='#'><div><div><strong>U.S.</strong> popular by county</div></div></a>
         </li>
         <li class="raceSwitch mnzoom" data="president" legend="legendMargins" type="geo" layer="counties" dLabel="Clinton" rLabel="Trump"><a href='#'><div><div><strong>MN</strong> popular by county</div></div></a>
         </li>
<!--          <li><a href='#'><div class="raceSwitch mnzoom" data="president" legend="legendMargins" type="map" layer="pct"><div><strong>MN</strong> popular by precinct</div></div></a> -->
         </li>
         <li class="raceSwitch metrozoom" data="president" legend="legendMargins" type="geo" layer="counties" dLabel="Clinton" rLabel="Trump"><a href='#'><div><div><strong>Metro</strong> popular by county</div></div></a>
         </li>
<!--          <li><a href='#'><div class="raceSwitch metrozoom" data="president" legend="legendMargins" type="map" layer="pct"><div><strong>Metro</strong> popular by precinct</div></div></a> -->
         </li>
      </ul>   
   </li>
   <li class="raceSwitch uszoom" data="senate" legend="legendWinners" type="geo" layer="country" dLabel="DEM" rLabel="GOP"><a href='#'><div><div>U.S. Senate</div></div></a></li>
   <li class='has-sub'><a href='#'>US House</a>
      <ul>
        <li class="raceSwitch uszoom" data="house" legend="legendWinners" type="geo" layer="country" dLabel="DEM" rLabel="GOP"><a href='#'><div><div><strong>U.S.</strong> by district</div></div></a></li>
        <li class="raceSwitch uszoom" data="house" legend="legendWinners" type="carto" layer="country" dLabel="DEM" rLabel="GOP"><a href='#'><div><div>CARTO by district </div></div></a></li>
        <li class="raceSwitch mnzoom" data="house" legend="legendWinners" type="geo" layer="country" dLabel="DEM" rLabel="GOP"><a href='#'><div><div><strong>MN</strong> by district</div></div></a></li>
      </ul>
   </li>  
   <li class="raceSwitch uszoom" data="governors" legend="legendWinners" type="geo" layer="country" dLabel="DEM" rLabel="GOP"><a href='#'><div><div>Governors</div></div></a></li>
   <li class='has-sub'><a href='#'>MN Senate</a>
      <ul>
        <li class="raceSwitch uszoom" data="mnsenate" legend="legendWinners" type="geo" layer="country" dLabel="DFL" rLabel="GOP"><a href='#'><div><div><strong>MN/Metro</strong> maps</div></div></a>
         </li>
        <li class="raceSwitch uszoom" data="mnsenate" legend="legendWinners" type="carto" layer="country" dLabel="DFL" rLabel="GOP"><a href='#'><div><div><strong>MN/Metro</strong> districts</div></div></a>
         </li>
      </ul>
   </li>
   <li class='has-sub'><a href='#'>MN House</a>
      <ul>
        <li class="raceSwitch uszoom" data="mnhouse" legend="legendWinners" type="geo" layer="country" dLabel="DFL" rLabel="GOP"><a href='#'><div><div><strong>MN/Metro</strong> maps</div></div></a>
         </li>
        <li class="raceSwitch uszoom" data="mnhouse" legend="legendWinners" type="carto" layer="country" dLabel="DFL" rLabel="GOP"><a href='#'><div><div><strong>MN/Metro</strong> districts</div></div></a>
         </li>
      </ul>
   </li>  
</ul>

<div class="table" id="table">
  <div class="filter"><input type="search" class="filter_box" placeholder="Search races"></input></div>
  <div id="allResults"></div>
  <div id="infobox"></div>
</div>
</div>
</div>

<div id="datavizPane">
<!-- POWER BALANCE BAR -->
<div class="bars" id="powerbar">
<div id="partyLabels">
  <div class="label demsLabel">  <span class="count demsCount">0</span> <span class="dparty">DEM</span> <span id="dMark" class="check"></span></div>
  <div class="label undLabel"></div>
  <div class="label indLabel"></div>
  <div class="label gopLabel"><span id="rMark" class="check"></span> <span class="rparty">GOP</span> <span class="count gopCount">0</span></div>
</div>
<div id="partyBar">
  <div class="backbar">
  <div class="bar democrat" id="dWin"></div><div class="bar republican" id="rWin"></div>
  </div>
</div>
</div>

<div class="breaker"></div>

<!-- DATAVIZ PANES -->

<!-- PRESIDENT PANES -->
<div id="president" class="dataviz">
<!-- MAPS -->
<div class="mapBox">
<div id="map" class="map geo"><svg id="USMAP" width="800" height="600" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid"></svg></div>
<div id="mapCounties" class="hideIT"><svg id="USCOUNTIES" width="800" height="600" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid"></svg></div>
<div id="mapStates" class="hideIT"><svg id="USSTATES" width="800" height="600" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid"></svg></div>
<div id="carto" class="map normal carto">
<div id="cartogram">
    <svg version="1.1" x="0px" y="0px" width="90%" viewBox="0 0 860 696.572" enable-background="new 0 0 860 696.572" xml:space="preserve">
<g id="PA" class="cartoState">
    <rect x="593.385" y="217.866" width="21.789" height="21.789"/>
    <rect x="615.174" y="217.866" width="21.793" height="21.79"/>
    <rect x="658.755" y="217.866" width="21.79" height="21.79"/>
    <rect x="636.968" y="217.866" width="21.787" height="21.79"/>
    <rect x="680.545" y="217.866" width="21.79" height="21.79"/>
    <rect x="702.334" y="217.866" width="21.788" height="21.79"/>
    <rect x="593.385" y="239.653" width="21.789" height="21.791"/>
    <rect x="615.174" y="239.654" width="21.793" height="21.79"/>
    <rect x="658.755" y="239.654" width="21.79" height="21.79"/>
    <rect x="636.968" y="239.654" width="21.787" height="21.79"/>
    <rect x="680.545" y="239.654" width="21.79" height="21.79"/>
    <rect x="702.334" y="239.654" width="21.788" height="21.79"/>
    <rect x="593.385" y="261.444" width="21.789" height="21.79"/>
    <rect x="571.604" y="217.851" width="21.788" height="21.792"/>
    <rect x="571.604" y="239.643" width="21.788" height="21.792"/>
    <rect x="615.174" y="261.446" width="21.793" height="21.788"/>
    <rect x="658.755" y="261.446" width="21.79" height="21.788"/>
    <rect x="636.968" y="261.446" width="21.787" height="21.788"/>
    <rect x="680.545" y="261.446" width="21.79" height="21.788"/>
    <rect x="702.334" y="261.446" width="21.788" height="21.788"/>
</g>
<g id="ME" class="cartoState">
    <rect x="789.546" y="21.79" width="21.79" height="21.79"/>
    <rect x="789.546" width="21.79" height="21.79"/>
</g>
<g id="ME01" class="cartoState">
    <rect x="811.307" width="21.789" height="21.79"/>
</g>
<g id="ME02" class="cartoState">
    <rect x="811.307" y="21.79" width="21.789" height="21.79"/>
</g>
<g id="NH" class="cartoState">
    <rect x="789.504" y="65.359" width="21.792" height="21.789"/>
    <rect x="789.504" y="43.569" width="21.792" height="21.791"/>
    <rect x="811.304" y="65.35" width="21.789" height="21.789"/>
    <rect x="811.304" y="43.56" width="21.789" height="21.79"/>
</g>
<g id="VT" class="cartoState">
    <rect x="767.745" y="65.33" width="21.789" height="21.793"/>
    <rect x="745.949" y="65.33" width="21.788" height="21.793"/>
    <rect x="724.173" y="65.33" width="21.79" height="21.793"/>
</g>
<g id="MA" class="cartoState">
    <rect x="745.926" y="87.128" width="21.796" height="21.79"/>
    <rect x="745.926" y="108.919" width="21.796" height="21.788"/>
    <rect x="724.075" y="87.128" width="21.793" height="21.79"/>
    <rect x="724.075" y="108.919" width="21.793" height="21.788"/>
    <rect x="767.719" y="87.128" width="21.792" height="21.79"/>
    <rect x="767.719" y="108.919" width="21.792" height="21.788"/>
    <rect x="789.51" y="87.128" width="21.786" height="21.79"/>
    <rect x="789.51" y="108.919" width="21.786" height="21.788"/>
    <rect x="811.296" y="87.128" width="21.793" height="21.79"/>
    <rect x="811.296" y="108.919" width="21.793" height="21.788"/>
    <rect x="833.089" y="108.919" width="21.787" height="21.788"/>
</g>
<g id="RI" class="cartoState">
    <rect x="789.521" y="130.711" width="21.785" height="21.79"/>
    <rect x="789.518" y="152.509" width="21.786" height="21.788"/>
    <rect x="811.278" y="130.711" width="21.786" height="21.79"/>
    <rect x="811.278" y="152.501" width="21.786" height="21.787"/>
</g>
<g id="CT" class="cartoState">
    <rect x="745.936" y="130.771" width="21.792" height="21.789"/>
    <rect x="724.145" y="152.561" width="21.791" height="21.789"/>
    <rect x="745.936" y="152.561" width="21.792" height="21.789"/>
    <rect x="767.694" y="130.771" width="21.793" height="21.789"/>
    <rect x="767.694" y="152.561" width="21.793" height="21.789"/>
    <rect x="724.145" y="130.771" width="21.791" height="21.789"/>
    <rect x="724.145" y="174.349" width="21.791" height="21.79"/>
</g>
<g id="NY" class="cartoState">
    <rect x="724.119" y="217.878" width="21.793" height="21.792"/>
    <rect x="658.756" y="196.09" width="21.789" height="21.789"/>
    <rect x="593.385" y="196.09" width="21.789" height="21.789"/>
    <rect x="615.174" y="196.09" width="21.793" height="21.789"/>
    <rect x="636.963" y="196.09" width="21.793" height="21.789"/>
    <rect x="658.756" y="174.299" width="21.789" height="21.79"/>
    <rect x="680.545" y="174.299" width="21.79" height="21.79"/>
    <rect x="702.331" y="174.299" width="21.789" height="21.79"/>
    <rect x="702.331" y="152.51" width="21.789" height="21.79"/>
    <rect x="702.331" y="130.721" width="21.789" height="21.789"/>
    <rect x="702.331" y="108.931" width="21.789" height="21.79"/>
    <rect x="702.331" y="87.145" width="21.789" height="21.788"/>
    <rect x="680.545" y="196.09" width="21.79" height="21.789"/>
    <rect x="571.6" y="196.09" width="21.786" height="21.789"/>
    <rect x="680.545" y="87.145" width="21.79" height="21.788"/>
    <rect x="658.756" y="108.931" width="21.789" height="21.79"/>
    <rect x="615.174" y="152.51" width="21.793" height="21.79"/>
    <rect x="593.385" y="174.299" width="21.789" height="21.79"/>
    <rect x="615.174" y="174.299" width="21.793" height="21.79"/>
    <rect x="636.963" y="174.299" width="21.793" height="21.79"/>
    <rect x="636.963" y="152.51" width="21.793" height="21.79"/>
    <rect x="745.922" y="217.875" width="21.79" height="21.79"/>
    <rect x="636.963" y="130.746" width="21.793" height="21.79"/>
    <rect x="658.756" y="152.51" width="21.789" height="21.79"/>
    <rect x="680.545" y="152.51" width="21.79" height="21.79"/>
    <rect x="680.545" y="130.721" width="21.79" height="21.789"/>
    <rect x="658.756" y="130.721" width="21.789" height="21.789"/>
    <rect x="680.545" y="108.931" width="21.79" height="21.79"/>
    <rect x="702.331" y="196.09" width="21.789" height="21.789"/>
</g>
<g id="NJ" class="cartoState">
    <rect x="745.907" y="261.471" width="21.787" height="21.791"/>
    <rect x="767.694" y="261.471" width="21.793" height="21.791"/>
    <rect x="789.487" y="283.263" width="21.786" height="21.79"/>
    <rect x="745.901" y="239.68" width="21.789" height="21.791"/>
    <rect x="767.69" y="239.68" width="21.787" height="21.791"/>
    <rect x="745.907" y="283.263" width="21.787" height="21.79"/>
    <rect x="745.907" y="305.05" width="21.787" height="21.787"/>
    <rect x="767.694" y="326.837" width="21.793" height="21.791"/>
    <rect x="767.694" y="305.05" width="21.793" height="21.787"/>
    <rect x="767.694" y="283.263" width="21.793" height="21.79"/>
    <rect x="789.487" y="326.837" width="21.786" height="21.791"/>
    <rect x="745.907" y="326.837" width="21.787" height="21.791"/>
    <rect x="789.487" y="305.05" width="21.786" height="21.787"/>
    <rect x="724.11" y="239.68" width="21.789" height="21.791"/>
</g>
<g id="DE" class="cartoState">
    <rect x="724.094" y="305.098" width="21.789" height="21.79"/>
    <rect x="724.094" y="283.254" width="21.789" height="21.79"/>
    <rect x="724.094" y="261.421" width="21.789" height="21.79"/>
</g>
<g id="MD" class="cartoState">
    <rect x="658.728" y="283.201" width="21.794" height="21.79"/>
    <rect x="680.521" y="283.201" width="21.79" height="21.79"/>
    <rect x="615.151" y="283.201" width="21.789" height="21.79"/>
    <rect x="636.94" y="283.201" width="21.793" height="21.79"/>
    <rect x="724.097" y="348.568" width="21.792" height="21.79"/>
    <rect x="680.521" y="304.99" width="21.79" height="21.791"/>
    <rect x="702.312" y="304.99" width="21.788" height="21.791"/>
    <rect x="702.312" y="326.78" width="21.788" height="21.788"/>
    <rect x="724.097" y="326.78" width="21.792" height="21.788"/>
    <rect x="702.304" y="283.244" width="21.79" height="21.791"/>
</g>
<g id="WV" class="cartoState">
    <rect x="571.579" y="261.43" width="21.789" height="21.791"/>
    <rect x="571.579" y="304.959" width="21.789" height="21.79"/>
    <rect x="571.579" y="283.171" width="21.789" height="21.789"/>
    <rect x="593.382" y="304.959" width="21.787" height="21.79"/>
    <rect x="593.382" y="283.171" width="21.787" height="21.789"/>
</g>
<g id="OH" class="cartoState">
    <rect x="484.467" y="217.851" width="21.79" height="21.791"/>
    <rect x="506.257" y="261.43" width="21.79" height="21.789"/>
    <rect x="506.257" y="283.217" width="21.79" height="21.79"/>
    <rect x="549.834" y="283.217" width="21.788" height="21.79"/>
    <rect x="528.046" y="283.217" width="21.788" height="21.79"/>
    <rect x="528.046" y="261.43" width="21.788" height="21.789"/>
    <rect x="528.046" y="239.64" width="21.788" height="21.79"/>
    <rect x="549.834" y="239.64" width="21.788" height="21.79"/>
    <rect x="484.456" y="305.007" width="21.79" height="21.79"/>
    <rect x="506.246" y="305.007" width="21.788" height="21.79"/>
    <rect x="528.046" y="305.007" width="21.79" height="21.79"/>
    <rect x="549.836" y="305.007" width="21.786" height="21.79"/>
    <rect x="549.834" y="261.43" width="21.788" height="21.789"/>
    <rect x="549.834" y="217.851" width="21.788" height="21.791"/>
    <rect x="484.467" y="239.64" width="21.79" height="21.79"/>
    <rect x="484.467" y="261.43" width="21.79" height="21.789"/>
    <rect x="484.467" y="283.217" width="21.79" height="21.79"/>
    <rect x="506.257" y="239.64" width="21.79" height="21.79"/>
</g>
<g id="MI" class="cartoState">
    <rect x="440.905" y="152.454" width="21.789" height="21.79"/>
    <rect x="462.694" y="152.454" width="21.788" height="21.79"/>
    <rect x="484.482" y="152.454" width="21.792" height="21.79"/>
    <rect x="440.905" y="130.663" width="21.789" height="21.79"/>
    <rect x="419.114" y="108.874" width="21.791" height="21.789"/>
    <rect x="440.905" y="174.243" width="21.789" height="21.788"/>
    <rect x="462.694" y="174.243" width="21.788" height="21.788"/>
    <rect x="506.271" y="196.031" width="21.789" height="21.79"/>
    <rect x="506.271" y="174.243" width="21.789" height="21.79"/>
    <rect x="506.271" y="152.454" width="21.789" height="21.79"/>
    <rect x="484.482" y="174.243" width="21.792" height="21.788"/>
    <rect x="440.905" y="196.031" width="21.789" height="21.79"/>
    <rect x="462.694" y="196.031" width="21.788" height="21.79"/>
    <rect x="484.482" y="196.031" width="21.792" height="21.79"/>
    <rect x="462.694" y="130.663" width="21.788" height="21.79"/>
    <rect x="397.326" y="108.874" width="21.788" height="21.789"/>
</g>
<g id="WI" class="cartoState">
    <rect x="353.733" y="130.666" width="21.789" height="21.788"/>
    <rect x="353.733" y="152.454" width="21.789" height="21.792"/>
    <rect x="375.521" y="130.666" width="21.792" height="21.788"/>
    <rect x="353.733" y="108.879" width="21.789" height="21.79"/>
    <rect x="375.521" y="108.879" width="21.792" height="21.79"/>
    <rect x="397.313" y="152.454" width="21.788" height="21.792"/>
    <rect x="375.521" y="152.454" width="21.792" height="21.792"/>
    <rect x="375.521" y="174.243" width="21.792" height="21.79"/>
    <rect x="397.313" y="174.243" width="21.788" height="21.79"/>
    <rect x="353.733" y="174.243" width="21.789" height="21.79"/>
</g>
<g id="MN" class="cartoState">
    <rect x="288.358" y="174.236" width="21.789" height="21.789"/>
    <rect x="310.147" y="174.236" width="21.791" height="21.789"/>
    <rect x="288.358" y="152.446" width="21.789" height="21.791"/>
    <rect x="331.943" y="108.867" width="21.79" height="21.79"/>
    <rect x="331.935" y="130.643" width="21.789" height="21.79"/>
    <rect x="310.147" y="152.446" width="21.791" height="21.791"/>
    <rect x="310.147" y="130.657" width="21.791" height="21.789"/>
    <rect x="331.935" y="174.221" width="21.79" height="21.79"/>
    <rect x="331.935" y="152.434" width="21.79" height="21.789"/>
    <rect x="288.358" y="130.657" width="21.789" height="21.789"/>
</g>
<g id="IA" class="cartoState">
    <rect x="288.369" y="195.99" width="21.79" height="21.79"/>
    <rect x="310.158" y="195.99" width="21.788" height="21.79"/>
    <rect x="331.946" y="195.99" width="21.792" height="21.79"/>
    <rect x="288.369" y="217.778" width="21.79" height="21.79"/>
    <rect x="331.946" y="217.778" width="21.792" height="21.79"/>
    <rect x="310.158" y="217.78" width="21.788" height="21.788"/>
</g>
<g id="ND" class="cartoState">
    <rect x="223.029" y="174.216" width="21.788" height="21.79"/>
    <rect x="244.807" y="174.216" width="21.788" height="21.79"/>
    <rect x="266.599" y="174.216" width="21.787" height="21.79"/>
</g>
<g id="SD" class="cartoState">
    <rect x="223.029" y="196.005" width="21.788" height="21.788"/>
    <rect x="244.807" y="196.005" width="21.788" height="21.788"/>
    <rect x="266.599" y="196.005" width="21.787" height="21.788"/>
</g>
<g id="NE" class="cartoState">
    <rect x="223.014" y="217.809" width="21.788" height="21.79"/>
    <rect x="244.806" y="239.587" width="21.792" height="21.789"/>
</g>
<g id="NE01" class="cartoState">
    <rect x="266.594" y="239.587" width="21.789" height="21.789"/>
</g>
<g id="NE02" class="cartoState">
    <rect x="266.594" y="217.8" width="21.789" height="21.791"/>
</g>
<g id="NE03" class="cartoState">
    <rect x="244.804" y="217.8" width="21.788" height="21.791"/>
</g>
<g id="IN" class="cartoState">
    <rect x="440.891" y="217.834" width="21.788" height="21.79"/>
    <rect x="462.679" y="217.834" width="21.792" height="21.79"/>
    <rect x="462.679" y="239.623" width="21.792" height="21.789"/>
    <rect x="440.891" y="239.623" width="21.788" height="21.789"/>
    <rect x="440.891" y="261.412" width="21.788" height="21.791"/>
    <rect x="462.679" y="261.412" width="21.792" height="21.791"/>
    <rect x="419.112" y="304.97" width="21.79" height="21.789"/>
    <rect x="440.891" y="283.201" width="21.788" height="21.79"/>
    <rect x="462.679" y="283.201" width="21.792" height="21.79"/>
    <rect x="440.891" y="304.979" width="21.788" height="21.79"/>
    <rect x="462.679" y="304.979" width="21.792" height="21.79"/>
</g>
<g id="IL" class="cartoState">
    <rect x="419.107" y="261.327" width="21.787" height="21.79"/>
    <rect x="419.107" y="239.518" width="21.787" height="21.788"/>
    <rect x="353.718" y="261.292" width="21.788" height="21.789"/>
    <rect x="353.732" y="195.934" width="21.788" height="21.792"/>
    <rect x="375.52" y="195.934" width="21.792" height="21.792"/>
    <rect x="397.312" y="195.934" width="21.792" height="21.792"/>
    <rect x="353.732" y="217.726" width="21.788" height="21.79"/>
    <rect x="375.52" y="217.726" width="21.792" height="21.79"/>
    <rect x="397.312" y="217.726" width="21.79" height="21.79"/>
    <rect x="375.516" y="239.492" width="21.79" height="21.791"/>
    <rect x="397.304" y="239.492" width="21.79" height="21.791"/>
    <rect x="419.091" y="283.067" width="21.787" height="21.792"/>
    <rect x="375.511" y="261.292" width="21.788" height="21.789"/>
    <rect x="397.304" y="261.292" width="21.79" height="21.789"/>
    <rect x="375.511" y="283.09" width="21.788" height="21.791"/>
    <rect x="397.288" y="283.09" width="21.792" height="21.791"/>
    <rect x="353.732" y="239.492" width="21.792" height="21.789"/>
    <rect x="375.501" y="304.881" width="21.792" height="21.792"/>
    <rect x="331.945" y="239.492" width="21.792" height="21.791"/>
    <rect x="397.292" y="304.881" width="21.788" height="21.792"/>
</g>
<g id="MO" class="cartoState">
    <rect x="310.153" y="261.304" width="21.792" height="21.788"/>
    <rect x="331.938" y="261.304" width="21.792" height="21.788"/>
    <rect x="310.155" y="239.498" width="21.791" height="21.791"/>
    <rect x="353.738" y="283.088" width="21.789" height="21.792"/>
    <rect x="310.153" y="283.092" width="21.788" height="21.791"/>
    <rect x="331.931" y="283.092" width="21.792" height="21.791"/>
    <rect x="353.738" y="304.883" width="21.789" height="21.79"/>
    <rect x="288.372" y="239.498" width="21.789" height="21.791"/>
    <rect x="310.153" y="304.883" width="21.788" height="21.79"/>
    <rect x="331.937" y="304.883" width="21.788" height="21.79"/>
</g>
<g id="KS" class="cartoState">
    <rect x="244.806" y="261.297" width="21.79" height="21.79"/>
    <rect x="266.592" y="261.297" width="21.792" height="21.79"/>
    <rect x="288.385" y="261.297" width="21.787" height="21.79"/>
    <rect x="266.585" y="283.088" width="21.79" height="21.792"/>
    <rect x="288.374" y="283.088" width="21.79" height="21.792"/>
    <rect x="244.806" y="283.088" width="21.788" height="21.792"/>
</g>
<g id="WY" class="cartoState">
    <rect x="135.764" y="217.758" width="21.792" height="21.789"/>
    <rect x="157.554" y="217.758" width="21.79" height="21.789"/>
    <rect x="179.327" y="217.758" width="21.789" height="21.789"/>
</g>
<g id="MT" class="cartoState">
    <rect x="114.004" y="195.964" width="21.789" height="21.791"/>
    <rect x="135.779" y="195.964" width="21.787" height="21.791"/>
    <rect x="157.578" y="195.964" width="21.79" height="21.791"/>
</g>
<g id="CO" class="cartoState">
    <rect x="179.367" y="261.314" width="21.787" height="21.788"/>
    <rect x="201.152" y="261.314" width="21.79" height="21.787"/>
    <rect x="222.944" y="261.314" width="21.79" height="21.787"/>
    <rect x="179.367" y="239.527" width="21.787" height="21.79"/>
    <rect x="222.944" y="239.527" width="21.79" height="21.789"/>
    <rect x="222.944" y="283.102" width="21.79" height="21.791"/>
    <rect x="179.367" y="283.102" width="21.787" height="21.791"/>
    <rect x="201.152" y="283.102" width="21.79" height="21.791"/>
    <rect x="201.152" y="239.527" width="21.79" height="21.79"/>
</g>
<g id="UT" class="cartoState">
    <rect x="135.766" y="283.088" width="21.788" height="21.789"/>
    <rect x="157.535" y="239.532" width="21.788" height="21.79"/>
    <rect x="157.554" y="283.088" width="21.79" height="21.789"/>
    <rect x="135.757" y="239.532" width="21.788" height="21.79"/>
    <rect x="135.757" y="261.304" width="21.791" height="21.788"/>
    <rect x="157.534" y="261.304" width="21.789" height="21.79"/>
</g>
<g id="NV" class="cartoState">
    <rect x="113.999" y="261.343" width="21.789" height="21.79"/>
    <rect x="92.197" y="283.157" width="21.788" height="21.792"/>
    <rect x="113.998" y="283.157" width="21.792" height="21.792"/>
    <rect x="92.197" y="261.343" width="21.792" height="21.788"/>
    <rect x="113.998" y="239.53" width="21.792" height="21.79"/>
    <rect x="92.197" y="239.53" width="21.788" height="21.79"/>
</g>
<g id="ID" class="cartoState">
    <rect x="92.181" y="174.194" width="21.791" height="21.789"/>
    <rect x="92.181" y="195.983" width="21.791" height="21.791"/>
    <rect x="92.181" y="217.769" width="21.791" height="21.79"/>
    <rect x="113.969" y="217.769" width="21.792" height="21.79"/>
</g>
<g id="WA" class="cartoState">
    <rect x="5.026" y="130.596" width="21.789" height="21.789"/>
    <rect x="26.815" y="130.596" width="21.79" height="21.789"/>
    <rect x="26.815" y="152.384" width="21.79" height="21.788"/>
    <rect x="5.012" y="86.998" width="21.79" height="21.789"/>
    <rect x="48.604" y="86.998" width="21.789" height="21.789"/>
    <rect x="70.393" y="86.998" width="21.791" height="21.789"/>
    <rect x="70.393" y="130.596" width="21.791" height="21.789"/>
    <rect x="48.604" y="130.596" width="21.789" height="21.789"/>
    <rect x="70.393" y="108.806" width="21.791" height="21.79"/>
    <rect x="48.604" y="108.806" width="21.789" height="21.79"/>
    <rect x="26.815" y="108.806" width="21.79" height="21.79"/>
    <rect x="5.012" y="108.806" width="21.79" height="21.79"/>
</g>
<g id="OR" class="cartoState">
    <rect x="5.026" y="174.175" width="21.789" height="21.79"/>
    <rect x="26.815" y="174.175" width="21.79" height="21.79"/>
    <rect x="48.604" y="174.175" width="21.789" height="21.79"/>
    <rect x="48.604" y="152.384" width="21.789" height="21.79"/>
    <rect x="70.393" y="174.175" width="21.791" height="21.79"/>
    <rect x="70.393" y="152.384" width="21.791" height="21.79"/>
    <rect x="5.026" y="152.386" width="21.789" height="21.789"/>
</g>
<g id="CA" class="cartoState">
    <rect x="5" y="195.904" width="21.79" height="21.788"/>
    <rect x="26.812" y="195.904" width="21.79" height="21.788"/>
    <rect x="48.576" y="195.904" width="21.79" height="21.788"/>
    <rect x="70.393" y="195.904" width="21.791" height="21.788"/>
    <rect x="5" y="217.695" width="21.79" height="21.789"/>
    <rect x="26.812" y="217.695" width="21.79" height="21.789"/>
    <rect x="48.576" y="217.695" width="21.79" height="21.789"/>
    <rect x="70.393" y="217.695" width="21.791" height="21.789"/>
    <rect x="5" y="239.588" width="21.79" height="21.788"/>
    <rect x="26.812" y="239.588" width="21.79" height="21.788"/>
    <rect x="48.576" y="239.588" width="21.79" height="21.788"/>
    <rect x="70.393" y="239.588" width="21.791" height="21.788"/>
    <rect x="5" y="261.273" width="21.79" height="21.788"/>
    <rect x="26.812" y="261.273" width="21.79" height="21.788"/>
    <rect x="48.576" y="261.273" width="21.79" height="21.788"/>
    <rect x="70.393" y="261.273" width="21.791" height="21.788"/>
    <rect x="5" y="283.062" width="21.79" height="21.789"/>
    <rect x="26.812" y="283.062" width="21.79" height="21.789"/>
    <rect x="48.576" y="283.062" width="21.79" height="21.789"/>
    <rect x="70.393" y="283.062" width="21.791" height="21.789"/>
    <rect x="26.812" y="414.03" width="21.79" height="21.792"/>
    <rect x="48.625" y="414.03" width="21.79" height="21.792"/>
    <rect x="70.388" y="414.03" width="21.791" height="21.792"/>
    <rect x="92.204" y="414.03" width="21.789" height="21.792"/>
    <rect x="26.812" y="435.82" width="21.79" height="21.792"/>
    <rect x="48.625" y="435.82" width="21.79" height="21.792"/>
    <rect x="70.388" y="435.82" width="21.791" height="21.792"/>
    <rect x="92.204" y="435.82" width="21.789" height="21.792"/>
    <rect x="5" y="304.91" width="21.79" height="21.789"/>
    <rect x="26.812" y="304.91" width="21.79" height="21.789"/>
    <rect x="48.576" y="304.91" width="21.79" height="21.789"/>
    <rect x="70.393" y="304.91" width="21.791" height="21.789"/>
    <rect x="92.153" y="304.91" width="21.791" height="21.789"/>
    <rect x="5" y="326.808" width="21.79" height="21.788"/>
    <rect x="26.812" y="326.808" width="21.79" height="21.788"/>
    <rect x="48.576" y="326.808" width="21.79" height="21.788"/>
    <rect x="70.393" y="326.808" width="21.791" height="21.788"/>
    <rect x="92.153" y="326.808" width="21.791" height="21.788"/>
    <rect x="5" y="348.558" width="21.79" height="21.788"/>
    <rect x="26.812" y="348.558" width="21.79" height="21.788"/>
    <rect x="48.576" y="348.558" width="21.79" height="21.788"/>
    <rect x="70.393" y="348.558" width="21.791" height="21.788"/>
    <rect x="92.153" y="348.558" width="21.791" height="21.788"/>
    <rect x="5" y="370.454" width="21.79" height="21.787"/>
    <rect x="26.812" y="370.454" width="21.79" height="21.787"/>
    <rect x="48.576" y="370.454" width="21.79" height="21.787"/>
    <rect x="70.393" y="370.454" width="21.791" height="21.787"/>
    <rect x="92.153" y="370.454" width="21.791" height="21.787"/>
    <rect x="114.004" y="370.454" width="21.79" height="21.787"/>
    <rect x="5" y="392.244" width="21.79" height="21.786"/>
    <rect x="26.812" y="392.244" width="21.79" height="21.786"/>
    <rect x="48.576" y="392.244" width="21.79" height="21.786"/>
    <rect x="70.393" y="392.244" width="21.791" height="21.786"/>
    <rect x="92.153" y="392.244" width="21.791" height="21.786"/>
    <rect x="114.004" y="392.244" width="21.79" height="21.786"/>
</g>
<g id="AZ" class="cartoState">
    <rect x="114.004" y="326.669" width="21.789" height="21.79"/>
    <rect x="135.793" y="326.669" width="21.789" height="21.79"/>
    <rect x="157.583" y="326.669" width="21.791" height="21.79"/>
    <rect x="157.583" y="348.456" width="21.791" height="21.79"/>
    <rect x="135.793" y="348.456" width="21.789" height="21.79"/>
    <rect x="157.583" y="370.315" width="21.791" height="21.789"/>
    <rect x="135.793" y="370.315" width="21.789" height="21.789"/>
    <rect x="114.004" y="348.456" width="21.789" height="21.79"/>
    <rect x="135.793" y="304.88" width="21.789" height="21.789"/>
    <rect x="157.583" y="304.88" width="21.791" height="21.789"/>
    <rect x="114.004" y="304.88" width="21.789" height="21.789"/>
</g>
<g id="NM" class="cartoState">
    <rect x="179.352" y="348.487" width="21.789" height="21.791"/>
    <rect x="201.141" y="326.698" width="21.79" height="21.789"/>
    <rect x="179.352" y="326.698" width="21.789" height="21.789"/>
    <rect x="201.141" y="304.909" width="21.79" height="21.791"/>
    <rect x="179.352" y="304.909" width="21.789" height="21.791"/>
</g>
<g id="OK" class="cartoState">
    <rect x="222.912" y="304.79" width="21.787" height="21.791"/>
    <rect x="244.701" y="304.79" width="21.791" height="21.791"/>
    <rect x="266.49" y="304.79" width="21.789" height="21.791"/>
    <rect x="266.49" y="326.58" width="21.789" height="21.789"/>
    <rect x="288.268" y="304.79" width="21.79" height="21.791"/>
    <rect x="288.268" y="326.58" width="21.79" height="21.789"/>
    <rect x="244.701" y="326.58" width="21.791" height="21.789"/>
</g>
<g id="AR" class="cartoState">
    <rect x="310.11" y="326.662" width="21.79" height="21.787"/>
    <rect x="331.899" y="326.662" width="21.788" height="21.787"/>
    <rect x="331.899" y="348.449" width="21.788" height="21.791"/>
    <rect x="353.702" y="326.662" width="21.788" height="21.787"/>
    <rect x="375.475" y="326.68" width="21.789" height="21.788"/>
    <rect x="310.11" y="348.449" width="21.79" height="21.791"/>
</g>
<g id="TN" class="cartoState">
    <rect x="419.078" y="348.556" width="21.791" height="21.794"/>
    <rect x="462.654" y="348.556" width="21.792" height="21.794"/>
    <rect x="484.445" y="348.556" width="21.786" height="21.794"/>
    <rect x="506.231" y="348.556" width="21.794" height="21.794"/>
    <rect x="462.635" y="326.761" width="21.792" height="21.79"/>
    <rect x="397.267" y="326.761" width="21.789" height="21.79"/>
    <rect x="440.846" y="326.761" width="21.789" height="21.79"/>
    <rect x="419.054" y="326.761" width="21.792" height="21.79"/>
    <rect x="440.868" y="348.556" width="21.789" height="21.794"/>
    <rect x="375.486" y="348.556" width="21.792" height="21.794"/>
    <rect x="397.276" y="348.556" width="21.786" height="21.794"/>
</g>
<g id="KY" class="cartoState">
    <rect x="528.014" y="348.676" width="21.79" height="21.788"/>
    <rect x="528.029" y="326.886" width="21.792" height="21.79"/>
    <rect x="549.804" y="348.676" width="21.793" height="21.788"/>
    <rect x="571.597" y="348.676" width="21.789" height="21.788"/>
    <rect x="593.385" y="348.676" width="21.789" height="21.788"/>
    <rect x="549.821" y="326.886" width="21.789" height="21.79"/>
    <rect x="484.445" y="326.886" width="21.793" height="21.79"/>
    <rect x="506.238" y="326.886" width="21.791" height="21.79"/>
</g>
<g id="VA" class="cartoState">
    <rect x="571.582" y="326.819" width="21.789" height="21.791"/>
    <rect x="593.371" y="326.819" width="21.791" height="21.791"/>
    <rect x="615.162" y="348.59" width="21.789" height="21.79"/>
    <rect x="636.95" y="348.59" width="21.791" height="21.79"/>
    <rect x="636.95" y="305.039" width="21.791" height="21.791"/>
    <rect x="636.95" y="326.819" width="21.791" height="21.791"/>
    <rect x="615.137" y="305.039" width="21.794" height="21.791"/>
    <rect x="615.137" y="326.819" width="21.794" height="21.791"/>
    <rect x="658.738" y="305.039" width="21.79" height="21.791"/>
    <rect x="658.738" y="326.819" width="21.79" height="21.791"/>
    <rect x="680.528" y="348.59" width="21.789" height="21.793"/>
    <rect x="658.738" y="348.59" width="21.79" height="21.79"/>
    <rect x="680.528" y="326.819" width="21.789" height="21.791"/>
</g>
<g id="NC" class="cartoState">
    <rect x="593.286" y="392.15" width="21.788" height="21.793"/>
    <rect x="615.108" y="392.15" width="21.792" height="21.793"/>
    <rect x="571.516" y="370.367" width="21.79" height="21.793"/>
    <rect x="636.916" y="392.15" width="21.79" height="21.793"/>
    <rect x="658.726" y="392.15" width="21.79" height="21.793"/>
    <rect x="593.305" y="370.367" width="21.786" height="21.793"/>
    <rect x="615.131" y="370.367" width="21.79" height="21.793"/>
    <rect x="680.532" y="392.15" width="21.789" height="21.793"/>
    <rect x="658.741" y="370.369" width="21.793" height="21.791"/>
    <rect x="658.726" y="413.921" width="21.794" height="21.791"/>
    <rect x="680.534" y="370.369" width="21.787" height="21.791"/>
    <rect x="615.108" y="413.921" width="21.792" height="21.791"/>
    <rect x="636.916" y="413.921" width="21.786" height="21.791"/>
    <rect x="549.672" y="370.367" width="21.795" height="21.793"/>
    <rect x="636.943" y="370.367" width="21.785" height="21.793"/>
</g>
<g id="DC" class="cartoState">
    <rect x="768.818" y="349.15" width="21.792" height="21.791"/>
    <rect x="745.818" y="349.15" width="21.792" height="21.793"/>
    <rect x="745.904" y="370.207" width="21.788" height="21.792"/>
</g>
<g id="AK" class="cartoState">
    <rect x="41.265" y="507.53" width="21.789" height="21.789"/>
    <rect x="41.265" y="529.317" width="21.789" height="21.789"/>
    <rect x="19.083" y="551.473" width="21.79" height="21.791"/>
</g>
<g id="HI" class="cartoState">
    <rect x="141.415" y="507.53" width="21.792" height="21.79"/>
    <rect x="163.206" y="529.317" width="21.792" height="21.791"/>
    <rect x="185.153" y="551.473" width="21.792" height="21.792"/>
    <rect x="206.944" y="551.473" width="21.792" height="21.791"/>
</g>
<g id="FL" class="cartoState">
    <rect x="571.543" y="479.308" width="21.793" height="21.788"/>
    <rect x="593.336" y="479.308" width="21.785" height="21.788"/>
    <rect x="615.121" y="501.088" width="21.793" height="21.791"/>
    <rect x="636.909" y="501.088" width="21.79" height="21.791"/>
    <rect x="658.699" y="653.615" width="21.793" height="21.791"/>
    <rect x="549.753" y="479.308" width="21.793" height="21.788"/>
    <rect x="658.699" y="588.247" width="21.793" height="21.79"/>
    <rect x="593.336" y="501.088" width="21.785" height="21.79"/>
    <rect x="636.909" y="522.879" width="21.79" height="21.789"/>
    <rect x="527.964" y="479.308" width="21.789" height="21.788"/>
    <rect x="506.178" y="479.308" width="21.786" height="21.788"/>
    <rect x="658.699" y="544.664" width="21.793" height="21.794"/>
    <rect x="658.699" y="631.824" width="21.793" height="21.791"/>
    <rect x="615.121" y="522.879" width="21.793" height="21.789"/>
    <rect x="636.909" y="653.615" width="21.79" height="21.791"/>
    <rect x="658.699" y="610.035" width="21.793" height="21.789"/>
    <rect x="636.909" y="631.824" width="21.79" height="21.791"/>
    <rect x="636.909" y="610.035" width="21.79" height="21.789"/>
    <rect x="636.909" y="588.247" width="21.79" height="21.79"/>
    <rect x="636.909" y="566.457" width="21.79" height="21.79"/>
    <rect x="615.121" y="544.664" width="21.793" height="21.794"/>
    <rect x="615.121" y="566.457" width="21.793" height="21.79"/>
    <rect x="615.121" y="588.247" width="21.793" height="21.79"/>
    <rect x="615.121" y="610.035" width="21.793" height="21.789"/>
    <rect x="658.699" y="566.457" width="21.793" height="21.79"/>
    <rect x="658.699" y="501.088" width="21.793" height="21.791"/>
    <rect x="658.699" y="522.879" width="21.793" height="21.794"/>
    <rect x="636.909" y="544.664" width="21.79" height="21.794"/>
    <rect x="571.543" y="501.088" width="21.793" height="21.79"/>
</g>
<g id="SC" class="cartoState">
    <rect x="636.896" y="479.269" width="21.787" height="21.79"/>
    <rect x="658.684" y="457.479" width="21.796" height="21.79"/>
    <rect x="658.684" y="435.691" width="21.796" height="21.79"/>
    <rect x="615.106" y="457.479" width="21.79" height="21.79"/>
    <rect x="615.106" y="479.269" width="21.79" height="21.79"/>
    <rect x="658.684" y="479.269" width="21.796" height="21.79"/>
    <rect x="636.896" y="457.479" width="21.787" height="21.79"/>
    <rect x="615.106" y="435.691" width="21.79" height="21.79"/>
    <rect x="636.896" y="435.691" width="21.787" height="21.79"/>
</g>
<g id="GA" class="cartoState">
    <rect x="527.979" y="392.187" width="21.788" height="21.79"/>
    <rect x="549.767" y="392.187" width="21.793" height="21.788"/>
    <rect x="571.558" y="392.187" width="21.788" height="21.788"/>
    <rect x="527.941" y="370.396" width="21.789" height="21.79"/>
    <rect x="527.979" y="413.975" width="21.788" height="21.786"/>
    <rect x="549.767" y="413.972" width="21.793" height="21.789"/>
    <rect x="571.558" y="413.972" width="21.788" height="21.789"/>
    <rect x="571.558" y="457.552" width="21.788" height="21.791"/>
    <rect x="593.345" y="457.552" width="21.789" height="21.791"/>
    <rect x="593.336" y="435.764" width="21.789" height="21.792"/>
    <rect x="593.345" y="413.972" width="21.789" height="21.789"/>
    <rect x="527.979" y="457.552" width="21.788" height="21.791"/>
    <rect x="549.767" y="457.552" width="21.793" height="21.791"/>
    <rect x="571.558" y="435.764" width="21.788" height="21.792"/>
    <rect x="527.979" y="435.764" width="21.788" height="21.792"/>
    <rect x="549.767" y="435.764" width="21.793" height="21.792"/>
</g>
<g id="AL" class="cartoState">
    <rect x="462.667" y="392.212" width="21.789" height="21.787"/>
    <rect x="484.456" y="392.212" width="21.79" height="21.787"/>
    <rect x="462.667" y="370.406" width="21.789" height="21.791"/>
    <rect x="484.456" y="370.406" width="21.79" height="21.791"/>
    <rect x="484.456" y="414.037" width="21.79" height="21.789"/>
    <rect x="462.667" y="414.037" width="21.789" height="21.789"/>
    <rect x="506.227" y="392.212" width="21.787" height="21.789"/>
    <rect x="506.227" y="370.408" width="21.79" height="21.789"/>
    <rect x="506.223" y="414.037" width="21.791" height="21.791"/>
</g>
<g id="MS" class="cartoState">
    <rect x="397.31" y="370.454" width="21.792" height="21.787"/>
    <rect x="419.1" y="370.454" width="21.788" height="21.787"/>
    <rect x="440.885" y="370.452" width="21.787" height="21.789"/>
    <rect x="419.095" y="392.241" width="21.79" height="21.789"/>
    <rect x="397.314" y="392.244" width="21.786" height="21.786"/>
    <rect x="440.877" y="392.244" width="21.79" height="21.786"/>
</g>
<g id="LA" class="cartoState">
    <rect x="353.681" y="370.26" width="21.788" height="21.792"/>
    <rect x="375.49" y="392.052" width="21.789" height="21.786"/>
    <rect x="353.681" y="413.838" width="21.788" height="21.791"/>
    <rect x="353.681" y="392.052" width="21.788" height="21.786"/>
    <rect x="375.49" y="413.838" width="21.789" height="21.791"/>
    <rect x="397.32" y="413.838" width="21.792" height="21.791"/>
    <rect x="375.493" y="370.26" width="21.787" height="21.792"/>
    <rect x="353.681" y="348.456" width="21.791" height="21.79"/>
</g>
<g id="TX" class="cartoState">
    <rect x="222.898" y="326.588" width="21.788" height="21.788"/>
    <rect x="201.108" y="370.219" width="21.79" height="21.791"/>
    <rect x="222.898" y="348.366" width="21.788" height="21.789"/>
    <rect x="244.686" y="348.366" width="21.791" height="21.789"/>
    <rect x="222.898" y="370.219" width="21.788" height="21.791"/>
    <rect x="244.686" y="370.219" width="21.791" height="21.791"/>
    <rect x="266.477" y="370.219" width="21.788" height="21.791"/>
    <rect x="288.265" y="479.164" width="21.791" height="21.79"/>
    <rect x="222.898" y="392.01" width="21.788" height="21.79"/>
    <rect x="244.686" y="392.01" width="21.791" height="21.79"/>
    <rect x="266.477" y="392.01" width="21.788" height="21.79"/>
    <rect x="288.265" y="392.01" width="21.791" height="21.79"/>
    <rect x="310.055" y="392.01" width="21.791" height="21.79"/>
    <rect x="331.842" y="392.01" width="21.792" height="21.79"/>
    <rect x="266.477" y="479.164" width="21.788" height="21.79"/>
    <rect x="266.477" y="457.378" width="21.788" height="21.789"/>
    <rect x="244.686" y="457.378" width="21.791" height="21.789"/>
    <rect x="201.108" y="392.01" width="21.79" height="21.79"/>
    <rect x="222.898" y="413.8" width="21.788" height="21.787"/>
    <rect x="244.686" y="413.8" width="21.791" height="21.788"/>
    <rect x="266.477" y="413.8" width="21.788" height="21.788"/>
    <rect x="288.265" y="413.8" width="21.791" height="21.788"/>
    <rect x="310.055" y="413.8" width="21.791" height="21.788"/>
    <rect x="331.842" y="413.8" width="21.792" height="21.788"/>
    <rect x="288.265" y="370.219" width="21.791" height="21.791"/>
    <rect x="266.477" y="348.366" width="21.788" height="21.789"/>
    <rect x="288.265" y="348.366" width="21.791" height="21.789"/>
    <rect x="331.842" y="370.219" width="21.792" height="21.791"/>
    <rect x="201.108" y="413.8" width="21.79" height="21.788"/>
    <rect x="222.898" y="435.585" width="21.788" height="21.792"/>
    <rect x="244.686" y="435.587" width="21.791" height="21.793"/>
    <rect x="266.477" y="435.587" width="21.788" height="21.793"/>
    <rect x="288.265" y="435.587" width="21.791" height="21.793"/>
    <rect x="310.055" y="435.587" width="21.791" height="21.793"/>
    <rect x="310.055" y="370.219" width="21.791" height="21.791"/>
    <rect x="201.129" y="348.366" width="21.79" height="21.789"/>
    <rect x="288.265" y="457.378" width="21.791" height="21.789"/>
    <rect x="179.317" y="370.223" width="21.79" height="21.787"/>
</g>
<g id="labels">
</g>
<g>
    <text transform="matrix(1 0 0 1 634.5459 253.0298)">PA</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 800.4951 22.7681)">ME</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 800.709 67.5225)">NH</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 728.4854 82.7822)">VT</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 730.2783 115.2788)">MA</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 797.8691 156.0396)">RI</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 730.168 159.1758)">CT</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 655.666 176.9756)">NY</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 761.4434 307.2148)">NJ</text>
</g>
    <text transform="matrix(1 0 0 1 720.6611 290.4951)">DE</text>
<g>
    <text transform="matrix(1 0 0 1 687.0957 310.6392)">MD</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 570.5723 305.1094)">WV</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 508.2764 284.7144)">OH</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 458.3867 188.1318)">MI</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 366.9663 176.5874)">WI</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 297.4551 176.5854)">MN</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 301.0615 219.4805)">IA</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 235.6074 190.542)">ND</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 235.3838 212.2583)">SD</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 236.0249 233.9722)">NE</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 446.6367 275.1074)">IN</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 385.3857 260.0415)">IL</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 324.7559 307.3965)">MO</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 253.7261 288.3877)">KS</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 146.2573 233.9702)">WY</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 119.6094 212.0845)">MT</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 189.4282 276.0938)">CO</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 138.3203 276.7612)">UT</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 95.2354 275.2827)">NV</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 100.6392 233.9722)">ID</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 18.2832 133.6523)">WA</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 26.7891 191.3711)">OR</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 23.4517 341.9648)">CA</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 124.792 348.0547)">AZ</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 181.3237 332.2461)">NM</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 254.1372 331.5869)">OK</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 313.8501 352.4258)">AR</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 417.4175 352.8994)">TN</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 536.9121 352.8994)">KY</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 629.7734 342.4941)">VA</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 630.7305 401.3809)">NC</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 759.7549 409.2383)">DC</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 20.1812 546.6758)">AK</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 164.9419 570.8096)">HI</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 631.5918 582.8545)">FL</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 630.5078 472.6221)">SC</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 554.1865 439.7744)">GA</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 476.4355 407.7295)">AL</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 405.7368 396.4111)">MS</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 363.5508 414.3857)">LA</text>
</g>
<g>
    <text transform="matrix(1 0 0 1 247.7451 416.5967)">TX</text>
</g>
<g id="stroke">
    <polygon fill="none" stroke-width="1.7" points="397.313,152.454 397.313,130.667 397.313,130.666 
        397.313,108.879 375.521,108.879 353.733,108.879 353.733,130.666 353.733,130.667 353.733,152.454 353.733,174.243 
        353.733,196.033 375.521,196.033 397.313,196.033 419.1,196.033 419.1,174.243 419.1,152.454   "/>
    <polygon fill="none" stroke-width="1.7" points="658.699,501.088 636.909,501.088 615.121,501.088 
        615.121,479.308 593.336,479.308 571.543,479.308 549.753,479.308 527.964,479.308 506.178,479.308 506.178,501.096 
        527.964,501.096 549.753,501.096 571.543,501.096 571.543,522.878 593.336,522.878 615.121,522.878 615.121,522.879 
        615.121,544.664 615.121,566.457 615.121,588.247 615.121,610.035 615.121,631.824 636.909,631.824 636.909,653.615 
        636.909,675.403 658.699,675.403 680.492,675.403 680.492,653.615 680.492,631.824 680.492,610.035 680.492,588.247 
        680.492,566.457 680.492,544.671 680.492,544.664 680.492,522.879 680.492,522.879 680.492,501.088     "/>
    <polygon fill="none" stroke-width="1.7" points="331.946,195.99 310.158,195.99 288.369,195.99 288.369,217.778 
        288.369,217.78 288.369,239.567 310.158,239.567 331.946,239.567 353.738,239.567 353.738,217.78 353.738,217.778 353.738,195.99    
        "/>
    <polygon fill="none" stroke-width="1.7" points="70.393,152.384 48.604,152.384 48.604,174.175 26.815,174.175 
        26.815,152.386 5.026,152.386 5.026,174.175 5.026,195.964 26.815,195.964 48.604,195.964 70.393,195.964 92.184,195.964 
        92.184,174.175 92.184,152.384   "/>
    <polygon fill="none" stroke-width="1.7" points="5.026,195.964 26.815,195.964 48.604,195.964 70.393,195.964 
        92.184,195.964 92.184,304.949 113.998,304.949 113.998,370.246 135.793,370.246 135.793,413.819 113.946,413.819 113.946,457.43 
        26.8,457.43 26.8,413.819 5.012,413.819  "/>
    <polygon fill="none" stroke-width="1.7" points="135.793,392.034 135.793,370.246 113.998,370.246 
        113.998,304.949 179.346,304.949 179.346,392.01  "/>
    <polygon fill="none" stroke-width="1.7" points="5.026,152.386 26.815,152.386 26.815,174.175 48.604,174.175 
        48.604,152.384 70.393,152.384 92.184,152.384 92.184,86.998 48.604,86.998 48.604,108.806 26.8,108.806 26.8,86.998 5.012,86.998 
            "/>
    <polygon fill="none" stroke-width="1.7" points="113.972,217.769 113.972,195.983 113.972,174.194 
        92.181,174.194 92.181,195.983 92.181,217.769 92.181,217.771 92.181,239.558 113.969,239.558 113.972,239.558 135.761,239.558 
        135.761,217.769     "/>
    <rect x="114.004" y="195.964" fill="none" stroke-width="1.7" width="65.362" height="21.791"/>
    <rect x="222.994" y="174.202" fill="none" stroke-width="1.7" width="65.361" height="21.79"/>
    <rect x="222.994" y="196.031" fill="none" stroke-width="1.7" width="65.361" height="21.79"/>
    <rect x="135.79" y="217.843" fill="none" stroke-width="1.7" width="65.361" height="21.789"/>
    <rect x="92.181" y="239.558" fill="none" stroke-width="1.7" width="43.612" height="65.322"/>
    <rect x="135.904" y="239.558" fill="none" stroke-width="1.7" width="43.419" height="65.322"/>
    <rect x="179.519" y="239.558" fill="none" stroke-width="1.7" width="65.286" height="65.322"/>
    <rect x="462.737" y="370.333" fill="none" stroke-width="1.7" width="65.284" height="65.324"/>
    <rect x="615.201" y="435.855" fill="none" stroke-width="1.7" width="65.284" height="65.322"/>
    <polygon fill="none" stroke-width="1.7" points="593.345,414.101 615.155,414.101 615.155,479.422 
        527.979,479.422 527.979,370.464 549.804,370.464 549.804,392.16 593.305,392.16   "/>
    <polygon fill="none" stroke-width="1.7" points="615.155,435.764 615.155,414.101 593.345,414.101 
        593.305,392.16 549.804,392.16 549.804,370.464 702.317,370.464 702.317,413.943 680.516,413.943 680.516,435.855   "/>
    <polygon fill="none" stroke-width="1.7" points="179.372,368.816 179.372,304.88 222.898,304.88 222.898,348.376 
        201.13,348.376 201.13,370.278 179.346,370.278   "/>
    <polygon fill="none" stroke-width="1.7" points="244.732,239.643 222.994,239.643 222.994,217.854 
        288.355,217.854 288.355,261.297 244.775,261.297     "/>
    <rect x="244.806" y="261.297" fill="none" stroke-width="1.7" width="65.251" height="43.494"/>
    <rect x="397.356" y="370.403" fill="none" stroke-width="1.7" width="65.251" height="43.627"/>
    <polygon fill="none" stroke-width="1.7" points="244.643,326.59 244.643,348.369 310.055,348.369 310.055,304.79 
        222.912,304.79 222.912,326.588  "/>
    <polygon fill="none" stroke-width="1.7" points="222.912,326.588 244.643,326.588 244.643,348.369 
        310.055,348.369 310.055,370.209 353.688,370.209 353.688,435.587 331.842,435.587 331.842,457.378 310.055,457.378 
        310.055,500.954 266.477,500.954 266.477,479.164 244.686,479.164 244.686,457.378 222.898,457.378 222.898,435.585 
        201.108,435.585 201.108,392.01 179.346,392.01 179.346,370.278 201.13,370.278 201.13,348.376 222.898,348.376 222.898,327.035     
        "/>
    <path fill="none" stroke-width="1.7" d="M353.688,370.592"/>
    <polygon fill="none" stroke-width="1.7" points="353.688,369.562 353.688,348.449 375.486,348.449 
        375.486,370.349 397.31,370.349 397.31,414.03 419.1,414.03 419.1,435.629 353.688,435.629     "/>
    <polygon fill="none" stroke-width="1.7" points="353.732,108.867 331.943,108.867 331.943,130.643 
        331.935,130.643 331.935,130.657 310.147,130.657 288.358,130.657 288.358,152.446 288.358,174.236 288.358,196.026 
        310.147,196.026 331.935,196.026 331.935,196.01 353.725,196.01 353.725,174.221 353.725,152.434 353.725,130.657 353.732,130.657 
            "/>
    <g>
        <polygon fill="none" stroke-width="1.7" points="419.114,108.874 397.326,108.874 397.326,130.663 
            419.114,130.663 440.905,130.663 440.905,108.874         "/>
        <polygon fill="none" stroke-width="1.7" points="506.271,152.454 484.482,152.454 484.482,130.663 
            462.694,130.663 440.905,130.663 440.905,152.454 440.905,174.243 440.905,196.031 440.905,217.822 462.694,217.822 
            484.482,217.822 506.271,217.822 528.061,217.822 528.061,196.033 528.061,196.031 528.061,174.243 528.061,152.454         "/>
    </g>
    <polygon fill="none" stroke-width="1.7" points="462.679,217.834 440.891,217.834 440.891,239.623 
        440.891,261.412 440.891,283.201 440.891,304.97 419.112,304.97 419.112,326.759 440.891,326.759 440.891,326.77 462.679,326.77 
        484.471,326.77 484.471,304.99 484.471,304.979 484.471,283.201 484.471,261.412 484.471,239.623 484.471,217.834   "/>
    <g>
        <polygon fill="none" stroke-width="1.7" points="724.119,174.299 724.119,152.51 724.119,130.721 
            724.119,108.931 724.119,87.145 702.331,87.145 680.545,87.145 680.545,108.931 658.756,108.931 658.756,130.721 658.756,130.746 
            636.963,130.746 636.963,152.51 615.174,152.51 615.174,174.299 593.385,174.299 593.385,196.09 571.6,196.09 571.6,217.878 
            593.385,217.878 615.174,217.878 636.963,217.878 658.756,217.878 680.545,217.878 702.331,217.878 724.119,217.878 
            724.119,196.09      "/>
        <polygon fill="none" stroke-width="1.7" points="745.922,239.665 767.712,239.665 767.712,217.875 
            746.126,217.875 745.912,217.878 724.119,217.878 724.119,239.669 745.509,239.669         "/>
    </g>
    <polygon fill="none" stroke-width="1.7" points="767.727,130.771 767.694,130.771 745.936,130.771 
        724.145,130.771 724.145,152.561 724.145,174.349 724.145,196.141 745.936,196.141 745.936,174.349 767.694,174.349 
        767.727,174.349 789.487,174.349 789.487,152.561 789.487,130.771     "/>
    <polygon fill="none" stroke-width="1.7" points="811.336,0 811.307,0 789.546,0 789.546,21.79 789.546,43.579 
        811.307,43.579 811.336,43.579 833.096,43.579 833.096,21.79 833.096,0    "/>
    <polygon fill="none" stroke-width="1.7" points="811.336,43.625 811.307,43.625 789.546,43.625 789.546,65.412 
        789.546,87.201 811.307,87.201 811.336,87.201 833.096,87.201 833.096,65.412 833.096,43.625   "/>
    <polygon fill="none" stroke-width="1.7" points="811.336,130.758 811.307,130.758 789.546,130.758 
        789.546,152.55 789.546,174.337 811.307,174.337 811.336,174.337 833.096,174.337 833.096,152.55 833.096,130.758   "/>
    <polygon fill="none" stroke-width="1.7" points="756.84,65.33 756.879,65.33 789.546,65.33 789.546,76.267 
        789.546,87.201 756.879,87.201 756.84,87.201 724.173,87.201 724.173,76.267 724.173,65.33     "/>
    <polygon fill="none" stroke-width="1.7" points="833.089,130.708 724.119,130.708 724.119,87.145 833.089,87.145 
        833.089,108.92 854.876,108.92 854.876,130.708   "/>
    <polygon fill="none" stroke-width="1.7" points="288.383,239.672 331.946,239.672 331.946,261.289 
        353.729,261.289 353.729,283.092 375.529,283.092 375.529,326.68 310.055,326.68 310.055,261.297 288.355,261.297   "/>
    <polygon fill="none" stroke-width="1.7" points="353.633,326.58 310.055,326.58 310.055,370.219 353.633,370.219 
        353.633,348.456 397.292,348.456 397.292,326.68  "/>
    <polyline fill="none" stroke-width="1.7" points="375.353,326.832 419.112,326.759 419.112,304.97 
        440.891,304.97 440.891,283.201 440.891,261.412 440.891,239.623 419.094,239.623 419.1,196.033 397.313,196.033 375.521,196.033 
        353.733,196.033 353.733,239.567 331.946,239.672 331.946,261.289 353.729,261.289 353.729,283.092 375.529,283.092 
        375.529,326.672     "/>
    <polygon fill="none" stroke-width="1.7" points="484.471,326.77 484.471,348.676 528.028,348.676 
        528.028,370.464 375.486,370.464 375.486,348.456 397.292,348.456 397.292,326.795     "/>
    <polygon fill="none" stroke-width="1.7" points="549.834,217.822 571.579,217.822 571.579,326.749 
        484.482,326.749 484.482,217.822 506.257,217.822 506.257,239.64 549.834,239.64   "/>
    <polygon fill="none" stroke-width="1.7" points="571.597,348.556 571.597,326.797 484.456,326.797 
        484.456,348.676 528.021,348.676 528.021,370.367 615.091,370.367 615.091,348.556     "/>
    <polygon fill="none" stroke-width="1.7" points="680.534,326.827 680.534,305.039 615.137,305.039 
        615.137,326.819 571.597,326.819 571.597,348.676 615.137,348.676 615.137,370.369 680.528,370.369 680.534,370.369 
        702.321,370.369 702.321,326.827     "/>
    <polygon fill="none" stroke-width="1.7" points="571.579,261.434 571.579,217.822 724.122,217.822 
        724.122,283.234 593.385,283.234 593.385,261.442     "/>
    <polygon fill="none" stroke-width="1.7" points="593.282,283.234 593.282,283.016 593.282,261.434 
        571.604,261.434 571.604,326.819 593.282,326.819 615.174,326.819 615.174,283.234     "/>
    <rect x="724.122" y="261.444" fill="none" stroke-width="1.7" width="21.785" height="65.393"/>
    <polygon fill="none" stroke-width="1.7" points="724.097,326.78 724.097,304.99 724.094,304.99 724.094,283.244 
        702.312,283.244 702.312,283.201 680.521,283.201 658.728,283.201 636.94,283.201 615.151,283.201 615.151,304.99 636.94,304.99 
        658.728,304.99 680.521,304.99 680.521,326.78 702.312,326.78 702.312,348.568 724.097,348.568 724.097,370.354 745.889,370.354 
        745.889,348.568 745.889,326.78  "/>
    <polygon fill="none" stroke-width="1.7" points="811.273,348.628 745.889,348.628 745.889,261.444 
        724.014,261.444 724.122,239.68 789.478,239.68 789.478,283.263 811.273,283.263   "/>
    <polygon fill="none" stroke-width="1.7" points="752.904,392.207 796.61,392.207 796.61,435.782 774.818,435.782 
        774.818,413.999 752.904,413.999     "/>
</g>
</svg>
</div>

</div>
</div>
</div>

<!-- SENATE PANES -->
<div id="senate" class="dataviz">
<div class="mapBox">
<div id="mapSen" class="map geo"><svg id="USSENATE" width="800" height="600" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid"></svg></div>
<div id="cartoSen" class="map normal carto"><svg width="800" height="600" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid"></svg></div>
</div>
</div>

<!-- GOVERNORS PANES -->
<div id="governors" class="dataviz">
<div class="mapBox">
<div id="mapGov" class="map geo"><svg id="USGOV" width="800" height="600" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid"></svg></div>
<div id="cartoGov" class="map normal carto"><svg width="800" height="600" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid"></svg></div>
</div>
</div>

<!-- HOUSE PANES -->
<div id="house" class="dataviz">
<div class="mapBox">
<div id="mapHouse" class="map geo"><svg id="USHOUSE" width="800" height="600" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid"></svg></div>
<div id="cartoHouse" class="map normal carto"><svg width="800" height="600" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid"></svg></div>
<div id="mapMN" class="hideIT"><svg id="USHOUSEMN" width="800" height="600" viewBox="0 0 800 500" preserveAspectRatio="xMidYMid"></svg></div>
</div>
</div>

<!-- MNHOUSE PANES -->
<div id="mnhouse" class="dataviz">
<div class="mapBox">
      <div class="mapState map geo"><svg id="MNHOUSE" width="320" height="350" viewBox="0 0 500 550" preserveAspectRatio="xMidYMid"></svg></div>
      <div class="mapMetro map geo"><svg id="MNHOUSEMETRO" width="320" height="350" viewBox="0 0 500 550" preserveAspectRatio="xMidYMid"></svg></div>
      <div class="cartoState map normal carto"><svg width="320" height="350" viewBox="0 0 500 550" preserveAspectRatio="xMidYMid"></svg></div>
      <div class="cartoMetro map normal carto"><svg width="320" height="350" viewBox="0 0 500 550" preserveAspectRatio="xMidYMid"></svg></div>
</div>
<div class="table" id="table" style="display:none;"><div class="filter"><input type="search" class="filter_box" placeholder="Search races"></input></div></div>
</div>

<!-- MNSENATE PANES -->
<div id="mnsenate" class="dataviz">
<div class="mapBox">
      <div class="mapState map geo"><svg id="MNSENATE" width="320" height="350" viewBox="0 0 500 550" preserveAspectRatio="xMidYMid"></svg></div>
      <div class="mapMetro map geo"><svg id="MNSENATEMETRO" width="320" height="350" viewBox="0 0 500 550" preserveAspectRatio="xMidYMid"></svg></div>
      <div class="cartoState map normal carto"><svg width="320" height="350" viewBox="0 0 500 550" preserveAspectRatio="xMidYMid"></svg></div>
      <div class="cartoMetro map normal carto"><svg width="320" height="350" viewBox="0 0 500 550" preserveAspectRatio="xMidYMid"></svg></div>
</div>
<div class="table" id="table" style="display:none;"><div class="filter"><input type="search" class="filter_box" placeholder="Search races"></input></div></div>
</div>


<!-- END DATAVIZ PANES -->

<!-- DETAILS PANE-->
<div id="rightSide">

<!-- COLOR SCALE LEGENDS -->
<div id="legends">
<div id="popularVote">
    <div class='partyBlock'><div class="voteTotals">Votes: <span class='dcount'>0</span> | <span class="pctNum demPCT">50%</span></div></div>
    <div class='partyBlock'><div class="voteTotals">Votes: <span class='rcount'>0</span> | <span class="pctNum gopPCT">50%</span></div></div>
</div>    
<div id="legendMargins" class="legendBlock">
    <div class="breaker"></div>
    <div class='partyBlock'>
    <div class='dparty legendLabel'>DEM</div>
    <div class='d4 brick'></div>
    <div class='d3 brick'></div>
    <div class='d2 brick'></div>
    <div class='d1 brick'></div>
    <div class="tinybreak"></div>
    <div class='legendLabel'></div>
    <div class='brick smallLabel'>80%</div> 
    <div class='brick smallLabel'>70%</div> 
    <div class='brick smallLabel'>60%</div> 
    <div class='brick smallLabel'>50%</div>
  </div>
  <div class='partyBlock'>
    <div class='r1 brick'></div>
    <div class='r2 brick'></div>
    <div class='r3 brick'></div>
    <div class='r4 brick'></div>
    <div class='rparty legendLabel'>GOP</div>
    <div class="tinybreak"></div>
    <div class='brick smallLabel'>50%</div>
    <div class='brick smallLabel'>60%</div> 
    <div class='brick smallLabel'>70%</div>
    <div class='brick smallLabel'>80%</div>
    <div class='legendLabel'></div>
  </div>
</div>
<div id="legendWinners" class="legendBlock">
  <div class="breaker"></div>
  <div class='partyBlock'>
    <div class='dparty legendLabel'>Clinton</div>
    <div class='dlean brick'></div>
    <div class='democrat brick'></div>
    <div class="tinybreak"></div>
    <div class='legendLabel'></div>
    <div class='brick smallLabel'>Lean</div>
    <div class='brick smallLabel'>Win</div>  
  </div>
  <div class='partyBlock'>
    <div class='rparty legendLabel'>Trump</div>
    <div class='rlean brick'></div>
    <div class='republican brick'></div>
    <div class="tinybreak"></div>
    <div class='legendLabel'></div>
    <div class='brick smallLabel'>Lean</div>
    <div class='brick smallLabel'>Win</div>   
  </div>
</div>
</div>

</div>
</div>
<!-- end datavizPane -->

</div>
<!-- end wrapper -->

<div id="dump" style="display:none;"></div>
</body>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<script src="https://d3js.org/d3.v3.min.js" charset="utf-8"></script>
<script src="../_common_resources/interfaces/d3.slider-master/d3.slider.js"></script>
<script src="../_common_resources/charts/c3-master/c3.min.js"></script>
<script src="//d3js.org/topojson.v1.min.js"></script>

<script>
//data fetching function
function fetchData(district,state,type,dataCompare,race,ev,label){

  //base: officeName
  //.reportingUnits[i]: .reportingunitName, statePostal, stateName, precinctsReporting, precinctsTotal, precinctsReportingPct, lastUpdated, level, fipsCode
  //.reportingUnits[i].candidates[k]: first, last, party, voteCount, winner, incumbent

//USHOUSE, MNHOUSE, MNSENATE SPECIFIC
  //base: seatName, seatNum

var stateName = '';
var statePostal = '';
var precinctsReporting = 0;
var precinctsTotal = 0;
var precinctsReportingPct = 0;
var lastUpdated = 0;

var fipsCode = '';
var seatName = '';
var seatNum = '';

var firstR = '';
var lastR = '';
var partyR = '';
var incumbentR = false;
var voteCountR = 0;
var winnerR = '';
var pctR = 0;

var firstD = '';
var lastD = '';
var partyD = '';
var incumbentD = false;
var voteCountD = 0;
var winnerD = '';
var pctD = 0;

var voteCountO = 0;
var pctO = 0;

var voteCountT = 0;


  for (var i=0; i < dataCompare.races.length; i++) {
   if (race == "ushouse" || race == "mnhouse" || race == "mnsenate"){
    if (district == "District 0"){
      if (dataCompare.races[i].seatName == "District 1") {
     for (var j=0; j < dataCompare.races[i].reportingUnits.length; j++) {
         if (dataCompare.races[i].reportingUnits[j].stateName == state){
              stateName = dataCompare.races[i].reportingUnits[j].stateName;
              statePostal = dataCompare.races[i].reportingUnits[j].statePostal;
              precinctsReporting = dataCompare.races[i].reportingUnits[j].precinctsReporting;
              precinctsTotal = dataCompare.races[i].reportingUnits[j].precinctsTotal;
              precinctsReportingPct = dataCompare.races[i].reportingUnits[j].precinctsReportingPct;
              lastUpdated = dataCompare.races[i].reportingUnits[j].lastUpdated;

           for (var k=0; k < dataCompare.races[i].reportingUnits[j].candidates.length; k++) {
              if (dataCompare.races[i].reportingUnits[j].candidates[k].party == "GOP") {
                firstR = dataCompare.races[i].reportingUnits[j].candidates[k].first;
                lastR = dataCompare.races[i].reportingUnits[j].candidates[k].last;
                partyR = dataCompare.races[i].reportingUnits[j].candidates[k].party;
                incumbentR = dataCompare.races[i].reportingUnits[j].candidates[k].incumbent;
                voteCountR = dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
                winnerR = dataCompare.races[i].reportingUnits[j].candidates[k].winner;
              } else if (dataCompare.races[i].reportingUnits[j].candidates[k].party == "Dem") {
                firstD = dataCompare.races[i].reportingUnits[j].candidates[k].first;
                lastD = dataCompare.races[i].reportingUnits[j].candidates[k].last;
                partyD = dataCompare.races[i].reportingUnits[j].candidates[k].party;
                incumbentD = dataCompare.races[i].reportingUnits[j].candidates[k].incumbent;
                voteCountD = dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
                winnerD = dataCompare.races[i].reportingUnits[j].candidates[k].winner;
              } else {
                voteCountO += dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
              }
           } //end k loop
         } //end if
     } //end j loop
    } //end if
}
     else {
        if (dataCompare.races[i].seatName == district) {
     for (var j=0; j < dataCompare.races[i].reportingUnits.length; j++) {
         if (dataCompare.races[i].reportingUnits[j].stateName == state){
              stateName = dataCompare.races[i].reportingUnits[j].stateName;
              statePostal = dataCompare.races[i].reportingUnits[j].statePostal;
              precinctsReporting = dataCompare.races[i].reportingUnits[j].precinctsReporting;
              precinctsTotal = dataCompare.races[i].reportingUnits[j].precinctsTotal;
              precinctsReportingPct = dataCompare.races[i].reportingUnits[j].precinctsReportingPct;
              lastUpdated = dataCompare.races[i].reportingUnits[j].lastUpdated;

           for (var k=0; k < dataCompare.races[i].reportingUnits[j].candidates.length; k++) {
              if (dataCompare.races[i].reportingUnits[j].candidates[k].party == "GOP") {
                firstR = dataCompare.races[i].reportingUnits[j].candidates[k].first;
                lastR = dataCompare.races[i].reportingUnits[j].candidates[k].last;
                partyR = dataCompare.races[i].reportingUnits[j].candidates[k].party;
                incumbentR = dataCompare.races[i].reportingUnits[j].candidates[k].incumbent;
                voteCountR = dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
                winnerR = dataCompare.races[i].reportingUnits[j].candidates[k].winner;
              } else if (dataCompare.races[i].reportingUnits[j].candidates[k].party == "Dem") {
                firstD = dataCompare.races[i].reportingUnits[j].candidates[k].first;
                lastD = dataCompare.races[i].reportingUnits[j].candidates[k].last;
                partyD = dataCompare.races[i].reportingUnits[j].candidates[k].party;
                incumbentD = dataCompare.races[i].reportingUnits[j].candidates[k].incumbent;
                voteCountD = dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
                winnerD = dataCompare.races[i].reportingUnits[j].candidates[k].winner;
              } else {
                voteCountO += dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
              }
           } //end k loop
         } //end if
     } //end j loop
    } //end if
     }


   } else {
     for (var j=0; j < dataCompare.races[i].reportingUnits.length; j++) {
       if (state != null){
         if (dataCompare.races[i].reportingUnits[j].stateName == state){
              stateName = dataCompare.races[i].reportingUnits[j].stateName;
              statePostal = dataCompare.races[i].reportingUnits[j].statePostal;
              precinctsReporting = dataCompare.races[i].reportingUnits[j].precinctsReporting;
              precinctsTotal = dataCompare.races[i].reportingUnits[j].precinctsTotal;
              precinctsReportingPct = dataCompare.races[i].reportingUnits[j].precinctsReportingPct;
              lastUpdated = dataCompare.races[i].reportingUnits[j].lastUpdated;

           for (var k=0; k < dataCompare.races[i].reportingUnits[j].candidates.length; k++) { 
              if (dataCompare.races[i].reportingUnits[j].candidates[k].party == "GOP") {
                firstR = dataCompare.races[i].reportingUnits[j].candidates[k].first;
                lastR = dataCompare.races[i].reportingUnits[j].candidates[k].last;
                partyR = dataCompare.races[i].reportingUnits[j].candidates[k].party;
                incumbentR = dataCompare.races[i].reportingUnits[j].candidates[k].incumbent;
                voteCountR = dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
                winnerR = dataCompare.races[i].reportingUnits[j].candidates[k].winner;
              } else if (dataCompare.races[i].reportingUnits[j].candidates[k].party == "Dem") {
                firstD = dataCompare.races[i].reportingUnits[j].candidates[k].first;
                lastD = dataCompare.races[i].reportingUnits[j].candidates[k].last;
                partyD = dataCompare.races[i].reportingUnits[j].candidates[k].party;
                incumbentD = dataCompare.races[i].reportingUnits[j].candidates[k].incumbent;
                voteCountD = dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
                winnerD = dataCompare.races[i].reportingUnits[j].candidates[k].winner;
              } else {
                voteCountO += dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
              }
           } //end k loop
         }
      } else {
         if (dataCompare.races[i].reportingUnits[j].fipsCode == district){
              stateName = dataCompare.races[i].reportingUnits[j].stateName;
              statePostal = dataCompare.races[i].reportingUnits[j].statePostal;
              precinctsReporting = dataCompare.races[i].reportingUnits[j].precinctsReporting;
              precinctsTotal = dataCompare.races[i].reportingUnits[j].precinctsTotal;
              precinctsReportingPct = dataCompare.races[i].reportingUnits[j].precinctsReportingPct;
              lastUpdated = dataCompare.races[i].reportingUnits[j].lastUpdated;

           for (var k=0; k < dataCompare.races[i].reportingUnits[j].candidates.length; k++) { 
              if (dataCompare.races[i].reportingUnits[j].candidates[k].party == "GOP") {
                firstR = dataCompare.races[i].reportingUnits[j].candidates[k].first;
                lastR = dataCompare.races[i].reportingUnits[j].candidates[k].last;
                partyR = dataCompare.races[i].reportingUnits[j].candidates[k].party;
                incumbentR = dataCompare.races[i].reportingUnits[j].candidates[k].incumbent;
                voteCountR = dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
                winnerR = dataCompare.races[i].reportingUnits[j].candidates[k].winner;
              } else if (dataCompare.races[i].reportingUnits[j].candidates[k].party == "Dem") {
                firstD = dataCompare.races[i].reportingUnits[j].candidates[k].first;
                lastD = dataCompare.races[i].reportingUnits[j].candidates[k].last;
                partyD = dataCompare.races[i].reportingUnits[j].candidates[k].party;
                incumbentD = dataCompare.races[i].reportingUnits[j].candidates[k].incumbent;
                voteCountD = dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
                winnerD = dataCompare.races[i].reportingUnits[j].candidates[k].winner;
              } else {
                voteCountO += dataCompare.races[i].reportingUnits[j].candidates[k].voteCount;
              }
           } //end k loop
         }
      }
     } //end j loop
   }
   } //end i loop

   voteCountT = voteCountR + voteCountD + voteCountO;
   pctR = voteCountR / voteCountT;
   pctD = voteCountD / voteCountT;
   pctO = voteCountO / voteCountT;

  var evString = "";
  var stateString = state;

  if (ev != null) { evString = "<span class='ev'> - " + ev + " electoral votes</span>"; }
  if (label != null) { stateString = label + ", " + statePostal; } else { stateString = state; }

  if (type == "tooltip"){
      if (pctR >= .80) { var colorR = "r4"; } 
      else if (pctR >= .70) { var colorR = "r3"; } 
      else if (pctR >= .60) { var colorR = "r2"; } 
      else if (pctR >= 0) { var colorR = "r1"; } 
      if (pctD >= .80) { var colorD = "d4"; }
      else if (pctD >= .70) { var colorD = "d3"; } 
      else if (pctD >= .60) { var colorD = "d2"; } 
      else if (pctD >= 0) { var colorD = "d1"; } 

    if (pctR == 0 && pctD == 0 || (d3.format("%")(pctR) == "NaN" || d3.format("%")(pctD) == "NaN")){ return "<div class='districtName'>" + stateString + "</div><div class='candidate'>" + lastR + "</div><div'>0%</div><div class='smallbreak'></div><div class='candidate'>" + lastD + "</div><div'>0%</div><div class='smallbreak'></div><div>No results</div>";
    } else if (pctR > pctD) { return "<div class='districtName'>" + stateString + "</div><div class='candidate'>" + lastR + "</div><div class='pct " + colorR + "'>" + d3.format("%")(pctR) + "</div><div class='smallbreak'></div><div class='candidate'>" + lastD + "</div><div class='pct " + colorD + "'>" + d3.format("%")(pctD) + "</div>"; }
    else { return "<div class='districtName'>" + stateString + "</div><div class='candidate'>" + lastD + "</div><div class='pct " + colorD + "'>" + d3.format("%")(pctD) + "</div><div class='smallbreak'></div><div class='candidate'>" + lastR + "</div><div class='pct " + colorR + "'>" + d3.format("%")(pctR) + "</div>"; }
  } //end tooltip

  if (type == "colors"){
    if (pctR > pctD) { 
      if (pctR >= .80) { return "#d84c27"; } 
      else if (pctR >= .70) { return "#df6a4c"; } 
      else if (pctR >= .60) { return "#e58970"; } 
      else if (pctR >= 0) { return "#eca795"; } 
    }
    else if (pctD > pctR) { 
      if (pctD >= .80) { return "#2b7ab5"; } 
      else if (pctD >= .70) { return "#4f90c1"; } 
      else if (pctD >= .60) { return "#73a7ce"; } 
      else if (pctD >= 0) { return "#97bedb"; } 
    }
    else  { return 'mid'; }
  } //end colors


  if (type == "lean"){
    if (winnerD == "X") { return "#3585BC"; }
    else if (winnerR == "X") { return "#d34A44"; }
    else if (pctD > pctR) { return "#72A9D6"; }
    else if (pctR > pctD) { return "#f7816E"; }
    else  { return 'mid'; }
  } //end lean


  if (type == "winner"){
    if (winnerD == "X") { return "DEM Win"; }
    else if (winnerR == "X") { return "GOP Win"; }
    else if (pctD > pctR) { return "DEM Lean"; }
    else if (pctR > pctD) { return "GOP Lean"; }
  }

  if (type == "votesR"){
    return voteCountR;
  }

  if (type == "votesD"){
    return voteCountD;
  }

  if (type == "votesT"){
    return voteCountT;
  }

  if (type == "table"){
      if (pctR >= .80) { var colorR = "r4"; } 
      else if (pctR >= .70) { var colorR = "r3"; } 
      else if (pctR >= .60) { var colorR = "r2"; } 
      else if (pctR >= 0) { var colorR = "r1"; } 
      if (pctD >= .80) { var colorD = "d4"; } 
      else if (pctD >= .70) { var colorD = "d3"; } 
      else if (pctD >= .60) { var colorD = "d2"; } 
      else if (pctD >= 0) { var colorD = "d1"; }

    if (pctR == 0 && pctD == 0 || (d3.format("%")(pctR) == "NaN" && d3.format("%")(pctD) == "NaN")) { return "<div class='districtName'>" + stateString + " " + evString + "</div><div class='resultsRow'><div>Candidate</div><div class='counts'>#</div><div class='pct'>%</div></div><div class='resultsRow'><div class='candidate'>" + firstR + " " + lastR + "</div><div class='counts'>0</div><div'>0%</div></div><div class='resultsRow'><div class='candidate'>" + firstD + " " + lastD + "</div><div class='counts'>0</div><div'>0%</div></div><div class='resultsRow'><div class='candidate'>Other</div><div class='counts'>0</div><div class='pct independent'>0%</div></div><div class='reportingRow'><span class='pctReported'>" + precinctsReporting + "</span> / <span class='pctAll'>" + precinctsTotal + "</span> (" + precinctsReportingPct + "%) precincts reporting</div>"; }
    else if (pctR > pctD) { return "<div class='districtName'>" + stateString + " " + evString + "</div><div class='resultsRow'><div>Candidate</div><div class='counts'>#</div><div class='pct'>%</div></div><div class='resultsRow'><div class='candidate'>" + firstR + " " + lastR + "</div><div class='counts'>" + d3.format(",")(voteCountR) + "</div><div class='pct " + colorR + "'>" + d3.format("%")(pctR) + "</div></div><div class='resultsRow'><div class='candidate'>" + firstD + " " + lastD + "</div><div class='counts'>" + d3.format(",")(voteCountD) + "</div><div class='pct " + colorD + "'>" + d3.format("%")(pctD) + "</div></div><div class='resultsRow'><div class='candidate'>Other</div><div class='counts'>" + d3.format(",")(voteCountO) + "</div><div class='pct independent'>" + d3.format("%")(pctO) + "</div></div><div class='reportingRow'><span class='pctReported'>" + precinctsReporting + "</span> / <span class='pctAll'>" + precinctsTotal + "</span> (" + precinctsReportingPct + "%) precincts reporting</div>"; }
    else { return "<div class='districtName'>" + stateString +  " " + evString + "</div><div class='resultsRow'><div>Candidate</div><div class='counts'>#</div><div class='pct'>%</div></div><div class='resultsRow'><div class='candidate'>" + firstD + " " + lastD + "</div><div class='counts'>" + d3.format(",")(voteCountD) + "</div><div class='pct " + colorD + "'>" + d3.format("%")(pctD) + "</div></div><div class='resultsRow'><div class='candidate'>" + firstR + " " + lastR + "</div><div class='counts'>" + d3.format(",")(voteCountR) + "</div><div class='pct " + colorR + "'>" + d3.format("%")(pctR) + "</div></div><div class='resultsRow'><div class='candidate'>Other</div><div class='counts'>" + d3.format(",")(voteCountO) + "</div><div class='pct independent'>" + d3.format("%")(pctO) + "</div></div><div class='reportingRow'><span class='pctReported'>" + precinctsReporting + "</span> / <span class='pctAll'>" + precinctsTotal + "</span> (" + precinctsReportingPct + "%) precincts reporting</div>"; }
  } //end table

  if (type == "pct"){
    return precinctsReportingPct;
  }

  if (type == "timestamp"){
    return lastUpdated;
  }

}//end fetchData


//table functions
function makeTable(race){


}

function siftTable(race){


}

function resetTable(race){


}
//end table functions

//cartogram functions
var cartogram = [];

function cartoBuild(container, boxContainer, chartContainer, shape, race, dataCompare, geo, index, data){

  if (race == "mnhouse" || race == "mnsenate") { 
    var top = 40;
    var right = 250;
    var bottom = 0;
    var left = 100;
  } else {
    var top = 40;
    var right = 10;
    var bottom = 0;
    var left = 280;   
  }
cartogram[index] = {

    margin: {
        top: top,
        right: right,
        bottom: bottom,
        left: left
    },

    selector: container + ' svg',

    init: function() {
        var self = this;

        self.$el = $(self.selector);

        self.width = 800 - self.margin.left - self.margin.right; self.height = 600 - self.margin.top - self.margin.bottom;

       if (geo == "us") { self.width = 800 - self.margin.left - self.margin.right; self.height = 600 - self.margin.top - self.margin.bottom; }
       if (geo == "mn") { self.width = 600 - self.margin.left - self.margin.right; self.height = 400 - self.margin.top - self.margin.bottom; }
       if (geo == "metro") { self.width = 600 - self.margin.left - self.margin.right; self.height = 400 - self.margin.top - self.margin.bottom; }

        self.svg = d3.select(self.selector)
            .attr('height', self.height + self.margin.top + self.margin.bottom)
            .attr('width', self.width + self.margin.left + self.margin.right)

        self.state_size = self.width / 12;
        self.state_padding = 2;

        self.map = self.svg.append('g')
            .attr('transform', 'translate(' + self.margin.left + ','
                  + self.margin.top + ')')

        self.drawMap();
    },

    drawMap: function() {
        var self = this;

        var states = self.map.selectAll('.states')
            .data(self.state_pos_co2)
            .enter().append('g')
            .attr('class', 'state-groups');

        var state = states.append('rect')
            .attr('id', function(d) {
                var str = d.state_full + "_" + geo; return str.replace(new RegExp(" ", "g"),"-");
            })
            .style('fill', function(d) {
               if (race == "mnsenate" || race == "mnhouse") { return 'state ' + fetchData(d.state_full,"Minnesota","colors",dataCompare,race); }
                else { return 'state ' + fetchData(d.state_full,d.state_full,"colors",dataCompare,race); }
            })
            .attr('rx', 0)
            .attr('ry', 0)
            .attr('x', function(d) {
                return d.column * (self.state_size + self.state_padding); //d.column * (self.state_size + self.state_padding);
            })
            .attr('y', function(d) {
                return d.row * (self.state_size + self.state_padding);
            })
            .attr('width', function (d) { return d.state_total_old / self.state_size * 100; }) //d.state_total_old * 2 + "px"; })
            .attr('height', function (d) { return d.state_total_old / self.state_size * 100; }) //d.state_total_old  * 2 + "px"; })
            .on('click', function(d) {
              d3.selectAll("rect").classed('faded', true); 
              d3.selectAll("rect").classed('active', false); 
              d3.select(this).classed('faded', false); 
              d3.select(this).classed('active', true); 

              if (race == "president" || race == "senate" ||  race == "governors"){ $("#infobox").html(fetchData(d.state_full,d.state_full,"table",dataCompare,race)); }
              else if (race == "mnsenate" || race == "mnhouse") { $("#infobox").html(fetchData(d.state_full,"Minnesota","table",dataCompare,race,null,d.state_full)); }

        })
            .call(d3.helper.tooltip(function(d, i){
             if (race == "mnsenate" || race == "mnhouse") { return fetchData(d.state_full,"Minnesota","tooltip",dataCompare,race,null,d.state_full); }
             else { return fetchData(d.state_full,d.state_full,"tooltip",dataCompare,race); }
           }));

        var text = states.append('text')
            .attr('class', 'state-label')
            .attr('class', function(d) {
                // return mapColor(d, race, dataCompare);
            })
            .attr('dominant-baseline', 'central')
            .attr('x', function(d) {
                return (d.column * (self.state_size + self.state_padding))
                        + self.state_size / 2; })
            .attr('y', function(d) {
                return (d.row * (self.state_size + self.state_padding))
                    + self.state_size / 2; })
            .style('text-anchor', 'middle')
            .on('click', function(d) {
              d3.selectAll("rect").classed('faded', true); 
              d3.selectAll("rect").classed('active', false); 
              d3.select(this.parentNode).select("rect").classed('faded', false); 
              d3.select(this.parentNode).select("rect").classed('active', true);

              if (race == "president" || race == "senate" ||  race == "governors"){ $("#infobox").html(fetchData(d.state_full,d.state_full,"table",dataCompare,race)); }
              else if (race == "mnsenate" || race == "mnhouse") { $("#infobox").html(fetchData(d.state_full,"Minnesota","table",dataCompare,race,null,d.state_full)); }
      })
            .text(function(d) {
                return d.state_postal;
            })
            .call(d3.helper.tooltip(function(d, i){
             if (race == "mnsenate" || race == "mnhouse") { return fetchData(d.state_full,"Minnesota","tooltip",dataCompare,race,null,d.state_full); }
             else { return fetchData(d.state_full,d.state_full,"tooltip",dataCompare,race); }
           }));
    },

    state_pos_co2: data

};

$(document).ready(function() {
cartogram[index].init();
});

} //end cartoBuild

function cartoData(race,geo){
var usCarto = [{'state_full':'Alabama','state_postal':'AL','row':5,'column':6,'state_total_old':9,'state_total_new':'25','state_change':'-63%','color':'dq1'},
        {'state_full':'Alaska','state_postal':'AK','row':6,'column':0,'state_total_old':3,'state_total_new':'0','state_change':'Insufficient data','color':'none'},
        {'state_full':'Arizona','state_postal':'AZ','row':4,'column':1,'state_total_old':11,'state_total_new':'36','state_change':'+36%','color':'dq7'},
        {'state_full':'Arkansas','state_postal':'AR','row':4,'column':4,'state_total_old':6,'state_total_new':'43','state_change':'-33%','color':'dq3'},
        {'state_full':'California','state_postal':'CA','row':3,'column':0,'state_total_old':55,'state_total_new':'267','state_change':'-25%','color':'dq3'},
        {'state_full':'Colorado','state_postal':'CO','row':3,'column':2,'state_total_old':9,'state_total_new':'93','state_change':'-33%','color':'dq3'},
        {'state_full':'Connecticut','state_postal':'CT','row':2,'column':9,'state_total_old':7,'state_total_new':'6','state_change':'Insufficient data','color':'none'},
        {'state_full':'District of Columbia','state_postal':'DC','row':4,'column':8,'state_total_old':3,'state_total_new':'0','state_change':'Insufficient data','color':'none'},
        {'state_full':'Delaware','state_postal':'DE','row':3,'column':9,'state_total_old':3,'state_total_new':'3','state_change':'-100%','color':'dq1'},
        {'state_full':'Florida','state_postal':'FL','row':6,'column':8,'state_total_old':29,'state_total_new':'136','state_change':'-14%','color':'dq4'},
        {'state_full':'Georgia','state_postal':'GA','row':5,'column':7,'state_total_old':16,'state_total_new':'59','state_change':'-38%','color':'dq3'},
        {'state_full':'Hawaii','state_postal':'HI','row':6,'column':-1,'state_total_old':4,'state_total_new':'11','state_change':'Insufficient data','color':'none'},
        {'state_full':'Idaho','state_postal':'ID','row':1,'column':1,'state_total_old':4,'state_total_new':'68','state_change':'-21%','color':'dq3'},
        {'state_full':'Illinois','state_postal':'IL','row':1,'column':6,'state_total_old':20,'state_total_new':'221','state_change':'-14%','color':'dq4'},
        {'state_full':'Indiana','state_postal':'IN','row':2,'column':5,'state_total_old':11,'state_total_new':'220','state_change':'0%','color':'mid'},
        {'state_full':'Iowa','state_postal':'IA','row':2,'column':4,'state_total_old':6,'state_total_new':'295','state_change':'+29%','color':'dq6'},
        {'state_full':'Kansas','state_postal':'KS','row':4,'column':3,'state_total_old':6,'state_total_new':'205','state_change':'-6%','color':'dq4'},
        {'state_full':'Kentucky','state_postal':'KY','row':3,'column':5,'state_total_old':8,'state_total_new':'162','state_change':'-49%','color':'dq2'},
        {'state_full':'Louisiana','state_postal':'LA','row':5,'column':4,'state_total_old':8,'state_total_new':'26','state_change':'-53%','color':'dq1'},
        {'state_full':'Maine','state_postal':'ME','row':-1,'column':10,'state_total_old':4,'state_total_new':'14','state_change':'Insufficient data','color':'none'},
        {'state_full':'Maryland','state_postal':'MD','row':3,'column':8,'state_total_old':10,'state_total_new':'27','state_change':'-46%','color':'dq2'},
        {'state_full':'Massachusetts','state_postal':'MA','row':1,'column':9,'state_total_old':11,'state_total_new':'11','state_change':'Insufficient data','color':'none'},
        {'state_full':'Michigan','state_postal':'MI','row':1,'column':7,'state_total_old':16,'state_total_new':'179','state_change':'+74%','color':'dq8'},
        {'state_full':'Minnesota','state_postal':'MN','row':1,'column':4,'state_total_old':10,'state_total_new':'210','state_change':'+37%','color':'dq7'},
        {'state_full':'Mississippi','state_postal':'MS','row':5,'column':5,'state_total_old':6,'state_total_new':'46','state_change':'-57%','color':'dq1'},
        {'state_full':'Missouri','state_postal':'MO','row':3,'column':4,'state_total_old':10,'state_total_new':'288','state_change':'+5%','color':'dq5'},
        {'state_full':'Montana','state_postal':'MT','row':1,'column':2,'state_total_old':3,'state_total_new':'139','state_change':'-10%','color':'dq4'},
        {'state_full':'Nebraska','state_postal':'NE','row':3,'column':3,'state_total_old':5,'state_total_new':'179','state_change':'-11%','color':'dq4'},
        {'state_full':'Nevada','state_postal':'NV','row':2,'column':1,'state_total_old':6,'state_total_new':'11','state_change':'Insufficient data','color':'none'},
        {'state_full':'New Hampshire','state_postal':'NH','row':0,'column':10,'state_total_old':4,'state_total_new':'4','state_change':'Insufficient data','color':'none'},
        {'state_full':'New Jersey','state_postal':'NJ','row':2,'column':8,'state_total_old':14,'state_total_new':'19','state_change':'+50%','color':'dq8'},
        {'state_full':'New Mexico','state_postal':'NM','row':4,'column':2,'state_total_old':5,'state_total_new':'14','state_change':'-100%','color':'dq1'},
        {'state_full':'New York','state_postal':'NY','row':1,'column':8,'state_total_old':29,'state_total_new':'135','state_change':'-38%','color':'dq3'},
        {'state_full':'North Carolina','state_postal':'NC','row':4,'column':6,'state_total_old':15,'state_total_new':'111','state_change':'-35%','color':'dq3'},
        {'state_full':'North Dakota','state_postal':'ND','row':1,'column':3,'state_total_old':3,'state_total_new':'117','state_change':'+36%','color':'dq7'},
        {'state_full':'Ohio','state_postal':'OH','row':2,'column':6,'state_total_old':18,'state_total_new':'217','state_change':'-18%','color':'dq4'},
        {'state_full':'Oklahoma','state_postal':'OK','row':5,'column':3,'state_total_old':7,'state_total_new':'53','state_change':'-30%','color':'dq3'},
        {'state_full':'Oregon','state_postal':'OR','row':2,'column':0,'state_total_old':7,'state_total_new':'61','state_change':'+20%','color':'dq6'},
        {'state_full':'Pennsylvania','state_postal':'PA','row':2,'column':7,'state_total_old':20,'state_total_new':'182','state_change':'-34%','color':'dq3'},
        {'state_full':'Rhode Island','state_postal':'RI','row':2,'column':10,'state_total_old':4,'state_total_new':'0','state_change':'Insufficient data','color':'none'},
        {'state_full':'South Carolina','state_postal':'SC','row':4,'column':7,'state_total_old':9,'state_total_new':'30','state_change':'+38%','color':'dq7'},
        {'state_full':'South Dakota','state_postal':'SD','row':2,'column':3,'state_total_old':3,'state_total_new':'108','state_change':'+17%','color':'dq6'},
        {'state_full':'Tennessee','state_postal':'TN','row':4,'column':5,'state_total_old':11,'state_total_new':'147','state_change':'-42%','color':'dq2'},
        {'state_full':'Texas','state_postal':'TX','row':6,'column':3,'state_total_old':38,'state_total_new':'159','state_change':'+29%','color':'dq3'},
        {'state_full':'Utah','state_postal':'UT','row':3,'column':1,'state_total_old':6,'state_total_new':'24','state_change':'-67%','color':'dq1'},
        {'state_full':'Vermont','state_postal':'VT','row':0,'column':9,'state_total_old':3,'state_total_new':'15','state_change':'-57%','color':'dq1'},
        {'state_full':'Virginia','state_postal':'VA','row':3,'column':7,'state_total_old':13,'state_total_new':'123','state_change':'-10%','color':'dq4'},
        {'state_full':'Washington','state_postal':'WA','row':1,'column':0,'state_total_old':12,'state_total_new':'63','state_change':'-39%','color':'dq3'},
        {'state_full':'West Virginia','state_postal':'WV','row':3,'column':6,'state_total_old':5,'state_total_new':'22','state_change':'0%','color':'mid'},
        {'state_full':'Wisconsin','state_postal':'WI','row':1,'column':5,'state_total_old':10,'state_total_new':'242','state_change':'-15%','color':'dq4'},
        {'state_full':'Wyoming','state_postal':'WY','row':2,'column':2,'state_total_old':3,'state_total_new':'37','state_change':'-21%','color':'dq3'}]

var usCDCarto = [{'state_full':'Alabama','state_postal':'AL','row':5,'column':6,'state_total_old':'32','state_total_new':'25','state_change':'-63%','color':'dq1'},
        {'state_full':'Alaska','state_postal':'AK','row':6,'column':0,'state_total_old':'0','state_total_new':'0','state_change':'Insufficient data','color':'none'},
        {'state_full':'Arizona','state_postal':'AZ','row':4,'column':1,'state_total_old':'14','state_total_new':'36','state_change':'+36%','color':'dq7'},
        {'state_full':'Arkansas','state_postal':'AR','row':4,'column':4,'state_total_old':'36','state_total_new':'43','state_change':'-33%','color':'dq3'},
        {'state_full':'California','state_postal':'CA','row':3,'column':0,'state_total_old':'358','state_total_new':'267','state_change':'-25%','color':'dq3'},
        {'state_full':'Colorado','state_postal':'CO','row':3,'column':2,'state_total_old':'124','state_total_new':'93','state_change':'-33%','color':'dq3'},
        {'state_full':'Connecticut','state_postal':'CT','row':2,'column':9,'state_total_old':'0','state_total_new':'6','state_change':'Insufficient data','color':'none'},
        {'state_full':'District of Columbia','state_postal':'DC','row':4,'column':8,'state_total_old':'0','state_total_new':'0','state_change':'Insufficient data','color':'none'},
        {'state_full':'Delaware','state_postal':'DE','row':3,'column':9,'state_total_old':'3','state_total_new':'3','state_change':'-100%','color':'dq1'},
        {'state_full':'Florida','state_postal':'FL','row':6,'column':8,'state_total_old':'150','state_total_new':'136','state_change':'-14%','color':'dq4'},
        {'state_full':'Georgia','state_postal':'GA','row':5,'column':7,'state_total_old':'77','state_total_new':'59','state_change':'-38%','color':'dq3'},
        {'state_full':'Hawaii','state_postal':'HI','row':6,'column':-1,'state_total_old':'0','state_total_new':'11','state_change':'Insufficient data','color':'none'},
        {'state_full':'Idaho','state_postal':'ID','row':1,'column':1,'state_total_old':'71','state_total_new':'68','state_change':'-21%','color':'dq3'},
        {'state_full':'Illinois','state_postal':'IL','row':1,'column':6,'state_total_old':'251','state_total_new':'221','state_change':'-14%','color':'dq4'},
        {'state_full':'Indiana','state_postal':'IN','row':2,'column':5,'state_total_old':'216','state_total_new':'220','state_change':'0%','color':'mid'},
        {'state_full':'Iowa','state_postal':'IA','row':2,'column':4,'state_total_old':'228','state_total_new':'295','state_change':'+29%','color':'dq6'},
        {'state_full':'Kansas','state_postal':'KS','row':4,'column':3,'state_total_old':'215','state_total_new':'205','state_change':'-6%','color':'dq4'},
        {'state_full':'Kentucky','state_postal':'KY','row':3,'column':5,'state_total_old':'308','state_total_new':'162','state_change':'-49%','color':'dq2'},
        {'state_full':'Louisiana','state_postal':'LA','row':5,'column':4,'state_total_old':'30','state_total_new':'26','state_change':'-53%','color':'dq1'},
        {'state_full':'Maine','state_postal':'ME','row':-1,'column':10,'state_total_old':'0','state_total_new':'14','state_change':'Insufficient data','color':'none'},
        {'state_full':'Maryland','state_postal':'MD','row':3,'column':8,'state_total_old':'26','state_total_new':'27','state_change':'-46%','color':'dq2'},
        {'state_full':'Massachusetts','state_postal':'MA','row':1,'column':9,'state_total_old':'0','state_total_new':'11','state_change':'Insufficient data','color':'none'},
        {'state_full':'Michigan','state_postal':'MI','row':1,'column':7,'state_total_old':'102','state_total_new':'179','state_change':'+74%','color':'dq8'},
        {'state_full':'Minnesota','state_postal':'MN','row':1,'column':4,'state_total_old':'153','state_total_new':'210','state_change':'+37%','color':'dq7'},
        {'state_full':'Mississippi','state_postal':'MS','row':5,'column':5,'state_total_old':'65','state_total_new':'46','state_change':'-57%','color':'dq1'},
        {'state_full':'Missouri','state_postal':'MO','row':3,'column':4,'state_total_old':'264','state_total_new':'288','state_change':'+5%','color':'dq5'},
        {'state_full':'Montana','state_postal':'MT','row':1,'column':2,'state_total_old':'145','state_total_new':'139','state_change':'-10%','color':'dq4'},
        {'state_full':'Nebraska','state_postal':'NE','row':3,'column':3,'state_total_old':'199','state_total_new':'179','state_change':'-11%','color':'dq4'},
        {'state_full':'Nevada','state_postal':'NV','row':2,'column':1,'state_total_old':'0','state_total_new':'11','state_change':'Insufficient data','color':'none'},
        {'state_full':'New Hampshire','state_postal':'NH','row':0,'column':10,'state_total_old':'0','state_total_new':'4','state_change':'Insufficient data','color':'none'},
        {'state_full':'New Jersey','state_postal':'NJ','row':2,'column':8,'state_total_old':'8','state_total_new':'19','state_change':'+50%','color':'dq8'},
        {'state_full':'New Mexico','state_postal':'NM','row':4,'column':2,'state_total_old':'24','state_total_new':'14','state_change':'-100%','color':'dq1'},
        {'state_full':'New York','state_postal':'NY','row':1,'column':8,'state_total_old':'203','state_total_new':'135','state_change':'-38%','color':'dq3'},
        {'state_full':'North Carolina','state_postal':'NC','row':4,'column':6,'state_total_old':'156','state_total_new':'111','state_change':'-35%','color':'dq3'},
        {'state_full':'North Dakota','state_postal':'ND','row':1,'column':3,'state_total_old':'84','state_total_new':'117','state_change':'+36%','color':'dq7'},
        {'state_full':'Ohio','state_postal':'OH','row':2,'column':6,'state_total_old':'258','state_total_new':'217','state_change':'-18%','color':'dq4'},
        {'state_full':'Oklahoma','state_postal':'OK','row':5,'column':3,'state_total_old':'46','state_total_new':'53','state_change':'-30%','color':'dq3'},
        {'state_full':'Oregon','state_postal':'OR','row':2,'column':0,'state_total_old':'40','state_total_new':'61','state_change':'+20%','color':'dq6'},
        {'state_full':'Pennsylvania','state_postal':'PA','row':2,'column':7,'state_total_old':'276','state_total_new':'182','state_change':'-34%','color':'dq3'},
        {'state_full':'Rhode Island','state_postal':'RI','row':2,'column':10,'state_total_old':'0','state_total_new':'0','state_change':'Insufficient data','color':'none'},
        {'state_full':'South Carolina','state_postal':'SC','row':4,'column':7,'state_total_old':'16','state_total_new':'30','state_change':'+38%','color':'dq7'},
        {'state_full':'South Dakota','state_postal':'SD','row':2,'column':3,'state_total_old':'88','state_total_new':'108','state_change':'+17%','color':'dq6'},
        {'state_full':'Tennessee','state_postal':'TN','row':4,'column':5,'state_total_old':'244','state_total_new':'147','state_change':'-42%','color':'dq2'},
        {'state_full':'Texas','state_postal':'TX','row':6,'column':3,'state_total_old':'223','state_total_new':'159','state_change':'+29%','color':'dq3'},
        {'state_full':'Utah','state_postal':'UT','row':3,'column':1,'state_total_old':'24','state_total_new':'24','state_change':'-67%','color':'dq1'},
        {'state_full':'Vermont','state_postal':'VT','row':0,'column':9,'state_total_old':'7','state_total_new':'15','state_change':'-57%','color':'dq1'},
        {'state_full':'Virginia','state_postal':'VA','row':3,'column':7,'state_total_old':'130','state_total_new':'123','state_change':'-10%','color':'dq4'},
        {'state_full':'Washington','state_postal':'WA','row':1,'column':0,'state_total_old':'88','state_total_new':'63','state_change':'-39%','color':'dq3'},
        {'state_full':'West Virginia','state_postal':'WV','row':3,'column':6,'state_total_old':'9','state_total_new':'22','state_change':'0%','color':'mid'},
        {'state_full':'Wisconsin','state_postal':'WI','row':1,'column':5,'state_total_old':'279','state_total_new':'242','state_change':'-15%','color':'dq4'},
        {'state_full':'Wyoming','state_postal':'WY','row':2,'column':2,'state_total_old':'33','state_total_new':'37','state_change':'-21%','color':'dq3'}]


var mnCountyCarto = [{'state_full':'Kittson','state_postal':'KITT','row':0,'column':0,'color_value':34},
        {'state_full':'Lake of the Woods','state_postal':'LW','row':-1,'column':1,'color_value':38},
        {'state_full':'Roseau','state_postal':'ROS','row':0,'column':1,'color_value':67},
        {'state_full':'Koochiching','state_postal':'KOO','row':0,'column':2,'color_value':35},
        {'state_full':'Saint Louis','state_postal':'STL','row':0,'column':3,'color_value':71},
        {'state_full':'Lake','state_postal':'LAKE','row':0,'column':4,'color_value':37},
        {'state_full':'Cook','state_postal':'COOK','row':0,'column':5,'color_value':15},
        {'state_full':'Marshall','state_postal':'MAR','row':1,'column':0,'color_value':43},
        {'state_full':'Beltrami','state_postal':'BEL','row':1,'column':1,'color_value':3},
        {'state_full':'Itasca','state_postal':'ITAS','row':1,'column':2,'color_value':30},
        {'state_full':'Aitkin','state_postal':'AITK','row':1,'column':3,'color_value':0},
        {'state_full':'Carlton','state_postal':'CARL','row':1,'column':4,'color_value':8},
        {'state_full':'Polk','state_postal':'POLK','row':2,'column':0,'color_value':59},
        {'state_full':'Pennington','state_postal':'PENN','row':2,'column':1,'color_value':56},
        {'state_full':'Red Lake','state_postal':'RL','row':2,'column':2,'color_value':62},
        {'state_full':'Clearwater','state_postal':'CW','row':2,'column':3,'color_value':14},
        {'state_full':'Hubbard','state_postal':'HUB','row':2,'column':4,'color_value':28},
        {'state_full':'Norman','state_postal':'NORM','row':3,'column':0,'color_value':53},
        {'state_full':'Mahnomen','state_postal':'MAHN','row':3,'column':1,'color_value':42},
        {'state_full':'Cass','state_postal':'CASS','row':3,'column':2,'color_value':10},
        {'state_full':'Crow Wing','state_postal':'CROW','row':3,'column':3,'color_value':17},
        {'state_full':'Pine','state_postal':'PINE','row':3,'column':4,'color_value':57},
        {'state_full':'Clay','state_postal':'CLAY','row':4,'column':0,'color_value':13},
        {'state_full':'Becker','state_postal':'BECK','row':4,'column':1,'color_value':2},
        {'state_full':'Wadena','state_postal':'WAD','row':4,'column':2,'color_value':79},
        {'state_full':'Mille Lacs','state_postal':'ML','row':4,'column':3,'color_value':47},
        {'state_full':'Kanabec','state_postal':'KANA','row':4,'column':4,'color_value':32},
        {'state_full':'Wilkin','state_postal':'WILK','row':5,'column':0,'color_value':83},
        {'state_full':'Ottertail','state_postal':'OT','row':5,'column':1,'color_value':44},
        {'state_full':'Todd','state_postal':'TODD','row':5,'column':2,'color_value':76},
        {'state_full':'Morrison','state_postal':'MORR','row':5,'column':3,'color_value':48},
        {'state_full':'Benton','state_postal':'BEN','row':5,'column':4,'color_value':4},
        {'state_full':'Traverse','state_postal':'TRAV','row':6,'column':0,'color_value':77},
        {'state_full':'Grant','state_postal':'GRANT','row':6,'column':1,'color_value':25},
        {'state_full':'Douglas','state_postal':'DOUG','row':6,'column':2,'color_value':20},
        {'state_full':'Stearns','state_postal':'STRNS','row':6,'column':3,'color_value':72},
        {'state_full':'Isanti','state_postal':'ISA','row':6,'column':4,'color_value':29},
        {'state_full':'Big Stone','state_postal':'BIG','row':7,'column':0,'color_value':5},
        {'state_full':'Stevens','state_postal':'STEVE','row':7,'column':1,'color_value':74},
        {'state_full':'Pope','state_postal':'POP','row':7,'column':2,'color_value':60},
        {'state_full':'Sherburne','state_postal':'SB','row':7,'column':3,'color_value':69},
        {'state_full':'Anoka','state_postal':'AK','row':7,'column':4,'color_value':1},
        {'state_full':'Chisago','state_postal':'CHIS','row':7,'column':5,'color_value':12},
        {'state_full':'Swift','state_postal':'SWIFT','row':8,'column':0,'color_value':75},
        {'state_full':'Kandiyohi','state_postal':'KAN','row':8,'column':1,'color_value':33},
        {'state_full':'Meeker','state_postal':'MEEK','row':8,'column':2,'color_value':46},
        {'state_full':'Wright','state_postal':'WR','row':8,'column':3,'color_value':85},
        {'state_full':'Hennepin','state_postal':'HENN','row':8,'column':4,'color_value':26},
        {'state_full':'Ramsey','state_postal':'RAM','row':8,'column':5,'color_value':61},
        {'state_full':'Washington','state_postal':'WA','row':8,'column':6,'color_value':81},
        {'state_full':'Yellow Medicine','state_postal':'YM','row':9,'column':0,'color_value':86},
        {'state_full':'Renville','state_postal':'REN','row':9,'column':1,'color_value':64},
        {'state_full':'McLeod','state_postal':'MCL','row':9,'column':2,'color_value':45},
        {'state_full':'Sibley','state_postal':'SIB','row':9,'column':3,'color_value':70},
        {'state_full':'Carver','state_postal':'CV','row':9,'column':4,'color_value':9},
        {'state_full':'Scott','state_postal':'SCT','row':9,'column':5,'color_value':68},
        {'state_full':'Dakota','state_postal':'DAK','row':9,'column':6,'color_value':18},
        {'state_full':'Goodhue','state_postal':'GOOD','row':9,'column':7,'color_value':24},
        {'state_full':'Lincoln','state_postal':'LIN','row':10,'column':0,'color_value':40},
        {'state_full':'Lyon','state_postal':'LYON','row':10,'column':1,'color_value':41},
        {'state_full':'Redwood','state_postal':'RW','row':10,'column':2,'color_value':63},
        {'state_full':'Brown','state_postal':'BR','row':10,'column':3,'color_value':7},
        {'state_full':'Nicollet','state_postal':'NIC','row':10,'column':4,'color_value':51},
        {'state_full':'Blue Earth','state_postal':'BLUE','row':10,'column':5,'color_value':6},
        {'state_full':'Le Sueur','state_postal':'LS','row':10,'column':6,'color_value':39},
        {'state_full':'Rice','state_postal':'RICE','row':10,'column':7,'color_value':65},
        {'state_full':'Wabasha','state_postal':'WAB','row':10,'column':8,'color_value':78},
        {'state_full':'Pipestone','state_postal':'PS','row':11,'column':0,'color_value':58},
        {'state_full':'Murray','state_postal':'MURR','row':11,'column':1,'color_value':50},
        {'state_full':'Cottonwood','state_postal':'CW','row':11,'column':2,'color_value':16},
        {'state_full':'Watonwan','state_postal':'WTW','row':11,'column':3,'color_value':82},
        {'state_full':'Waseca','state_postal':'WAS','row':11,'column':4,'color_value':80},
        {'state_full':'Steele','state_postal':'ST','row':11,'column':5,'color_value':73},
        {'state_full':'Dodge','state_postal':'DG','row':11,'column':6,'color_value':19},
        {'state_full':'Olmsted','state_postal':'OLM','row':11,'column':7,'color_value':54},
        {'state_full':'Winona','state_postal':'WIN','row':11,'column':8,'color_value':84},
        {'state_full':'Rock','state_postal':'ROCK','row':12,'column':0,'color_value':66},
        {'state_full':'Nobles','state_postal':'NOB','row':12,'column':1,'color_value':52},
        {'state_full':'Jackson','state_postal':'JACK','row':12,'column':2,'color_value':31},
        {'state_full':'Martin','state_postal':'MART','row':12,'column':3,'color_value':44},
        {'state_full':'Faribault','state_postal':'FB','row':12,'column':4,'color_value':21},
        {'state_full':'Freeborn','state_postal':'FREE','row':12,'column':5,'color_value':23},
        {'state_full':'Mower','state_postal':'MOW','row':12,'column':6,'color_value':49},
        {'state_full':'Fillmore','state_postal':'FILL','row':12,'column':7,'color_value':22},
        {'state_full':'Houston','state_postal':'HOU','row':12,'column':8,'color_value':27}
        ]

var mnlegMetroCarto = [{'state_full':'District 30A','state_postal':'30A','row':0,'column':2,'color_value':53},
        {'state_full':'District 30B','state_postal':'30B','row':0,'column':3,'color_value':54},
        {'state_full':'District 35A','state_postal':'35A','row':0,'column':4,'color_value':61},
        {'state_full':'District 35B','state_postal':'35B','row':0,'column':5,'color_value':62},
        {'state_full':'District 31B','state_postal':'31B','row':0,'column':6,'color_value':55},
        {'state_full':'District 32B','state_postal':'32B','row':0,'column':7,'color_value':57},
        {'state_full':'District 34A','state_postal':'34A','row':1,'column':1,'color_value':0},
        {'state_full':'District 36A','state_postal':'36A','row':1,'column':2,'color_value':63},
        {'state_full':'District 36B','state_postal':'36B','row':1,'column':3,'color_value':64},
        {'state_full':'District 37A','state_postal':'37A','row':1,'column':4,'color_value':65},
        {'state_full':'District 37B','state_postal':'37B','row':1,'column':5,'color_value':66},
        {'state_full':'District 38A','state_postal':'38A','row':1,'column':6,'color_value':67},
        {'state_full':'District 38B','state_postal':'38B','row':1,'column':7,'color_value':68},
        {'state_full':'District 39A','state_postal':'39A','row':1,'column':8,'color_value':69},
        {'state_full':'District 34B','state_postal':'34B','row':2,'column':1,'color_value':60},
        {'state_full':'District 40A','state_postal':'40A','row':2,'column':2,'color_value':71},
        {'state_full':'District 40B','state_postal':'40B','row':2,'column':3,'color_value':72},
        {'state_full':'District 41A','state_postal':'41A','row':2,'column':4,'color_value':73},
        {'state_full':'District 41B','state_postal':'41B','row':2,'column':5,'color_value':74},
        {'state_full':'District 42A','state_postal':'42A','row':2,'column':6,'color_value':75},
        {'state_full':'District 42B','state_postal':'42B','row':2,'column':7,'color_value':76},
        {'state_full':'District 43A','state_postal':'43A','row':2,'column':8,'color_value':77},
        {'state_full':'District 44A','state_postal':'44A','row':3,'column':0,'color_value':79},
        {'state_full':'District 45A','state_postal':'45A','row':3,'column':1,'color_value':81},
        {'state_full':'District 45B','state_postal':'45B','row':3,'column':2,'color_value':82},
        {'state_full':'District 59A','state_postal':'59A','row':3,'column':3,'color_value':108},
        {'state_full':'District 60A','state_postal':'60A','row':3,'column':4,'color_value':110},
        {'state_full':'District 66A','state_postal':'66A','row':3,'column':5,'color_value':122},
        {'state_full':'District 66B','state_postal':'66B','row':3,'column':6,'color_value':123},
        {'state_full':'District 67A','state_postal':'67A','row':3,'column':7,'color_value':124},
        {'state_full':'District 43B','state_postal':'43B','row':3,'column':8,'color_value':78},
        {'state_full':'District 39B','state_postal':'39B','row':3,'column':9,'color_value':70},
        {'state_full':'District 44B','state_postal':'44B','row':4,'column':1,'color_value':80},
        {'state_full':'District 46A','state_postal':'46A','row':4,'column':2,'color_value':83},
        {'state_full':'District 59B','state_postal':'59B','row':4,'column':3,'color_value':109},
        {'state_full':'District 60B','state_postal':'60B','row':4,'column':4,'color_value':111},
        {'state_full':'District 64A','state_postal':'64A','row':4,'column':5,'color_value':118},
        {'state_full':'District 65A','state_postal':'65A','row':4,'column':6,'color_value':120},
        {'state_full':'District 67B','state_postal':'67B','row':4,'column':7,'color_value':125},
        {'state_full':'District 53A','state_postal':'53A','row':4,'column':8,'color_value':96},
        {'state_full':'District 33B','state_postal':'33B','row':5,'column':1,'color_value':59},
        {'state_full':'District 46B','state_postal':'46B','row':5,'column':2,'color_value':84},
        {'state_full':'District 61A','state_postal':'61A','row':5,'column':3,'color_value':112},
        {'state_full':'District 62A','state_postal':'62A','row':5,'column':4,'color_value':114},
        {'state_full':'District 63A','state_postal':'63A','row':5,'column':5,'color_value':116},
        {'state_full':'District 65B','state_postal':'65B','row':5,'column':6,'color_value':121},
        {'state_full':'District 53B','state_postal':'53B','row':5,'column':7,'color_value':96},
        {'state_full':'District 54B','state_postal':'54B','row':5,'column':8,'color_value':99},
        {'state_full':'District 48A','state_postal':'48A','row':6,'column':1,'color_value':86},
        {'state_full':'District 49A','state_postal':'49A','row':6,'column':2,'color_value':88},
        {'state_full':'District 61B','state_postal':'61B','row':6,'column':3,'color_value':113},
        {'state_full':'District 62B','state_postal':'62B','row':6,'column':4,'color_value':115},
        {'state_full':'District 63B','state_postal':'63B','row':6,'column':5,'color_value':117},
        {'state_full':'District 64B','state_postal':'64B','row':6,'column':6,'color_value':119},
        {'state_full':'District 52A','state_postal':'52A','row':6,'column':7,'color_value':94},
        {'state_full':'District 54A','state_postal':'54A','row':6,'column':8,'color_value':98},
        {'state_full':'District 47B','state_postal':'47B','row':7,'column':1,'color_value':0},
        {'state_full':'District 48B','state_postal':'48B','row':7,'column':2,'color_value':87},
        {'state_full':'District 49B','state_postal':'49B','row':7,'column':3,'color_value':89},
        {'state_full':'District 50A','state_postal':'50A','row':7,'column':4,'color_value':90},
        {'state_full':'District 50B','state_postal':'50B','row':7,'column':5,'color_value':91},
        {'state_full':'District 51A','state_postal':'51A','row':7,'column':6,'color_value':92},
        {'state_full':'District 51B','state_postal':'51B','row':7,'column':7,'color_value':93},
        {'state_full':'District 52B','state_postal':'52B','row':7,'column':8,'color_value':95},
        {'state_full':'District 55A','state_postal':'55A','row':8,'column':2,'color_value':100},
        {'state_full':'District 55B','state_postal':'55B','row':8,'column':3,'color_value':101},
        {'state_full':'District 56A','state_postal':'56A','row':8,'column':4,'color_value':102},
        {'state_full':'District 56B','state_postal':'56B','row':8,'column':5,'color_value':103},
        {'state_full':'District 58A','state_postal':'58A','row':8,'column':6,'color_value':109},
        {'state_full':'District 57A','state_postal':'57A','row':8,'column':7,'color_value':104},
        {'state_full':'District 57B','state_postal':'57B','row':8,'column':8,'color_value':105}
        ]

var mnlegMNCarto = [{'state_full':'District 1A','state_postal':'1A','row':0,'column':0,'color_value':1},
        {'state_full':'District 2A','state_postal':'2A','row':-1,'column':1,'color_value':3},
        {'state_full':'District 1B','state_postal':'1B','row':0,'column':1,'color_value':2},
        {'state_full':'District 2B','state_postal':'2B','row':0,'column':2,'color_value':4},
        {'state_full':'District 6A','state_postal':'6A','row':0,'column':3,'color_value':11},
        {'state_full':'District 6B','state_postal':'6B','row':0,'column':4,'color_value':12},
        {'state_full':'District 3B','state_postal':'3B','row':0,'column':5,'color_value':6},
        {'state_full':'District 3A','state_postal':'3A','row':0,'column':6,'color_value':5},
        {'state_full':'District 4A','state_postal':'4A','row':1,'column':0,'color_value':7},
        {'state_full':'District 4B','state_postal':'4B','row':1,'column':1,'color_value':8},
        {'state_full':'District 5A','state_postal':'5A','row':1,'column':2,'color_value':9},
        {'state_full':'District 5B','state_postal':'5B','row':1,'column':3,'color_value':10},
        {'state_full':'District 7B','state_postal':'7B','row':1,'column':4,'color_value':14},
        {'state_full':'District 7A','state_postal':'7A','row':1,'column':5,'color_value':13},
        {'state_full':'District 8A','state_postal':'8A','row':2,'column':0,'color_value':15},
        {'state_full':'District 8B','state_postal':'8B','row':2,'column':1,'color_value':16},
        {'state_full':'District 10A','state_postal':'10A','row':2,'column':2,'color_value':19},
        {'state_full':'District 10B','state_postal':'10B','row':2,'column':3,'color_value':20},
        {'state_full':'District 11A','state_postal':'11A','row':2,'column':4,'color_value':21},
        {'state_full':'District 12A','state_postal':'12A','row':3,'column':0,'color_value':23},
        {'state_full':'District 9A','state_postal':'9A','row':3,'column':1,'color_value':17},
        {'state_full':'District 9B','state_postal':'9B','row':3,'column':2,'color_value':18},
        {'state_full':'District 15B','state_postal':'15B','row':3,'column':3,'color_value':29},
        {'state_full':'District 11B','state_postal':'11B','row':3,'column':4,'color_value':22},
        {'state_full':'District 12B','state_postal':'12B','row':4,'column':0,'color_value':24},
        {'state_full':'District 13A','state_postal':'13A','row':4,'column':1,'color_value':25},
        {'state_full':'District 13B','state_postal':'13B','row':4,'column':2,'color_value':0},
        {'state_full':'District 15A','state_postal':'15A','row':4,'column':3,'color_value':28},
        {'state_full':'District 32A','state_postal':'32A','row':4,'column':4,'color_value':56},
        {'state_full':'District 17A','state_postal':'17A','row':5,'column':0,'color_value':32},
        {'state_full':'District 17B','state_postal':'17B','row':5,'column':1,'color_value':33},
        {'state_full':'District 14A','state_postal':'14A','row':5,'column':2,'color_value':26},
        {'state_full':'District 14B','state_postal':'14B','row':5,'column':3,'color_value':27},
        {'state_full':'District 31A','state_postal':'31A','row':5,'column':4,'color_value':0},
        {'state_full':'District 15A','state_postal':'15A','row':6,'column':0,'color_value':28},
        {'state_full':'District 18A','state_postal':'18A','row':6,'column':1,'color_value':34},
        {'state_full':'District 29A','state_postal':'29A','row':6,'column':2,'color_value':0},
        {'state_full':'District 29B','state_postal':'29B','row':6,'column':3,'color_value':0},
        {'state_full':'District 16B','state_postal':'16B','row':7,'column':0,'color_value':31},
        {'state_full':'District 18B','state_postal':'18B','row':7,'column':1,'color_value':35},
        {'state_full':'District 47A','state_postal':'47A','row':7,'column':2,'color_value':85},
        {'state_full':'District 33A','state_postal':'33A','row':7,'column':3,'color_value':58},
        {'state_full':'District 19A','state_postal':'19A','row':8,'column':0,'color_value':36},
        {'state_full':'District 20A','state_postal':'20A','row':8,'column':1,'color_value':38},
        {'state_full':'District 20B','state_postal':'20B','row':8,'column':2,'color_value':39},
        {'state_full':'District 58B','state_postal':'58B','row':8,'column':3,'color_value':103},
        {'state_full':'District 21A','state_postal':'21A','row':8,'column':4,'color_value':40},
        {'state_full':'District 21B','state_postal':'21B','row':8,'column':5,'color_value':41},
        {'state_full':'District 22B','state_postal':'22B','row':9,'column':0,'color_value':43},
        {'state_full':'District 19B','state_postal':'19B','row':9,'column':1,'color_value':37},
        {'state_full':'District 23B','state_postal':'23B','row':9,'column':2,'color_value':0},
        {'state_full':'District 25B','state_postal':'25B','row':9,'column':3,'color_value':0},
        {'state_full':'District 24B','state_postal':'24B','row':9,'column':4,'color_value':46},
        {'state_full':'District 25A','state_postal':'25A','row':9,'column':5,'color_value':0},
        {'state_full':'District 28A','state_postal':'28A','row':9,'column':6,'color_value':51},
        {'state_full':'District 22A','state_postal':'22A','row':10,'column':0,'color_value':42},
        {'state_full':'District 22B','state_postal':'22B','row':10,'column':1,'color_value':43},
        {'state_full':'District 24A','state_postal':'24A','row':10,'column':2,'color_value':45},
        {'state_full':'District 26B','state_postal':'26B','row':10,'column':3,'color_value':48},
        {'state_full':'District 26A','state_postal':'26A','row':10,'column':4,'color_value':47},
        {'state_full':'District 27A','state_postal':'27A','row':10,'column':5,'color_value':49},
        {'state_full':'District 27B','state_postal':'27B','row':10,'column':6,'color_value':50},
        {'state_full':'District 28B','state_postal':'28B','row':10,'column':7,'color_value':52}
        ]

var mnsenMetroCarto = [{'state_full':'District 30','state_postal':'30','row':0,'column':2,'color_value':53},
        {'state_full':'District 30','state_postal':'30','row':0,'column':3,'color_value':54},
        {'state_full':'District 35','state_postal':'35','row':0,'column':4,'color_value':61},
        {'state_full':'District 35','state_postal':'35','row':0,'column':5,'color_value':62},
        {'state_full':'District 31','state_postal':'31','row':0,'column':6,'color_value':55},
        {'state_full':'District 32','state_postal':'32','row':0,'column':7,'color_value':57},
        {'state_full':'District 34','state_postal':'34','row':1,'column':1,'color_value':0},
        {'state_full':'District 36','state_postal':'36','row':1,'column':2,'color_value':63},
        {'state_full':'District 36','state_postal':'36','row':1,'column':3,'color_value':64},
        {'state_full':'District 37','state_postal':'37','row':1,'column':4,'color_value':65},
        {'state_full':'District 37','state_postal':'37','row':1,'column':5,'color_value':66},
        {'state_full':'District 38','state_postal':'38','row':1,'column':6,'color_value':67},
        {'state_full':'District 38','state_postal':'38','row':1,'column':7,'color_value':68},
        {'state_full':'District 39','state_postal':'39','row':1,'column':8,'color_value':69},
        {'state_full':'District 34','state_postal':'34','row':2,'column':1,'color_value':60},
        {'state_full':'District 40','state_postal':'40','row':2,'column':2,'color_value':71},
        {'state_full':'District 40','state_postal':'40','row':2,'column':3,'color_value':72},
        {'state_full':'District 41','state_postal':'41','row':2,'column':4,'color_value':73},
        {'state_full':'District 41','state_postal':'41','row':2,'column':5,'color_value':74},
        {'state_full':'District 42','state_postal':'42','row':2,'column':6,'color_value':75},
        {'state_full':'District 42','state_postal':'42','row':2,'column':7,'color_value':76},
        {'state_full':'District 43','state_postal':'43','row':2,'column':8,'color_value':77},
        {'state_full':'District 44','state_postal':'44','row':3,'column':0,'color_value':79},
        {'state_full':'District 45','state_postal':'45','row':3,'column':1,'color_value':81},
        {'state_full':'District 45','state_postal':'45','row':3,'column':2,'color_value':82},
        {'state_full':'District 59','state_postal':'59','row':3,'column':3,'color_value':108},
        {'state_full':'District 60','state_postal':'60','row':3,'column':4,'color_value':110},
        {'state_full':'District 66','state_postal':'66','row':3,'column':5,'color_value':122},
        {'state_full':'District 66','state_postal':'66','row':3,'column':6,'color_value':123},
        {'state_full':'District 67','state_postal':'67','row':3,'column':7,'color_value':124},
        {'state_full':'District 43','state_postal':'43','row':3,'column':8,'color_value':78},
        {'state_full':'District 39','state_postal':'39','row':3,'column':9,'color_value':70},
        {'state_full':'District 44','state_postal':'44','row':4,'column':1,'color_value':80},
        {'state_full':'District 46','state_postal':'46','row':4,'column':2,'color_value':83},
        {'state_full':'District 59','state_postal':'59','row':4,'column':3,'color_value':109},
        {'state_full':'District 60','state_postal':'60','row':4,'column':4,'color_value':111},
        {'state_full':'District 64','state_postal':'64','row':4,'column':5,'color_value':118},
        {'state_full':'District 65','state_postal':'65','row':4,'column':6,'color_value':120},
        {'state_full':'District 67','state_postal':'67','row':4,'column':7,'color_value':125},
        {'state_full':'District 53','state_postal':'53','row':4,'column':8,'color_value':96},
        {'state_full':'District 33','state_postal':'33','row':5,'column':1,'color_value':59},
        {'state_full':'District 46','state_postal':'46','row':5,'column':2,'color_value':84},
        {'state_full':'District 61','state_postal':'61','row':5,'column':3,'color_value':112},
        {'state_full':'District 62','state_postal':'62','row':5,'column':4,'color_value':114},
        {'state_full':'District 63','state_postal':'63','row':5,'column':5,'color_value':116},
        {'state_full':'District 65','state_postal':'65','row':5,'column':6,'color_value':121},
        {'state_full':'District 53','state_postal':'53','row':5,'column':7,'color_value':96},
        {'state_full':'District 54','state_postal':'54','row':5,'column':8,'color_value':99},
        {'state_full':'District 48','state_postal':'48','row':6,'column':1,'color_value':86},
        {'state_full':'District 49','state_postal':'49','row':6,'column':2,'color_value':88},
        {'state_full':'District 61','state_postal':'61','row':6,'column':3,'color_value':113},
        {'state_full':'District 62','state_postal':'62','row':6,'column':4,'color_value':115},
        {'state_full':'District 63','state_postal':'63','row':6,'column':5,'color_value':117},
        {'state_full':'District 64','state_postal':'64','row':6,'column':6,'color_value':119},
        {'state_full':'District 52','state_postal':'52','row':6,'column':7,'color_value':94},
        {'state_full':'District 54','state_postal':'54','row':6,'column':8,'color_value':98},
        {'state_full':'District 47','state_postal':'47','row':7,'column':1,'color_value':0},
        {'state_full':'District 48','state_postal':'48','row':7,'column':2,'color_value':87},
        {'state_full':'District 49','state_postal':'49','row':7,'column':3,'color_value':89},
        {'state_full':'District 50','state_postal':'50','row':7,'column':4,'color_value':90},
        {'state_full':'District 50','state_postal':'50','row':7,'column':5,'color_value':91},
        {'state_full':'District 51','state_postal':'51','row':7,'column':6,'color_value':92},
        {'state_full':'District 51','state_postal':'51','row':7,'column':7,'color_value':93},
        {'state_full':'District 52','state_postal':'52','row':7,'column':8,'color_value':95},
        {'state_full':'District 55','state_postal':'55','row':8,'column':2,'color_value':100},
        {'state_full':'District 55','state_postal':'55','row':8,'column':3,'color_value':101},
        {'state_full':'District 56','state_postal':'56','row':8,'column':4,'color_value':102},
        {'state_full':'District 56','state_postal':'56','row':8,'column':5,'color_value':103},
        {'state_full':'District 58','state_postal':'58','row':8,'column':6,'color_value':109},
        {'state_full':'District 57','state_postal':'57','row':8,'column':7,'color_value':104},
        {'state_full':'District 57','state_postal':'57','row':8,'column':8,'color_value':105}
        ]

var mnsenMNCarto = [{'state_full':'District 1','state_postal':'1','row':0,'column':0,'color_value':1},
        {'state_full':'District 2','state_postal':'2','row':-1,'column':1,'color_value':3},
        {'state_full':'District 1','state_postal':'1','row':0,'column':1,'color_value':2},
        {'state_full':'District 2','state_postal':'2','row':0,'column':2,'color_value':4},
        {'state_full':'District 6','state_postal':'6','row':0,'column':3,'color_value':11},
        {'state_full':'District 6','state_postal':'6','row':0,'column':4,'color_value':12},
        {'state_full':'District 3','state_postal':'3','row':0,'column':5,'color_value':6},
        {'state_full':'District 3','state_postal':'3','row':0,'column':6,'color_value':5},
        {'state_full':'District 4','state_postal':'4','row':1,'column':0,'color_value':7},
        {'state_full':'District 4','state_postal':'4','row':1,'column':1,'color_value':8},
        {'state_full':'District 5','state_postal':'5','row':1,'column':2,'color_value':9},
        {'state_full':'District 5','state_postal':'5','row':1,'column':3,'color_value':10},
        {'state_full':'District 7','state_postal':'7','row':1,'column':4,'color_value':14},
        {'state_full':'District 7','state_postal':'7','row':1,'column':5,'color_value':13},
        {'state_full':'District 8','state_postal':'8','row':2,'column':0,'color_value':15},
        {'state_full':'District 8','state_postal':'8','row':2,'column':1,'color_value':16},
        {'state_full':'District 10','state_postal':'10','row':2,'column':2,'color_value':19},
        {'state_full':'District 10','state_postal':'10','row':2,'column':3,'color_value':20},
        {'state_full':'District 11','state_postal':'11','row':2,'column':4,'color_value':21},
        {'state_full':'District 12','state_postal':'12','row':3,'column':0,'color_value':23},
        {'state_full':'District 9','state_postal':'9','row':3,'column':1,'color_value':17},
        {'state_full':'District 9','state_postal':'9','row':3,'column':2,'color_value':18},
        {'state_full':'District 15','state_postal':'15','row':3,'column':3,'color_value':29},
        {'state_full':'District 11','state_postal':'11','row':3,'column':4,'color_value':22},
        {'state_full':'District 12','state_postal':'12','row':4,'column':0,'color_value':24},
        {'state_full':'District 13','state_postal':'13','row':4,'column':1,'color_value':25},
        {'state_full':'District 13','state_postal':'13','row':4,'column':2,'color_value':0},
        {'state_full':'District 15','state_postal':'15','row':4,'column':3,'color_value':28},
        {'state_full':'District 32','state_postal':'32','row':4,'column':4,'color_value':56},
        {'state_full':'District 17','state_postal':'17','row':5,'column':0,'color_value':32},
        {'state_full':'District 17','state_postal':'17','row':5,'column':1,'color_value':33},
        {'state_full':'District 14','state_postal':'14','row':5,'column':2,'color_value':26},
        {'state_full':'District 14','state_postal':'14','row':5,'column':3,'color_value':27},
        {'state_full':'District 31','state_postal':'31','row':5,'column':4,'color_value':0},
        {'state_full':'District 15','state_postal':'15','row':6,'column':0,'color_value':28},
        {'state_full':'District 18','state_postal':'18','row':6,'column':1,'color_value':34},
        {'state_full':'District 29','state_postal':'29','row':6,'column':2,'color_value':0},
        {'state_full':'District 29','state_postal':'29','row':6,'column':3,'color_value':0},
        {'state_full':'District 16','state_postal':'16','row':7,'column':0,'color_value':31},
        {'state_full':'District 18','state_postal':'18','row':7,'column':1,'color_value':35},
        {'state_full':'District 47','state_postal':'47','row':7,'column':2,'color_value':85},
        {'state_full':'District 33','state_postal':'33','row':7,'column':3,'color_value':58},
        {'state_full':'District 19','state_postal':'19','row':8,'column':0,'color_value':36},
        {'state_full':'District 20','state_postal':'20','row':8,'column':1,'color_value':38},
        {'state_full':'District 20','state_postal':'20','row':8,'column':2,'color_value':39},
        {'state_full':'District 58','state_postal':'58','row':8,'column':3,'color_value':103},
        {'state_full':'District 21','state_postal':'21','row':8,'column':4,'color_value':40},
        {'state_full':'District 21','state_postal':'21','row':8,'column':5,'color_value':41},
        {'state_full':'District 22','state_postal':'22','row':9,'column':0,'color_value':43},
        {'state_full':'District 19','state_postal':'19','row':9,'column':1,'color_value':37},
        {'state_full':'District 23','state_postal':'23','row':9,'column':2,'color_value':0},
        {'state_full':'District 25','state_postal':'25','row':9,'column':3,'color_value':0},
        {'state_full':'District 24','state_postal':'24','row':9,'column':4,'color_value':46},
        {'state_full':'District 25','state_postal':'25','row':9,'column':5,'color_value':0},
        {'state_full':'District 28','state_postal':'28','row':9,'column':6,'color_value':51},
        {'state_full':'District 22','state_postal':'22','row':10,'column':0,'color_value':42},
        {'state_full':'District 22','state_postal':'22','row':10,'column':1,'color_value':43},
        {'state_full':'District 24','state_postal':'24','row':10,'column':2,'color_value':45},
        {'state_full':'District 26','state_postal':'26','row':10,'column':3,'color_value':48},
        {'state_full':'District 26','state_postal':'26','row':10,'column':4,'color_value':47},
        {'state_full':'District 27','state_postal':'27','row':10,'column':5,'color_value':49},
        {'state_full':'District 27','state_postal':'27','row':10,'column':6,'color_value':50},
        {'state_full':'District 28','state_postal':'28','row':10,'column':7,'color_value':52}
        ]

var mnCDCarto = [{'state_full':'Congressional District 7','state_postal':'7','row':0,'column':0,'color_value':6},
        {'state_full':'Congressional District 8','state_postal':'8','row':0,'column':1,'color_value':7},
        {'state_full':'Congressional District 6','state_postal':'6','row':1,'column':0,'color_value':5},
        {'state_full':'Congressional District 3','state_postal':'3','row':1,'column':1,'color_value':2},
        {'state_full':'Congressional District 5','state_postal':'5','row':2,'column':0,'color_value':4},
        {'state_full':'Congressional District 4','state_postal':'4','row':2,'column':1,'color_value':3},
        {'state_full':'Congressional District 1','state_postal':'1','row':3,'column':0,'color_value':0},
        {'state_full':'Congressional District 2','state_postal':'2','row':3,'column':1,'color_value':1}
        ]

if (race=="president" && geo=="us"){ return usCarto; }
if (race=="president" && geo=="mn"){ return mnCarto; }

if (race=="ushouse" && geo=="us"){ return usCDCarto; }
if (race=="ushouse" && geo=="mn"){ return mnCDCarto; }

if (race=="senate" && geo=="us"){ return usCarto; }
if (race=="senate" && geo=="mn"){ return mnCarto; }

if (race=="mnhouse" && geo=="mn"){ return mnlegMNCarto; }
if (race=="mnhouse" && geo=="metro"){ return mnlegMetroCarto; }

if (race=="mnsenate" && geo=="mn"){ return mnsenMNCarto; }
if (race=="mnsenate" && geo=="metro"){ return mnsenMetroCarto; }

if (race=="governors" && geo=="us"){ return usCarto; }
} //end cartoData

//US HOUSE CARTOGRAM
(function(){
    var margin = {top: 10, left: 10, bottom: 50, right: 10}
    , width = 800
    , width = width - margin.left - margin.right
    , mapRatio = .5
    , height = 800;

    var projection = d3.geo.equirectangular()
              .scale(width/1.3)//this makes it larger or smaller for the space you have
              .translate([width / 4, height / 2.5])
              .center([-102, 47 ]); //move the map center to fit in the spsace

    var path = d3.geo.path()
          .projection(projection);

    var svg = d3.select("#house .carto svg")
          .attr("width", width)
          .attr("height", height);

    var g = svg.append("g").attr('transform',"translate(150,25)").attr('class','house-group-g');

    makeCartogram();

function makeCartogram() {
        d3.json("shapefiles/usdistricts_cartogram.json", function(error, us) {

            g.append("g").attr("id", "districts").selectAll("path")
            .data(topojson.feature(us, us.objects['cart113']).features)
            .enter().append("path")
                .attr("d", path)
                .attr("class", function(d){return 'district ' + d.properties.State,false,null + '-' + d.properties['d'] + '-House'})
                .attr('data-hash-key',function(d){ return d.properties.State + '-' + d.properties['d']});
            g.append("g")
            .attr("id", "states")
            .selectAll("path")
            .data(topojson.feature(us, us.objects.states).features)
            .enter().append("path")
            .attr("d", path)
            .attr('class', function(d){return 'state ' + d.properties.State.replace(/ /g,'')})
            .attr('data-hash-key', function(d){ return d.properties.State});
        })
    }
})();

//map functions
function mapReshade(container, shape, subject, race, dataCompare, visible, demoData, demoData2) {
d3.selectAll(container + " svg g path")
      .data(us.features)
      .style("opacity",visible)
      .attr("class", function(d){
        return "orange2";
        });

} //end mapReshade

// function mapColor(d, race, dataCompare, demoData, demoData2){
  
// if (race == "president"){
//   var color_scaleD = d3.scale.linear().domain([.48,1]).range(['#67B4C2','#022642']);
//   var color_scaleR = d3.scale.linear().domain([.48,1]).range(['#FF8572','#4E0002']);

//   for (var i=0; i < dataCompare.length; i++){
//     var district = d;
//     if (district == dataCompare[i].district){
//       if (dataCompare[i].party == "GOP") { 
//         return color_scaleR(dataCompare[i].r_pct);
//         if (dataCompare[i].r_pct >= .80) { return "r4"; }
//         else if (dataCompare[i].r_pct >= .70) { return "r3"; }
//         else if (dataCompare[i].r_pct >= .60) { return "r2"; }
//         else if (dataCompare[i].r_pct >= .50) { return "r1"; }
//       }
//       if (dataCompare[i].party == "DEM") { 
//         return color_scaleD(dataCompare[i].d_pct);
//         if (dataCompare[i].d_pct >= .80) { return "d4"; }
//         else if (dataCompare[i].d_pct >= .70) { return "d3"; }
//         else if (dataCompare[i].d_pct >= .60) { return "d2"; }
//         else if (dataCompare[i].d_pct >= .50) { return "d1"; }
//       }
//     }
//   }
// }

// if (race == "cd"){
//   var color_scaleD = d3.scale.linear().domain([48,1]).range(['#67B4C2','#022642']);
//   var color_scaleR = d3.scale.linear().domain([48,1]).range(['#FF8572','#4E0002']);

//   for (var i=0; i < dataCompare.length; i++){
//     var district = d;
//     if (district == dataCompare[i].district){
//       if (dataCompare[i].party == "GOP") { 
//         return color_scaleR(dataCompare[i].r_pct);
//         if (dataCompare[i].r_pct >= 80) { return "r4"; }
//         else if (dataCompare[i].r_pct >= 70) { return "r3"; }
//         else if (dataCompare[i].r_pct >= 60) { return "r2"; }
//         else if (dataCompare[i].r_pct >= 50) { return "r1"; }
//       }
//       if (dataCompare[i].party == "DEM") { 
//         return color_scaleD(dataCompare[i].d_pct);
//         if (dataCompare[i].d_pct >= 80) { return "d4"; }
//         else if (dataCompare[i].d_pct >= 70) { return "d3"; }
//         else if (dataCompare[i].d_pct >= 60) { return "d2"; }
//         else if (dataCompare[i].d_pct >= 50) { return "d1"; }
//       }
//     }
//   }
// }

// if (race == "county"){
//   var color_scaleD = d3.scale.linear().domain([48,100]).range(['#67B4C2','#022642']);
//   var color_scaleR = d3.scale.linear().domain([48,100]).range(['#FF8572','#4E0002']);

//   for (var i=0; i < dataCompare.length; i++){
//     var district = d;
//     if (Number(district) == Number(dataCompare[i].FIPS)){
//       if (dataCompare[i].winner == "GOP") { 
//         return color_scaleR(dataCompare[i].r_pct);
//         if (dataCompare[i].r_pct >= 80) { return "r4"; }
//         else if (dataCompare[i].r_pct >= 70) { return "r3"; }
//         else if (dataCompare[i].r_pct >= 60) { return "r2"; }
//         else if (dataCompare[i].r_pct >= 50) { return "r1"; }
//       }
//       if (dataCompare[i].winner == "DEM") { 
//         return color_scaleD(dataCompare[i].d_pct);
//         if (dataCompare[i].d_pct >= 80) { return "d4"; }
//         else if (dataCompare[i].d_pct >= 70) { return "d3"; }
//         else if (dataCompare[i].d_pct >= 60) { return "d2"; }
//         else if (dataCompare[i].d_pct >= 50) { return "d1"; }
//     }
//   }
//  }
// }

// if (race == "pct"){
//   var color_scaleD = d3.scale.linear().domain([48,100]).range(['#67B4C2','#022642']);
//   var color_scaleR = d3.scale.linear().domain([48,100]).range(['#FF8572','#4E0002']);

//   for (var i=0; i < dataCompare.length; i++){
//     var district = d;
//     if (Number(district) == Number(dataCompare[i].pct_id)){
//       if (dataCompare[i].party_id == "R" && dataCompare[i].vote_pct >= 48) { 
//         // return color_scaleR(dataCompare[i].vote_pct);
//         if (dataCompare[i].vote_pct >= 80) { return "#8C1B17"; }
//         else if (dataCompare[i].vote_pct >= 70) { return "#A52129"; }
//         else if (dataCompare[i].vote_pct >= 60) { return "#A5484D"; }
//         else if (dataCompare[i].vote_pct >= 48) { return "#C68985"; }
//       }
//       if (dataCompare[i].party_id == "DFL" && dataCompare[i].vote_pct >= 48) { 
//         // return color_scaleD(dataCompare[i].vote_pct);
//         if (dataCompare[i].vote_pct >= 80) { return "#3f88c5"; }
//         else if (dataCompare[i].vote_pct >= 70) { return "#4f97c4"; }
//         else if (dataCompare[i].vote_pct >= 60) { return "#5ca5c3"; }
//         else if (dataCompare[i].vote_pct >= 48) { return "#ABCEE8"; }
//       }
//     }
//   }
// }


//     return "#ddd";
// } //end mapColor

// function mapTips(d, subject, dataCompare, level){

// if (subject == "president"){
// for (var i=0; i < dataCompare.length; i++){
//   var district = d;

//   if (district == dataCompare[i].district){
//       if (dataCompare[i].party == "GOP") { 
//         if  (dataCompare[i].PCT2012 >= .80) { return "<div class='name'><strong>" + dataCompare[i].district + "</strong></div><div>" + dataCompare[i].candidate + "</div><div class='r4'>" +  d3.format("%")(dataCompare[i].PCT2012) + " 2012 WIN</div><div>" + dataCompare[i].ev + " electoral votes</div>"; }
//         else if  (dataCompare[i].PCT2012 >= .70) { return "<div><strong>" + d.district + "</strong></div><div>" + dataCompare[i].candidate + "</div><div class='r3'>" +  d3.format("%")(dataCompare[i].PCT2012) + " 2012 WIN</div><div>" + dataCompare[i].ev + " electoral votes</div>"; }
//         else if  (dataCompare[i].PCT2012 >= .60) { return "<div><strong>" + dataCompare[i].district + "</strong></div><div>" + dataCompare[i].candidate + "</div><div class='r2'>" +  d3.format("%")(dataCompare[i].PCT2012) + " 2012 WIN</div><div>" + dataCompare[i].ev + " electoral votes</div>"; }
//         else if  (dataCompare[i].PCT2012 >= .50) { return "<div><strong>" + dataCompare[i].district + "</strong></div><div>" + dataCompare[i].candidate + "</div><div class='r1'>" +  d3.format("%")(dataCompare[i].PCT2012) + " 2012 WIN</div><div>" + dataCompare[i].ev + " electoral votes</div>"; }
//       }
//       else if (dataCompare[i].party == "DEM") { 
//         if  (dataCompare[i].PCT2012 >= .80) { return "<div class='name'><strong>" + dataCompare[i].district + "</strong></div><div>" + dataCompare[i].candidate + "</div><div class='d4'>" +  d3.format("%")(dataCompare[i].PCT2012) + " 2012 WIN</div><div>" + dataCompare[i].ev + " electoral votes</div>"; }
//         else if  (dataCompare[i].PCT2012 >= .70) { return "<div><strong>" + dataCompare[i].district + "</strong></div><div>" + dataCompare[i].candidate + "</div><div class='d3'>" +  d3.format("%")(d.PCT2012) + " 2012 WIN</div><div>" + dataCompare[i].ev + " electoral votes</div>"; }
//         else if  (dataCompare[i].PCT2012 >= .60) { return "<div><strong>" + dataCompare[i].district + "</strong></div><div>" + dataCompare[i].candidate + "</div><div class='d2'>" +  d3.format("%")(d.PCT2012) + " 2012 WIN</div><div>" + dataCompare[i].ev + " electoral votes</div>"; }
//         else if  (dataCompare[i].PCT2012 >= .50) { return "<div><strong>" + dataCompare[i].district + "</strong></div><div>" + dataCompare[i].candidate + "</div><div class='d1'>" +  d3.format("%")(dataCompare[i].PCT2012) + " 2012 WIN</div><div>" + dataCompare[i].ev + " electoral votes</div>"; }
//       }
//     } 
//   }
//  return "<div><strong>" + district + "</strong></div>";
// }
// else if (subject == "county"){
// for (var i=0; i < dataCompare.length; i++){
//   var district = d;

//   if (Number(district) == Number(dataCompare[i].FIPS)){
//       if (dataCompare[i].winner == "GOP") { 
//         if  (dataCompare[i].r_pct >= 80) { return "<div class='name'><strong>" + dataCompare[i].county + " County , " + dataCompare[i].ab + "</strong></div><div>Romney</div><div class='r4'>" +  dataCompare[i].r_pct + "% 2012 WIN</div>"; }
//         else if  (dataCompare[i].r_pct >= 70) { return "<div class='name'><strong>" + dataCompare[i].county + " County , " + dataCompare[i].ab + "</strong></div><div>Romney</div><div class='r3'>" +  dataCompare[i].r_pct + "% 2012 WIN</div>"; }
//         else if  (dataCompare[i].r_pct >= 60) { return "<div class='name'><strong>" + dataCompare[i].county + " County , " + dataCompare[i].ab + "</strong></div><div>Romney</div><div class='r2'>" +  dataCompare[i].r_pct + "% 2012 WIN</div>"; }
//         else if  (dataCompare[i].r_pct >= 50) { return "<div class='name'><strong>" + dataCompare[i].county + " County , " + dataCompare[i].ab + "</strong></div><div>Romney</div><div class='r1'>" +  dataCompare[i].r_pct + "% 2012 WIN</div>"; }
//       }
//       else if (dataCompare[i].winner == "DEM") { 
//         if  (dataCompare[i].d_pct >= 80) { return "<div class='name'><strong>" + dataCompare[i].county + " County , " + dataCompare[i].ab + "</strong></div><div>Obama</div><div class='d4'>" +  dataCompare[i].d_pct + "% 2012 WIN</div>"; }
//         else if  (dataCompare[i].d_pct >= 70) { return "<div class='name'><strong>" + dataCompare[i].county + " County , " + dataCompare[i].ab + "</strong></div><div>Obama</div><div class='d3'>" +  dataCompare[i].d_pct + "% 2012 WIN</div>"; }
//         else if  (dataCompare[i].d_pct >= 60) { return "<div class='name'><strong>" + dataCompare[i].county + " County , " + dataCompare[i].ab + "</strong></div><div>Obama</div><div class='d2'>" +  dataCompare[i].d_pct + "% 2012 WIN</div>"; }
//         else if  (dataCompare[i].d_pct >= 50) { return "<div class='name'><strong>" + dataCompare[i].county + " County , " + dataCompare[i].ab + "</strong></div><div>Obama</div><div class='d1'>" +  dataCompare[i].d_pct + "% 2012 WIN</div>"; }
//       }
//    } 
//  }

// return "<div><strong>" + district + "</strong></div>";

// }
// else if (subject == "pct"){
// for (var i=0; i < dataCompare.length; i++){
//   if (Number(d.properties.PCTCODE) == dataCompare[i].pct_id){
//           if (dataCompare[i].party_id == "R") { 
//         if  (dataCompare[i].vote_pct >= 80) { return "<div class='name'><strong>" + d.properties.PCTNAME + "</strong></div><div>" + dataCompare[i].candidate +"</div><div class='r4'>" +  dataCompare[i].vote_pct + "% 2012 WIN</div>"; }
//         else if (dataCompare[i].vote_pct >= 70) { return "<div class='name'><strong>" + d.properties.PCTNAME + "</strong></div><div>" + dataCompare[i].candidate +"</div><div class='r3'>" +  dataCompare[i].vote_pct + "% 2012 WIN</div>"; }
//         else if (dataCompare[i].vote_pct >= 60) { return "<div class='name'><strong>" + d.properties.PCTNAME + "</strong></div><div>" + dataCompare[i].candidate +"</div><div class='r2'>" +  dataCompare[i].vote_pct + "% 2012 WIN</div>"; }
//         else if  (dataCompare[i].vote_pct >= 50) { return "<div class='name'><strong>" + d.properties.PCTNAME + "</strong></div><div>" + dataCompare[i].candidate +"</div><div class='r1'>" +  dataCompare[i].vote_pct + "% 2012 WIN</div>"; }
//       }
//       else if (dataCompare[i].party_id == "DFL") { 
//         if  (dataCompare[i].vote_pct >= 80) { return "<div class='name'><strong>" + d.properties.PCTNAME + "</strong></div><div>" + dataCompare[i].candidate +"</div><div class='d3'>" +  dataCompare[i].vote_pct + "% 2012 WIN</div>"; }
//         else if  (dataCompare[i].vote_pct >= 70) { return "<div class='name'><strong>" + d.properties.PCTNAME + "</strong></div><div>" + dataCompare[i].candidate +"</div><div class='d3'>" +  dataCompare[i].vote_pct + "% 2012 WIN</div>"; }
//         else if  (dataCompare[i].vote_pct >= 60) { return "<div class='name'><strong>" + d.properties.PCTNAME + "</strong></div><div>" + dataCompare[i].candidate +"</div><div class='d2'>" +  dataCompare[i].vote_pct + "% 2012 WIN</div>"; }
//         else if  (dataCompare[i].vote_pct >= 50) { return "<div class='name'><strong>" + d.properties.PCTNAME + "</strong></div><div>" + dataCompare[i].candidate +"</div><div class='d1'>" +  dataCompare[i].vote_pct + "% 2012 WIN</div>"; }
//       }
//     }
//   }

//   return "<div class='name'><strong>" + d.properties.PCTNAME + "</strong></div>"
// }


// } //end mapTips


function mapBuild(container, boxContainer, chartContainer, shape, race, geo, level, dataCompare, index, visible) {

if (geo=="us") { var width = 800, height = 600, centered; var projection = d3.geo.albersUsa().scale(1000).translate([400, 210]); }
else if (geo=="mn") { var width = 350, height = 350, centered; var projection = d3.geo.mercator().scale([3200]).center([-89.736328,46.377254]); }
else if (geo=="metro") { var width = 350, height = 350, centered; var projection = d3.geo.mercator().scale([16500]).center([-92.403259,44.988113]); }

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select(container + " svg")
    .attr("width", width)
    .attr("height", height);

// svg.append("rect")
//     .attr("class", "background " + race + " " + level)
//     .attr("width", width)
//     .attr("height", height);

var g = svg.append("g").attr("class", "mappage states " + race + " " + level);

d3.json("shapefiles/" + shape, function(error, us) {

  g.selectAll("path")
      .data(us.features)
    .enter().append("path")
      .attr("d", path)
      .on("click", clicked)
      .attr("id", function(d) { var str = d.properties.NAME + "_" + geo; return str.replace(new RegExp(" ", "g"),"-"); })
      .attr("precinctName", function(d){ return d.properties.NAME })
      .style("fill", function(d){
         if (race == "president" || race == "senate" || race == "governors") { return fetchData(d.properties.NAME,d.properties.NAME,"lean",dataCompare,race); }
         else if (race == "county") { return fetchData(d.properties.GEOID,null,"colors",dataCompare,race); }
         // else if (race == "pct") { return mapColor(d.properties.PCTCODE, race, dataCompare); }
         else if (race == "house") { return fetchData("District " + d.properties.DISTRICT,d.properties.STATENAME,"lean",dataCompare,"ushouse",null,"District " + d.properties.DISTRICT); }
         else if (race == "mnsenate" || race == "mnhouse") { return fetchData("District " + d.properties.DISTRICT,"Minnesota","lean",dataCompare,race); }
        })
       .on("mousedown", function(d, i){

        var str = d.properties.NAME; 
        $(".district").removeClass("selected");
        // $("#" + str.replace(new RegExp(" ", "g"),"-")).addClass("selected");
        
      
if (race == "president" || race == "senate" ||  race == "governors"){ $("#infobox").html(fetchData(d.properties.NAME,d.properties.NAME,"table",dataCompare,race)); }
else if (race == "county"){ $("#infobox").html(fetchData(d.properties.GEOID,null,"table",dataCompare,race,null,d.properties.NAME)); }
else if (race == "mnsenate" || race == "mnhouse") { $("#infobox").html(fetchData("District " + d.properties.DISTRICT,"Minnesota","table",dataCompare,race,null,"District " + d.properties.DISTRICT)); }

else if (race == "pct"){
              $("#candidatePCTR, #candidatePCTD").removeClass("d4");
              $("#candidatePCTR, #candidatePCTD").removeClass("d3");
              $("#candidatePCTR, #candidatePCTD").removeClass("d2");
              $("#candidatePCTR, #candidatePCTD").removeClass("d1");
              $("#candidatePCTR, #candidatePCTD").removeClass("r4");
              $("#candidatePCTR, #candidatePCTD").removeClass("r3");
              $("#candidatePCTR, #candidatePCTD").removeClass("r2");
              $("#candidatePCTR, #candidatePCTD").removeClass("r1");
              $("#pctReported").html(0);
              $("#pctAll").html(0);
              $("#pctPCT").html(0);

    for (var i=0; i < dataCompare.length; i++){
    if (Number(d.properties.PCTCODE) == Number(dataCompare[i].pct_id)){
      if (dataCompare[i].party_id == "R" && dataCompare[i].vote_pct >= 48) { 
        $("#candidatePCTR").html(dataCompare[i].vote_pct + "%");
        $("#candidateVotesR").html(0);
        // $("#candidatePCTR").css("background-color", mapColor(d.properties.PCTCODE, race, dataCompare));
      }
      if (dataCompare[i].party_id == "DFL" && dataCompare[i].vote_pct >= 48) { 
        $("#candidateVotesD").html(0);
        $("#candidatePCTD").html(dataCompare[i].vote_pct + "%");
        // $("#candidatePCTD").css("background-color", mapColor(d.properties.PCTCODE, race, dataCompare));
      }
    }
  }
}
       })
      .style("stroke-width", "0.3px")
      .style("stroke", "#fff")
      .attr("class",function(d){
          if (race == "senate"){ 
            if (d.properties.NAME == "Montana" || d.properties.NAME == "Wyoming" || d.properties.NAME == "Nebraska" || d.properties.NAME == "Minnesota" || d.properties.NAME == "New Mexico" || d.properties.NAME == "Texas" || d.properties.NAME == "Mississippi" || d.properties.NAME == "Tennessee" || d.properties.NAME == "West Virginia" || d.properties.NAME == "Virginia" || d.properties.NAME == "New Jersey" || d.properties.NAME == "Delaware" || d.properties.NAME == "Rhode Island" || d.properties.NAME == "Massachusetts" || d.properties.NAME == "Maine" || d.properties.NAME == "Michigan"){
                return "noclicky";
            }
          }
          if (race == "governors"){ 
            if (d.properties.NAME != "Washington" && d.properties.NAME != "Oregon" && d.properties.NAME != "Montana" && d.properties.NAME != "Utah" && d.properties.NAME != "Missouri" && d.properties.NAME != "Montana" && d.properties.NAME != "Montana" && d.properties.NAME != "Montana" && d.properties.NAME != "West Virginia" && d.properties.NAME != "North Carolina" && d.properties.NAME != "Delaware" && d.properties.NAME != "New Hampshire" && d.properties.NAME != "Vermont" && d.properties.NAME != "Indiana" && d.properties.NAME != "North Dakota"){
                return "noclicky";
            }
          }
          if (race == "county"){ 
            if (d.properties.STATEFP == 27){
              if (d.properties.NAME == "Hennepin" || d.properties.NAME == "Ramsey" || d.properties.NAME == "Washington" || d.properties.NAME == "Carver" || d.properties.NAME == "Scott" || d.properties.NAME == "Dakota" || d.properties.NAME == "Anoka") { return "mn metro"; }
              else { return "mn"; }  
            }
            else { return "areas"; }
          }
          if (race == "house"){ 
            if (d.properties.STATENAME == "Minnesota"){ return "mn"; }
            else { return "areas"; }
          }
      })
      .call(d3.helper.tooltip(function(d, i){
         if (race == "president" || race == "senate" || race == "governors") { return fetchData(d.properties.NAME,d.properties.NAME,"tooltip",dataCompare,race); }
         else if (race == "county") { return fetchData(d.properties.GEOID,null,"tooltip",dataCompare,race,null,d.properties.NAME); }
         // else if (race == "pct") { return mapTips(d, race, dataCompare, level); }
         else if (race == "house") { return fetchData("District " + d.properties.DISTRICT,d.properties.STATENAME,"tooltip",dataCompare,"ushouse",null,"District " + d.properties.DISTRICT); }
         else if (race == "mnsenate" || race == "mnhouse") { return fetchData("District " + d.properties.DISTRICT,"Minnesota","tooltip",dataCompare,race,null,"District " + d.properties.DISTRICT); }
      }));

  g.append("path")
      //.datum(topojson.mesh(us, us.features, function(a, b) { return a !== b; }))
      .attr("class", "state-borders")
      .attr("d", path);

});

var zoom = d3.behavior.zoom()
    .on("zoom",function() {
        g.attr("transform","translate("+
            d3.event.translate.join(",")+")scale("+d3.event.scale+")");
        g.selectAll("circle")
            .attr("d", path.projection(projection));
        g.selectAll("path")
            .attr("d", path.projection(projection));

  });

$(".zoom").click(function() {
  clicked2();
  $("#infobox").html("");
  $(".bar").removeClass("selected");
  d3.selectAll("rect").classed('active', false); 
  d3.selectAll("rect").classed('faded', false); 
  d3.selectAll("text").classed('active', false); 
  d3.selectAll("text").classed('faded', false); 
  $("#candidatePCTR").html("47.2%");
  $("#candidatePCTD").html("51.1%");
  $("#candidatePCTR, #candidatePCTD").removeClass("d4");
  $("#candidatePCTR, #candidatePCTD").removeClass("d3");
  $("#candidatePCTR, #candidatePCTD").removeClass("d2");
  $("#candidatePCTR, #candidatePCTD").removeClass("d1");
  $("#candidatePCTR, #candidatePCTD").removeClass("r4");
  $("#candidatePCTR, #candidatePCTD").removeClass("r3");
  $("#candidatePCTR, #candidatePCTD").removeClass("r2");
  $("#candidatePCTR, #candidatePCTD").removeClass("r1");
});

$(".uszoom").click(function() {
    clicked2();
    d3.selectAll(".areas").classed("gone", false);
    d3.selectAll(".mn").classed("gone", false);
    d3.selectAll(".metro").classed("gone", false);
});

$(".mnzoom").click(function() {
    mnzoom();
    d3.selectAll(".areas").classed("gone", true);
    d3.selectAll(".mn").classed("gone", false);
});

$(".metrozoom").click(function() {
    metrozoom();
    d3.selectAll(".areas").classed("gone", true);
    d3.selectAll(".mn").classed("gone", true);
    d3.selectAll(".metro").classed("gone", false);
});

function clicked(d) {
  var x, y, k;

  if (d && centered !== d) {
    var centroid = path.centroid(d);
    x = centroid[0];
    y = centroid[1];
    console.log(centroid + " " + x + " " + y);
    k = 3;
    centered = d;
  } else {
    x = width / 2;
    y = height / 2;
    k = 3;
    centered = null;
  }

  g.selectAll("." + race + " path")
      .classed("faded", true)
      .classed("active", centered && function(d) { return d === centered; });

  g.transition()
      .duration(200)
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")")
      // .style("stroke-width", 1.5 / k + "px");

  g.selectAll("path").style("stroke-width", "0.3px");
}

function mnzoom(d) {
  var x, y, k;

    var centroid = path.centroid(d);
    x = 429.8542649319006;
    y = 76.27472769218944;
    k = 5;

  g.transition()
      .duration(200)
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")")
      .style("stroke-width", "0");

  g.selectAll("path").style("stroke-width", "0.3px");
}

function metrozoom(d) {
  var x, y, k;

    var centroid = path.centroid(d);
    x = 439.8542649319006;
    y = 103.27472769218944;
    k = 25;

  g.transition()
      .duration(200)
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")")
      .style("stroke-width", "0");

  g.selectAll("path").style("stroke-width", "0.1px");
}

function clicked2(d) {
  var x, y, k;

  if (d && centered !== d) {
    var centroid = path.centroid(d);
    x = centroid[0];
    y = centroid[1];
    k = 1;
    centered = d;
  } else {
    x = width / 2;
    y = height / 2;
    k = 1;
    centered = null;
  }

  g.selectAll("." + race + " path")
      .classed("faded", false)
      .classed("active", centered && function(d) { return d === centered; });

  g.transition()
      .duration(200)
      .attr("transform", "translate(" + width / 2 + "," + height / 2 + ")scale(" + k + ")translate(" + -x + "," + -y + ")")
      // .style("stroke-width","0.5px");

  g.selectAll("path").style("stroke-width", ".5px");
}

d3.helper = {};

d3.helper.tooltip = function(accessor){
    return function(selection){
        var tooltipDiv;
        var bodyNode = d3.select('body').node();
        selection.on("mouseover", function(d, i){
            // Clean up lost tooltips
            d3.select('body').selectAll('div.tooltip').remove();
            // Append tooltip
            tooltipDiv = d3.select('body').append('div').attr('class', 'tooltip');
            var absoluteMousePos = d3.mouse(bodyNode);
            tooltipDiv.style('left', (absoluteMousePos[0] + 10)+'px')
                .style('top', (absoluteMousePos[1] - 15)+'px')
                .style('position', 'absolute')
                .style('z-index', 1001);
            // Add text using the accessor function
            var tooltipText = accessor(d, i) || '';
            // Crop text arbitrarily
            //tooltipDiv.style('width', function(d, i){return (tooltipText.length > 80) ? '300px' : null;})
            //    .html(tooltipText);
        })
        .on('mousemove', function(d, i) {
            // Move tooltip
            var absoluteMousePos = d3.mouse(bodyNode);
            tooltipDiv.style('left', (absoluteMousePos[0] + 10)+'px')
                .style('top', (absoluteMousePos[1] - 15)+'px');
            var tooltipText = accessor(d, i) || '';
            tooltipDiv.html(tooltipText);
        })
        .on("mouseout", function(d, i){
            // Remove tooltip
            tooltipDiv.remove();
        });

    };
};

//RESPONSIVENESS
if (race != "mnsenate" && race != "mnhouse"){
var aspect = 800 / 600, chart = $(".map svg"), chart2 = $(".carto svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  var targetWidth2 = chart2.parent().width();
  chart2.attr("width", targetWidth2);
  chart2.attr("height", targetWidth2 / aspect);
$(window).on("resize", function() {
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  var targetWidth2 = chart2.parent().width();
  chart2.attr("width", targetWidth2);
  chart2.attr("height", targetWidth2 / aspect);
});
} else {
var aspect = 320 / 350, chart = $(".map svg"), chart2 = $(".carto svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  var targetWidth2 = chart2.parent().width();
  chart2.attr("width", targetWidth2);
  chart2.attr("height", targetWidth2 / aspect);
$(window).on("resize", function() {
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  var targetWidth2 = chart2.parent().width();
  chart2.attr("width", targetWidth2);
  chart2.attr("height", targetWidth2 / aspect);
});

}


} //end mapBuild


//show/hide parameters
$.urlParam = function(name){
  var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
  return results[1] || 0;
}

var race = $.urlParam('race');
$(".raceSwitch").removeClass("selected2");
$(".raceSwitch[data=" + race + "]").addClass("selected2");


function mapShow(container, race){
 d3.selectAll(".mappage").each(function(i){
  if (!d3.select(this).classed(race)) { d3.select(this).style("display","none"); }
  else { d3.select(this).style("display","block"); }
 });
} //end mapShow

function mapSpill(race,data){

if (race == "president"){
  mapBuild("#president .geo", "#districtName", "#chart", "us_states.json", race, "us", "country", data);
  mapBuild("#president .geo", "#districtName", "#chart", "us_counties.json", "county", "us", "counties", data);

  mapBuild("#mapStates", "#districtName", "#chart", "us_states.json", race, "us", "country", data);
  mapBuild("#mapCounties", "#districtName", "#chart", "us_counties.json", "county", "us", "counties", data);

  //RESPONSIVENESS
var aspect = 800 / 600, chart = $(".map svg"), chart2 = $(".carto svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  var targetWidth2 = chart2.parent().width();
  chart2.attr("width", targetWidth2);
  chart2.attr("height", targetWidth2 / aspect);
}

if (race == "house"){
  mapBuild("#house .geo", "#districtName", "#chart", "uscongress.json", race, "us", "country", data);
  mapBuild("#mapMN", "#districtName", "#chart", "us_cd_mn_2012.json", race, "mn", "country", data);

  //RESPONSIVENESS
var aspect = 800 / 600, chart = $(".map svg"), chart2 = $(".carto svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  var targetWidth2 = chart2.parent().width();
  chart2.attr("width", targetWidth2);
  chart2.attr("height", targetWidth2 / aspect);
}

if (race == "senate"){
  mapBuild("#senate .geo", "#districtName", "#chart", "us_states.json", race, "us", "country", data);
  mapBuild("#senate .geo", "#districtName", "#chart", "us_counties.json", "county", "us", "counties", data);
  // cartoBuild("#senate .carto", "#districtName", "#chart", null, race, data, "us", 0, cartoData(race,"us"));

  //RESPONSIVENESS
var aspect = 800 / 600, chart = $(".map svg"), chart2 = $(".carto svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  var targetWidth2 = chart2.parent().width();
  chart2.attr("width", targetWidth2);
  chart2.attr("height", targetWidth2 / aspect);
}

if (race == "governors"){
  mapBuild("#governors .geo", "#districtName", "#chart", "us_states.json", race, "us", "country", data);
  mapBuild("#governors .geo", "#districtName", "#chart", "us_counties.json", "county", "us", "counties", data);
  // cartoBuild("#governors .carto", "#districtName", "#chart", null, race, data, "us", 0, cartoData(race,"us"));

  //RESPONSIVENESS
var aspect = 800 / 600, chart = $(".map svg"), chart2 = $(".carto svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  var targetWidth2 = chart2.parent().width();
  chart2.attr("width", targetWidth2);
  chart2.attr("height", targetWidth2 / aspect);
}

if (race == "mnhouse"){
  mapBuild("#mnhouse .mapState", "#districtName", "#chart", "mnleg.json", race, "mn", "country", data);
  mapBuild("#mnhouse .mapMetro", "#districtName", "#chart", "mnleg_metro.json", race, "metro", "country", data);
  cartoBuild("#mnhouse .cartoState", "#districtName", "#chart", null, race, data, "us", 0, cartoData(race,"mn"));
  cartoBuild("#mnhouse .cartoMetro", "#districtName", "#chart", null, race, data, "us", 0, cartoData(race,"metro"));

  //RESPONSIVENESS
var aspect = 320 / 350, chart = $(".map svg"), chart2 = $(".carto svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  var targetWidth2 = chart2.parent().width();
  chart2.attr("width", targetWidth2);
  chart2.attr("height", targetWidth2 / aspect);
}

if (race == "mnsenate"){
  mapBuild("#mnsenate .mapState", "#districtName", "#chart", "mnsenate.json", race, "mn", "country", data);
  mapBuild("#mnsenate .mapMetro", "#districtName", "#chart", "mnsenate_metro.json", race, "metro", "country", data);
  cartoBuild("#mnsenate .cartoState", "#districtName", "#chart", null, race, data, "us", 0, cartoData(race,"mn"));
  cartoBuild("#mnsenate .cartoMetro", "#districtName", "#chart", null, race, data, "us", 0, cartoData(race,"metro"));

  //RESPONSIVENESS
var aspect = 320 / 350, chart = $(".map svg"), chart2 = $(".carto svg");
  var targetWidth = chart.parent().width();
  chart.attr("width", targetWidth);
  chart.attr("height", targetWidth / aspect);
  var targetWidth2 = chart2.parent().width();
  chart2.attr("width", targetWidth2);
  chart2.attr("height", targetWidth2 / aspect);
}

} //end mapSpill


//BALANCE OF POWER BARS
function prezCrunch(data){

  var stateList = ["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","District of Columbia","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];

  var evList = [9,3,11,6,55,9,7,3,3,29,16,4,4,20,11,6,6,8,8,4,10,11,16,10,6,10,3,5,6,4,14,5,29,15,3,18,7,7,20,4,9,3,11,38,6,3,13,12,5,10,3];

  var dTally = 0;
  var rTally = 0;

  for (var i=0; i < stateList.length; i++){
    var updated = fetchData(null,stateList[i],"winner",data,"data",null,null);
    if (updated == "GOP Win") { rTally += evList[i]; }
    else if (updated == "DEM Win") { dTally += evList[i]; }
  }

  var votesR = fetchData(null,"United States","votesR",data,"data",null,null);
  var votesD = fetchData(null,"United States","votesD",data,"data",null,null);
  var votesT = fetchData(null,"United States","votesT",data,"data",null,null);

  $(".demsCount").html(dTally);
  $(".gopCount").html(rTally);
  $(".dcount").html(d3.format(",")(votesD));
  $(".rcount").html(d3.format(",")(votesR));
  $(".demPCT").html(d3.format("%")(votesD/votesT));
  $(".gopPCT").html(d3.format("%")(votesR/votesT)); 
  $("#dWin").css("width", d3.format("%")((dTally/538)));
  $("#rWin").css("width", d3.format("%")((rTally/538)));

}

function senCrunch(data){

  var stateList = ["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","District of Columbia","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];

  var dTally = 36;
  var rTally = 30;

  for (var i=0; i < stateList.length; i++){
    var updated = fetchData(null,stateList[i],"winner",data,"senate",null,null);
    if (updated == "GOP Win") { rTally++; }
    else if (updated == "DEM Win") { dTally++; }
  }

  $(".demsCount").html(dTally);
  $(".gopCount").html(rTally);
  $("#dWin").css("width", d3.format("%")(dTally/100));
  $("#rWin").css("width", d3.format("%")(rTally/100));

}

function govCrunch(data){

  var stateList = ["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","District of Columbia","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];

  var dTally = 10;
  var rTally = 27;
  var iTally = 1;

  for (var i=0; i < stateList.length; i++){
    var updated = fetchData(null,stateList[i],"winner",data,"governors",null,null);
    if (updated == "GOP Win") { rTally++; }
    else if (updated == "DEM Win") { dTally++; }
  }

  $(".demsCount").html(dTally);
  $(".gopCount").html(rTally);
  $("#dWin").css("width", d3.format("%")(dTally/50));
  $("#rWin").css("width", d3.format("%")(rTally/50));

}

function houseCrunch(data){

  var stateList = ["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","District of Columbia","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"];
  var districtList = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53];

  var dTally = 0;
  var rTally = 0;

  for (var i=0; i < districtList.length; i++){
    for (var k=0; k < stateList.length; k++){
    var updated = fetchData("District " + districtList[i],stateList[k],"winner",data,"ushouse",null,"District " + districtList[i]);
    if (updated == "GOP Win") { rTally++; }
    else if (updated == "DEM Win") { dTally++; }
    }

  }

  $(".demsCount").html(dTally);
  $(".gopCount").html(rTally);
  $("#dWin").css("width", d3.format("%")((dTally/435)));
  $("#rWin").css("width", d3.format("%")((rTally/435)));

}

function mnhouseCrunch(data){

  var districtList = ["1A","1B","2A","2B","3A","3B","4A","4B","5A","5B","6A","6B","7A","7B","8A","8B","9A","9B","10A","10B","11A","11B","12A","12B","13A","13B","14A","14B","15A","15B","16A","16B","17A","17B","18A","18B","19A","19B","20A","20B","21A","21B","22A","22B","23A","23B","24A","24B","25A","25B","26A","26B","27A","27B","28A","28B","29A","29B","31A","31B","32A","32B","33A","33B","34A","34B","35A","35B","36A","36B","37A","37B","38A","38B","39A","39B","40A","40B","41A","41B","42A","42B","43A","43B","44A","44B","45A","45B","46A","46B","47A","47B","48A","48B","49A","49B","50A","50B","51A","51B","52A","52B","53A","53B","54A","54B","55A","55B","57A","57B","58A","58B","59A","59B","60A","60B","61A","61B","62A","62B","63A","63B","64A","64B","65A","65B","66A","66B","67A","67B",];

  var dTally =0 ;
  var rTally = 0;

  for (var i=0; i < districtList.length; i++){
    var updated = fetchData("District " + districtList[i],"Minnesota","winner",data,"mnhouse",null,"District " + districtList[i]);
    if (updated == "GOP Win") { rTally++; }
    else if (updated == "DEM Win") { dTally++; }
  }

  $(".demsCount").html(dTally);
  $(".gopCount").html(rTally);
  $("#dWin").css("width", d3.format("%")(dTally/134));
  $("#rWin").css("width", d3.format("%")(rTally/134));

}

function mnsenCrunch(data){

  var districtList = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67];

  var dTally = 0;
  var rTally = 0;

  for (var i=0; i < districtList.length; i++){
    var updated = fetchData("District " + districtList[i],"Minnesota","winner",data,"mnsenate",null,"District " + districtList[i]);
    if (updated == "GOP Win") { rTally++; }
    else if (updated == "DEM Win") { dTally++; }
  }

  $(".demsCount").html(dTally);
  $(".gopCount").html(rTally);
  $("#dWin").css("width", d3.format("%")((dTally/67)));
  $("#rWin").css("width", d3.format("%")((rTally/67)));

}

//CONDITIONAL DATA LOADING
var apiStringPrez = "https://s3-us-west-2.amazonaws.com/strib-elections-ap-api/us-uspresident-by-county/full.json";
var apiStringSen = "https://s3-us-west-2.amazonaws.com/strib-elections-ap-api/us-ussenate-by-state/full.json";
var apiStringGov = "https://s3-us-west-2.amazonaws.com/strib-elections-ap-api/us-governors-by-state/full.json";
var apiStringMNS = "https://s3-us-west-2.amazonaws.com/strib-elections-ap-api/mn-mnsenate-by-district/full.json";
var apiStringMNH = "https://s3-us-west-2.amazonaws.com/strib-elections-ap-api/mn-mnhouse-by-district/full.json";
var apiStringHouse = "https://s3-us-west-2.amazonaws.com/strib-elections-ap-api/us-ushouse-by-state/full.json";

d3.json(apiStringPrez, function(error, jsonSpillPrez) {
d3.json(apiStringSen, function(error, jsonSpillSen) {
d3.json(apiStringGov, function(error, jsonSpillGov) {
d3.json(apiStringMNS, function(error, jsonSpillMNS) {
d3.json(apiStringMNH, function(error, jsonSpillMNH) {
d3.json(apiStringHouse, function(error, jsonSpillHouse) {

var dataPrez = jsonSpillPrez;
var dataSen = jsonSpillSen;
var dataGov = jsonSpillGov;
var dataMNS = jsonSpillMNS;
var dataMNH = jsonSpillMNH;
var dataHouse = jsonSpillHouse;

mapSpill("president",dataPrez);
mapSpill("senate",dataSen);
mapSpill("governors",dataGov);
mapSpill("mnsenate",dataMNS);
mapSpill("mnhouse",dataMNH);
mapSpill("house",dataHouse);


function loadBars(race){
  if (race == "president") { prezCrunch(dataPrez); } 
  if (race == "senate") { senCrunch(dataSen); } 
  if (race == "governors") { govCrunch(dataGov); } 
  if (race == "mnsenate") { mnsenCrunch(dataMNS); } 
  if (race == "mnhouse") { mnhouseCrunch(dataMNH); } 
  if (race == "house") { houseCrunch(dataHouse); } 
}

loadBars("president");

var loadState = 0;

$(document).ready(function() {
    $(".dataviz").hide();
    $("#" + race).show();
    mapShow(".map","country");
});

//view toggles
$(".raceSwitch").click(function() {
  //button thingies
  $(".raceSwitch").removeClass("selected2");
  $(this).addClass("selected2");

  //show correct race
  $(".dataviz").hide();
  $("#" + $(this).attr("data")).show();

  //show correct legend
  $(".legendBlock").hide();
  $("#" + $(this).attr("legend")).show();
  $(".dparty").html($(this).attr("dLabel"));
  $(".rparty").html($(this).attr("rLabel"));
  
  //show map or carto
  $(".map").hide();
  $("." + $(this).attr("type")).show();
  $("." + $(this).attr("type")).css('display','inline-block');

  //show correct layer
  loadState++;
  mapShow(".map",$(this).attr("layer"));

  //load power bars
  loadBars($(this).attr("data"));
});

$( "#prezButton" ).trigger("click");

});
});
});
});
});
});

//NAV MENU MAGICKS
$('#cssmenu li.active').addClass('open').children('ul').show();
    $('#cssmenu li.has-sub>a').on('click', function(){
        $(this).removeAttr('href');
        var element = $(this).parent('li');
        if (element.hasClass('open')) {
            element.removeClass('open');
            element.find('li').removeClass('open');
            element.find('ul').slideUp(200);
        }
        else {
            element.addClass('open');
            element.children('ul').slideDown(200);
            element.siblings('li').children('ul').slideUp(200);
            element.siblings('li').removeClass('open');
            element.siblings('li').find('li').removeClass('open');
            element.siblings('li').find('ul').slideUp(200);
        }
    });

</script>

</html>