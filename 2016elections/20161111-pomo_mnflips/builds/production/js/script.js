!function e(t,s,r){function i(n,o){if(!s[n]){if(!t[n]){var l="function"==typeof require&&require;if(!o&&l)return l(n,!0);if(a)return a(n,!0);throw new Error("Cannot find module '"+n+"'")}var c=s[n]={exports:{}};t[n][0].call(c.exports,function(e){var s=t[n][1][e];return i(s||e)},c,c.exports,e,t,s,r)}return s[n].exports}for(var a="function"==typeof require&&require,n=0;n<r.length;n++)i(r[n]);return i}({1:[function(e,t,s){function r(e,t,s,r,i,a,n,o){for(var l="",c="",d=0,p=0,u=0,h=0,v=0,m=[],f=[],S=[],g=[],$=[],b=[],w=[],A=0;A<r.races.length;A++)if("ushouse"==i||"mnhouse"==i||"mnsenate"==i){if("District 0"==e){if("District 1"==r.races[A].seatName)for(var E=0;E<r.races[A].reportingUnits.length;E++)if(r.races[A].reportingUnits[E].stateName==t){l=r.races[A].reportingUnits[E].stateName,c=r.races[A].reportingUnits[E].statePostal,d=r.races[A].reportingUnits[E].precinctsReporting,p=r.races[A].reportingUnits[E].precinctsTotal,u=r.races[A].reportingUnits[E].precinctsReportingPct,h=r.races[A].reportingUnits[E].lastUpdated;for(var M=0;M<r.races[A].reportingUnits[E].candidates.length;M++)m[M]=r.races[A].reportingUnits[E].candidates[M].first,f[M]=r.races[A].reportingUnits[E].candidates[M].last,S[M]=r.races[A].reportingUnits[E].candidates[M].party,g[M]=r.races[A].reportingUnits[E].candidates[M].incumbent,$[M]=r.races[A].reportingUnits[E].candidates[M].voteCount,b[M]=r.races[A].reportingUnits[E].candidates[M].winner}}else if(r.races[A].seatName==e)for(var E=0;E<r.races[A].reportingUnits.length;E++){if(r.races[A].reportingUnits[E].stateName==t){l=r.races[A].reportingUnits[E].stateName,c=r.races[A].reportingUnits[E].statePostal,d=r.races[A].reportingUnits[E].precinctsReporting,p=r.races[A].reportingUnits[E].precinctsTotal,u=r.races[A].reportingUnits[E].precinctsReportingPct,h=r.races[A].reportingUnits[E].lastUpdated;for(var M=0;M<r.races[A].reportingUnits[E].candidates.length;M++)m[M]=r.races[A].reportingUnits[E].candidates[M].first,f[M]=r.races[A].reportingUnits[E].candidates[M].last,S[M]=r.races[A].reportingUnits[E].candidates[M].party,g[M]=r.races[A].reportingUnits[E].candidates[M].incumbent,$[M]=r.races[A].reportingUnits[E].candidates[M].voteCount,b[M]=r.races[A].reportingUnits[E].candidates[M].winner}break}}else for(var E=0;E<r.races[A].reportingUnits.length;E++)if(null!=t&&null!=o){if(r.races[A].reportingUnits[E].statePostal==t&&r.races[A].reportingUnits[E].reportingunitName==o){l=r.races[A].reportingUnits[E].stateName,c=r.races[A].reportingUnits[E].statePostal,d=r.races[A].reportingUnits[E].precinctsReporting,p=r.races[A].reportingUnits[E].precinctsTotal,u=r.races[A].reportingUnits[E].precinctsReportingPct,h=r.races[A].reportingUnits[E].lastUpdated;for(var M=0;M<r.races[A].reportingUnits[E].candidates.length;M++)m[M]=r.races[A].reportingUnits[E].candidates[M].first,f[M]=r.races[A].reportingUnits[E].candidates[M].last,S[M]=r.races[A].reportingUnits[E].candidates[M].party,g[M]=r.races[A].reportingUnits[E].candidates[M].incumbent,$[M]=r.races[A].reportingUnits[E].candidates[M].voteCount,b[M]=r.races[A].reportingUnits[E].candidates[M].winner;break}}else if(null!=t){if(r.races[A].reportingUnits[E].stateName==t){l=r.races[A].reportingUnits[E].stateName,c=r.races[A].reportingUnits[E].statePostal,d=r.races[A].reportingUnits[E].precinctsReporting,p=r.races[A].reportingUnits[E].precinctsTotal,u=r.races[A].reportingUnits[E].precinctsReportingPct,h=r.races[A].reportingUnits[E].lastUpdated;for(var M=0;M<r.races[A].reportingUnits[E].candidates.length;M++)m[M]=r.races[A].reportingUnits[E].candidates[M].first,f[M]=r.races[A].reportingUnits[E].candidates[M].last,S[M]=r.races[A].reportingUnits[E].candidates[M].party,g[M]=r.races[A].reportingUnits[E].candidates[M].incumbent,$[M]=r.races[A].reportingUnits[E].candidates[M].voteCount,b[M]=r.races[A].reportingUnits[E].candidates[M].winner;break}}else if(null!=e&&r.races[A].reportingUnits[E].fipsCode==e){l=r.races[A].reportingUnits[E].stateName,c=r.races[A].reportingUnits[E].statePostal,d=r.races[A].reportingUnits[E].precinctsReporting,p=r.races[A].reportingUnits[E].precinctsTotal,u=r.races[A].reportingUnits[E].precinctsReportingPct,h=r.races[A].reportingUnits[E].lastUpdated;for(var M=0;M<r.races[A].reportingUnits[E].candidates.length;M++)m[M]=r.races[A].reportingUnits[E].candidates[M].first,f[M]=r.races[A].reportingUnits[E].candidates[M].last,S[M]=r.races[A].reportingUnits[E].candidates[M].party,g[M]=r.races[A].reportingUnits[E].candidates[M].incumbent,$[M]=r.races[A].reportingUnits[E].candidates[M].voteCount,b[M]=r.races[A].reportingUnits[E].candidates[M].winner;break}for(var A=0;A<$.length;A++)w.push({first:m[A],last:f[A],party:S[A],incumbent:g[A],voteCount:$[A],winner:b[A]});w.sort(function(e,t){return t.voteCount-e.voteCount}),m=[],f=[],S=[],g=[],$=[],b=[];for(var A=0;A<w.length;A++)m.push(w[A].first),f.push(w[A].last),S.push(w[A].party),g.push(w[A].incumbent),$.push(w[A].voteCount),b.push(w[A].winner);for(var A=0;A<$.length;A++)v+=$[A];var C=($[0],"");null!=a&&(C="<span class='ev'> - "+a+" electoral votes</span>");var D=t;D=null!=n?n+", "+c:t;for(var N=[],A=0;A<g.length;A++)1==g[A]?N[A]="*":N[A]="";for(var x=[],A=0;A<f.length;A++)"X"==b[A]?x[A]="&#x2714;":"R"==b[A]?x[A]="-R":x[A]="";for(var U=[],A=0;A<f.length;A++){var k=$[A]/v;"GOP"==S[A]?U[A]=k>=.8?"#d34A44":k>=.7?"#d34A44":k>=.5?"#f7816E":k>0?"#f7816E":"#bbbbbb":"Dem"==S[A]?U[A]=k>=.8?"#3585BC":k>=.7?"#3585BC":k>=.5?"#72A9D6":k>0?"#72A9D6":"#bbbbbb":U[A]=k>0?"#7CB342":"#bbbbbb"}if("pct"==s)return u;if("timestamp"==s){return new Date(h)}if("votesT"==s)return v;if("votesD"==s)for(var A=0;A<f.length;A++)if("Dem"==S[A])return $[A];if("votesR"==s)for(var A=0;A<f.length;A++)if("GOP"==S[A])return $[A];if("winner"==s)for(var A=0;A<f.length;A++)if("X"==b[A])return"GOP"==S[A]?"GOP Win":"Dem"==S[A]?"DEM Win":"IND Win";if("lean"==s)return"Wisconsin"==e||"Michigan"==e||"Florida"==e||"Ohio"==e||"Pennsylvania"==e||"Iowa"==e?"#550000":"X"==b[0]&&"GOP"==S[0]?"#d34A44":"X"==b[0]&&"Dem"==S[0]?"#3585BC":"X"==b[0]?"#7CB342":"GOP"==S[0]&&0!=$[0]?"#f7816E":"Dem"==S[0]&&0!=$[0]?"#72A9D6":($[0],"#bbbbbb");if("colors"==s)return U[0];if("tooltip"==s){var T="<div class='districtName'>"+D+"</div>";if(f.length<2)var R=f.length;else var R=2;for(var A=0;A<R;A++){var k="0%";v>0&&(k=d3.format("%")($[A]/v)),T+="<div class='candidate'>"+N[A]+f[A]+" "+x[A]+"</div><div class='pct' style='background-color:"+U[A]+"'>"+k+"</div><div class='smallbreak'>"}return T}if("table"==s){var y="";if(f.length<3)var R=f.length;else var R=3;for(var B="<div class='districtName'>"+D+" "+C+"</div><div class='resultsRow'><div class='resultsHead'>Candidate</div><div class='counts resultsHead'>#</div><div class='pct resultsHead'>%</div></div>",A=0;A<R;A++){var k="0%";v>0&&(k=d3.format(".1%")($[A]/v)),y="","X"==b[A]&&"GOP"==S[A]?y="republican":"X"==b[A]&&"Dem"==S[A]?y="democrat":"X"==b[A]&&(y="green4"),"president"==i&&null!=o&&(y=U[A],x[A]=""),B+="<div class='resultsRow'><div class='candidate'>"+N[A]+m[A]+" "+f[A]+" ("+S[A]+") "+x[A]+"</div><div class='counts'>"+d3.format(",")($[A])+"</div><div class='pct "+y+"' style='background-color:"+U[A]+";'>"+k+"</div></div>"}return B+"<div class='reportingRow'><span class='pctReported'>"+d+"</span> / <span class='pctAll'>"+p+"</span> ("+u+"%) precincts reporting</div>"}if("board"==s){for(var P="0%",I="0%",W="",_="",O=m[0]+" "+f[0],G=m[1]+" "+f[1],V="",j="",F=!1,A=0;A<2;A++)"Dem"==S[A]&&"0%"==P?(P=d3.format("%")($[A]/v),W=U[A],"X"==b[A]&&(V="democrat",F=!0)):"Dem"==S[A]&&"0%"!=P?(I=d3.format("%")($[A]/v),_=U[A],"X"==b[A]&&(j="democrat",F=!0)):"GOP"==S[A]&&"0%"==I?(I=d3.format("%")($[A]/v),_=U[A],"X"==b[A]&&(j="republican",F=!0)):"GOP"==S[A]&&"0%"!=I&&(P=d3.format("%")($[A]/v),W=U[A],"X"==b[A]&&(V="republican",F=!0));if("president"==i&&null!=o&&1==F&&("Dem"==S[0]?(V="democrat",j=""):(V="",j="republican")),0==v&&(P="0%",I="0%"),"president"==i&&null!=o)return"<div id='evcd"+n+"' class='tableRow evcd' name='"+n+"'><div class='stateBlockR'>"+n+"</div><div class='pctBox'>"+a+"</div><div class='pctBox "+V+"' style='border:2px solid "+W+";'>"+P+"</div><div class='pctBox "+j+"' style='border:2px solid "+_+";'>"+I+"</div><div class='pctBox reporting'>"+u+"%</div><div class='searchTerms'>"+l+" "+O+" "+G+"</div></div>";if("president"==i)return"<div class='tableRow' name='"+c+"'><div class='stateBlockR'>"+c+"</div><div class='pctBox'>"+a+"</div><div class='pctBox "+V+"' style='border:2px solid "+W+";'>"+P+"</div><div class='pctBox "+j+"' style='border:2px solid "+_+";'>"+I+"</div><div class='pctBox reporting'>"+u+"%</div><div class='searchTerms'>"+l+" "+O+" "+G+"</div></div>";if("senate"==i||"governors"==i)return"<div class='tableRow' name='"+c+"'><div class='stateBlockR'>"+c+"</div><div class='pctBox "+V+"' style='border:2px solid "+W+";'>"+P+"</div><div class='pctBox "+j+"' style='border:2px solid "+_+";'>"+I+"</div><div class='pctBox reporting'>"+u+"%</div><div class='searchTerms'>"+l+" "+O+" "+G+"</div></div>";if("mnhouse"==i||"mnsenate"==i)return"<div class='tableRow' name='"+n+"'><div class='stateBlockR'>"+n+"</div><div class='pctBox "+V+"' style='border:2px solid "+W+";'>"+P+"</div><div class='pctBox "+j+"' style='border:2px solid "+_+";'>"+I+"</div><div class='pctBox reporting'>"+u+"%</div><div class='searchTerms'>"+l+" "+O+" "+G+"</div></div>";if("ushouse"==i)return"<div class='tableRow' name='Minnesota"+n+"'><div class='stateBlockR'>MN"+n+"</div><div class='pctBox "+V+"' style='border:2px solid "+W+";'>"+P+"</div><div class='pctBox "+j+"' style='border:2px solid "+_+";'>"+I+"</div><div class='pctBox reporting'>"+u+"%</div><div class='searchTerms'>"+l+" "+O+" "+G+"</div></div>"}}function i(e){$("#infobox").html(e)}function a(e,t,s,a,n,o,l,c,d,p,u){function h(e){if(e&&S!==e){var t=E.centroid(e);t[0],t[1],3,S=e}else g/2,b/2,3,S=null;"precincts"!=n&&C.selectAll("."+n+" path").classed("faded",!0).classed("active",S&&function(e){return e===S})}function v(e){var t,s,r;E.centroid(e);t=429.8542649319006,s=90.27472769218944,r=5,C.transition().duration(200).attr("transform","translate("+g/2+","+b/2+")scale("+r+")translate("+-t+","+-s+")").style("stroke-width","0"),"precincts"==n?C.selectAll("path").style("stroke-width","0.03px"):C.selectAll("path").style("stroke-width","0.3px")}function m(e){var t,s,r;E.centroid(e);t=439.8542649319006,s=103.27472769218944,r=25,C.transition().duration(200).attr("transform","translate("+g/2+","+b/2+")scale("+r+")translate("+-t+","+-s+")").style("stroke-width","0"),C.selectAll("path").style("stroke-width","0.03px")}function f(e){var t,s,r;if(e&&S!==e){var i=E.centroid(e);t=i[0],s=i[1],r=1,S=e}else t=g/2,s=b/2,r=1,S=null;C.selectAll("."+n+" path").classed("faded",!1).classed("active",S&&function(e){return e===S}),C.transition().duration(200).attr("transform","translate("+g/2+","+b/2+")scale("+r+")translate("+-t+","+-s+")").style("stroke-width","0.5px"),C.selectAll("path").style("stroke-width",".5px")}if("us"==o)var S,g=800,b=600,A=d3.geo.albersUsa().scale(1e3).translate([400,210]);else if("mn"==o)var S,g=800,b=600,A=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==o)var S,g=800,b=600,A=d3.geo.mercator().scale([21e3]).center([-92.7,45.059134]);var E=d3.geo.path().projection(A),M=d3.select(e+" svg").attr("width",g).attr("height",b),C=M.append("g").attr("class","mappage states "+n+" "+l);d3.json("shapefiles/"+a,function(e,t){C.selectAll("path").data(t.features).enter().append("path").attr("d",E).on("click",h).attr("precinctName",function(e){return e.properties.NAME}).style("fill",function(e){if("precincts"==n){for(var t=0;t<c.length;t++)if(Number(c[t].vtdcode)==Number(e.properties.VTDID)){if("D"==c[t].Winner)return c[t].D>=.7?"#3585BC":"#72A9D6";if("R"==c[t].Winner)return c[t].R>=.7?"#d34A44":"#f7816E"}return"#cccccc"}if("president"==n)return $("#president .sideStates .block").each(function(t,s){if($(this).hasClass(e.properties.STUSPS)){var i=r(e.properties.NAME,e.properties.NAME,"lean",c,n);$(this).css("background-color",i)}}),r(e.properties.NAME,e.properties.NAME,"lean",c,n);if("senate"==n)return $("#senate .sideStates .block").each(function(t,s){if($(this).hasClass(e.properties.STUSPS)){var i=r(e.properties.NAME,e.properties.NAME,"lean",c,n);$(this).css("background-color",i)}}),r(e.properties.NAME,e.properties.NAME,"lean",c,n);if("governors"==n)return $("#governors .sideStates .block").each(function(t,s){if($(this).hasClass(e.properties.STUSPS)){var i=r(e.properties.NAME,e.properties.NAME,"lean",c,n);$(this).css("background-color",i)}}),r(e.properties.NAME,e.properties.NAME,"lean",c,n);if("county"==n)return r(e.properties.GEOID,null,"colors",c,n);if("countyShift"==n){var s=["01005","08015","12103","13007","17003","19045","23025","23031","25005","27069","28107","35007","36077","36103","37017","37117","37127","45031","51029","53009","53015","53045","55023","05147","19111","23007","23027","19171","09009","09011","12065","18035","36105","36115","37155","38005","39043","26053","26099","27013","27023","27027","27073","27107","30005","30085","33009","34033","51057","53049","42049","45029","45065","46137","18123","21063","55011","55029","55069","55121","01035","06099","10001","13289","33017","34015","36053","42095","45017","36063","36075","36091","36113","23003","26115","27061","08055","51033","51125","55001","55043","55057","08071","17155","25027","36071","48245","44007","26073","50009","39123","36031","37153","23013","13239","17187","19089","19099","19105","19115","18091","19019","19175","26101","46031","36011","26159","36027","27055","39155","27155","37077","38073","39007","41057","26017","45011","51580","53027","19127","55033","55053","19033","19043","55099","19131","55139","19005","19015","19031","19067","46091","50001","23001","13099","17131","19187","19191","17195","17201","35061","17071","17085","36033","17095","36083","36085","36089","36099","12087","51550","28149","25013","26025","27007","31173","27087","27103","33013","27131","27151","28017","30041","35023","44003","45023","50015","18167","19017","39093","47069","19037","19039","19061","19065","39113","39133","19101","39143","19139","19179","19195","36007","38081","55021","55059","17057","55065","55091","17073","55101","55123","12111","13093","39173","21073","23019","27071","26155","41009","50021","18127","51193","55113","27099","27169","37073","27045","46037","46109","55041","26045","19057","23017","28113","55077","19097","36023","19157","50013","27047","13225","38091","42079","26085","26145","55103","08021","17015"];dFlips=["06019","13135","13151","49035","06059","06065","30031","48261","51121","42029","06057","42027","24003","49043","53075","13067","31109","37189","31055","48157","33011"];for(var t=0;t<s.length;t++)if(s[t]==e.properties.GEOID)return w++,"#550000";for(var t=0;t<dFlips.length;t++)if(dFlips[t]==e.properties.GEOID)return"#0B4474"}else{if("house"==n)return r("District "+e.properties.DISTRICT,e.properties.STATENAME,"lean",c,"ushouse",null,"District "+e.properties.DISTRICT);if("mnsenate"==n||"mnhouse"==n)return r("District "+e.properties.DISTRICT,"Minnesota","lean",c,n,null,"District "+e.properties.DISTRICT)}}).on("mousedown",function(e,t){e.properties.NAME;if($(".district").removeClass("selected"),$(".tableRow").removeClass("selectedBox"),$(".tableRow[name="+e.properties.STUSPS+"]").addClass("selectedBox"),$(".tableRow[name="+e.properties.DISTRICT+"]").addClass("selectedBox"),"president"==n||"senate"==n||"governors"==n)i(r(e.properties.NAME,e.properties.NAME,"table",c,n)),$(".block").removeClass("blockSelect"),$("."+e.properties.STUSPS).addClass("blockSelect");else if("county"==n||"countyShift"==n)i(r(e.properties.GEOID,null,"table",c,n,null,e.properties.NAME));else if("house"==n){if(0==e.properties.DISTRICT)var s="1";else var s=e.properties.DISTRICT;i(r("District "+e.properties.DISTRICT,e.properties.STATENAME,"table",c,"ushouse",null,"District "+s)),"Minnesota"==e.properties.STATENAME&&$(".tableRow[name="+e.properties.STATENAME+e.properties.DISTRICT+"]").addClass("selectedBox")}else if("mnsenate"==n||"mnhouse"==n){if("32B"==e.properties.DISTRICT)return i("<div class='districtName'>District 32B, MN</div><div>No race. A special election has been called for Feb. 14, 2017.</div>");i(r("District "+e.properties.DISTRICT,"Minnesota","table",c,n,null,"District "+e.properties.DISTRICT))}}).style("stroke-width",function(e){return"precincts"!=n?"0.3px":"0.05px"}).style("stroke","#fff").attr("id",function(e){return"president"==n?e.properties.STUSPS:"senate"==n?e.properties.STUSPS+"s":"governors"==n?e.properties.STUSPS+"g":"mnsenate"==n?"mns"+e.properties.DISTRICT:"mnhouse"==n?"mnh"+e.properties.DISTRICT:"house"==n?e.properties.STATENAME+""+e.properties.DISTRICT:null}).attr("class",function(e){if("precincts"==n){for(var t=0;t<c.length;t++)Number(c[t].vtdcode)==Number(e.properties.VTDID)&&!0;if(!1)return"noclicky"}return"president"==n?"district "+e.properties.STUSPS:"senate"!=n||"Montana"!=e.properties.NAME&&"Wyoming"!=e.properties.NAME&&"Nebraska"!=e.properties.NAME&&"Minnesota"!=e.properties.NAME&&"New Mexico"!=e.properties.NAME&&"Texas"!=e.properties.NAME&&"Mississippi"!=e.properties.NAME&&"Tennessee"!=e.properties.NAME&&"West Virginia"!=e.properties.NAME&&"Virginia"!=e.properties.NAME&&"New Jersey"!=e.properties.NAME&&"Delaware"!=e.properties.NAME&&"Rhode Island"!=e.properties.NAME&&"Massachusetts"!=e.properties.NAME&&"Maine"!=e.properties.NAME&&"Michigan"!=e.properties.NAME?"governors"==n&&"Washington"!=e.properties.NAME&&"Oregon"!=e.properties.NAME&&"Montana"!=e.properties.NAME&&"Utah"!=e.properties.NAME&&"Missouri"!=e.properties.NAME&&"Montana"!=e.properties.NAME&&"Montana"!=e.properties.NAME&&"Montana"!=e.properties.NAME&&"West Virginia"!=e.properties.NAME&&"North Carolina"!=e.properties.NAME&&"Delaware"!=e.properties.NAME&&"New Hampshire"!=e.properties.NAME&&"Vermont"!=e.properties.NAME&&"Indiana"!=e.properties.NAME&&"North Dakota"!=e.properties.NAME?"noclicky district "+e.properties.STUSPS:"county"==n||"countyShift"==n?46==e.properties.STATEFP&&"Shannon"==e.properties.NAME?"noclicky district":27==e.properties.STATEFP?"Hennepin"==e.properties.NAME||"Ramsey"==e.properties.NAME||"Washington"==e.properties.NAME||"Carver"==e.properties.NAME||"Scott"==e.properties.NAME||"Dakota"==e.properties.NAME||"Anoka"==e.properties.NAME?"mn metro":"mn":2==e.properties.STATEFP?"noclicky district":"areas district":"house"==n?"Minnesota"==e.properties.STATENAME?"mn":"areas district":void 0:"noclicky  district "+e.properties.STUSPS}).call(d3.helper.tooltip(function(e,t){if($(window).width()>500){if("president"==n||"senate"==n||"governors"==n)return r(e.properties.NAME,e.properties.NAME,"tooltip",c,n);if("county"==n||"countyShift"==n)return r(e.properties.GEOID,null,"tooltip",c,n,null,e.properties.NAME);if(n="precincts"){for(var t=0;t<c.length;t++)if(Number(c[t].vtdcode)==Number(e.properties.VTDID))return"<div class='districtName'>"+e.properties.PCTNAME+"</div><div class='candidate'>Clinton &#x2714;</div><div class='pct' style='background-color:#72A9D6'>"+d3.format("%")(c[t].D)+"</div><div class='smallbreak'></div><div class='candidate'>Trump</div><div class='pct' style='background-color:#d34A44'>"+d3.format("%")(c[t].R)+"</div>";return"<div class='districtName'>"+e.properties.PCTNAME+"</div>"}}else $(".tooltip").hide()})),"president"!=n&&"senate"!=n&&"governors"!=n||C.selectAll("text").data(t.features).enter().append("text").attr("fill","white").style("font-weight",900).attr("class","passthrough").attr("transform",function(e){var t=E.centroid(e),s=t[0],r=t[1];return"FL"==e.properties.STUSPS&&(s+=11),"MI"==e.properties.STUSPS&&(s+=9,r+=18),"AK"==e.properties.STUSPS&&(r-=4),"LA"==e.properties.STUSPS&&(s-=8,r-=4),"translate("+s+","+r+")"}).attr("text-anchor","middle").attr("dy",".35em").text(function(e){return"president"==n&&"MA"!=e.properties.STUSPS&&"RI"!=e.properties.STUSPS&&"CT"!=e.properties.STUSPS&&"DE"!=e.properties.STUSPS&&"DC"!=e.properties.STUSPS&&"MD"!=e.properties.STUSPS&&"NH"!=e.properties.STUSPS&&"VT"!=e.properties.STUSPS&&"NJ"!=e.properties.STUSPS?e.properties.STUSPS:"senate"==n&&"MA"!=e.properties.STUSPS&&"RI"!=e.properties.STUSPS&&"CT"!=e.properties.STUSPS&&"DE"!=e.properties.STUSPS&&"DC"!=e.properties.STUSPS&&"MD"!=e.properties.STUSPS&&"NH"!=e.properties.STUSPS&&"VT"!=e.properties.STUSPS&&"NJ"!=e.properties.STUSPS&&"MT"!=e.properties.STUSPS&&"WY"!=e.properties.STUSPS&&"NE"!=e.properties.STUSPS&&"NM"!=e.properties.STUSPS&&"TX"!=e.properties.STUSPS&&"MN"!=e.properties.STUSPS&&"MI"!=e.properties.STUSPS&&"MS"!=e.properties.STUSPS&&"TN"!=e.properties.STUSPS&&"WV"!=e.properties.STUSPS&&"VA"!=e.properties.STUSPS&&"ME"!=e.properties.STUSPS?e.properties.STUSPS:"governors"==n&&"OH"!=e.properties.STUSPS&&"MI"!=e.properties.STUSPS&&"AZ"!=e.properties.STUSPS&&"ME"!=e.properties.STUSPS&&"NY"!=e.properties.STUSPS&&"PA"!=e.properties.STUSPS&&"VA"!=e.properties.STUSPS&&"FL"!=e.properties.STUSPS&&"SC"!=e.properties.STUSPS&&"GA"!=e.properties.STUSPS&&"MS"!=e.properties.STUSPS&&"AL"!=e.properties.STUSPS&&"KY"!=e.properties.STUSPS&&"TN"!=e.properties.STUSPS&&"WI"!=e.properties.STUSPS&&"IL"!=e.properties.STUSPS&&"AR"!=e.properties.STUSPS&&"LA"!=e.properties.STUSPS&&"MN"!=e.properties.STUSPS&&"IA"!=e.properties.STUSPS&&"TX"!=e.properties.STUSPS&&"KS"!=e.properties.STUSPS&&"OK"!=e.properties.STUSPS&&"SD"!=e.properties.STUSPS&&"NE"!=e.properties.STUSPS&&"NM"!=e.properties.STUSPS&&"CO"!=e.properties.STUSPS&&"ID"!=e.properties.STUSPS&&"WY"!=e.properties.STUSPS&&"CA"!=e.properties.STUSPS&&"NV"!=e.properties.STUSPS&&"AK"!=e.properties.STUSPS&&"HI"!=e.properties.STUSPS&&"MA"!=e.properties.STUSPS&&"RI"!=e.properties.STUSPS&&"CT"!=e.properties.STUSPS&&"DE"!=e.properties.STUSPS&&"DC"!=e.properties.STUSPS&&"MD"!=e.properties.STUSPS&&"NH"!=e.properties.STUSPS&&"VT"!=e.properties.STUSPS&&"NJ"!=e.properties.STUSPS?e.properties.STUSPS:void 0}),C.append("path").attr("class","state-borders").attr("d",E),console.log(w)});d3.behavior.zoom().on("zoom",function(){C.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),C.selectAll("circle").attr("d",E.projection(A)),C.selectAll("path").attr("d",E.projection(A))});$(".zoom").click(function(){C.selectAll("."+n+" path").classed("faded",!1).classed("active",!1)}),$(".uszoom").on("mousedown",function(){f(),d3.selectAll(".areas").classed("gone",!1),d3.selectAll(".mn").classed("gone",!1),d3.selectAll(".metro").classed("gone",!1)}),$(".mnzoom").on("mousedown",function(){v(),d3.selectAll(".areas").classed("gone",!0),d3.selectAll(".mn").classed("gone",!1)}),$(".metrozoom").on("mousedown",function(){m(),d3.selectAll(".areas").classed("gone",!0),d3.selectAll(".mn").classed("gone",!0),d3.selectAll(".metro").classed("gone",!1)}),d3.helper={},d3.helper.tooltip=function(e){return function(t){var s,r=d3.select("body").node();t.on("mouseover",function(t,i){d3.select("body").selectAll("div.tooltip").remove(),s=d3.select("body").append("div").attr("class","tooltip");var a=d3.mouse(r);s.style("left",a[0]-160+"px").style("top",a[1]-15+"px").style("position","absolute").style("z-index",1001);e(t,i)}).on("mousemove",function(t,i){var a=d3.mouse(r);s.style("left",a[0]-160+"px").style("top",a[1]-15+"px");var n=e(t,i)||"";s.html(n)}).on("mouseout",function(e,t){s.remove()})}};var D=$(e+" svg");$(document).ready(function(){var e=D.parent().width();D.attr("width",e),D.attr("height",e/(800/600))}),$(window).on("resize",function(){$(window).width()>=970&&$("#mobmenu").hide(),D.attr("style","");var e=D.parent().width();D.attr("width",e),D.attr("height",e/(800/600))})}function n(e,t){d3.selectAll(".mappage").each(function(e){d3.select(this).classed(t)?d3.select(this).style("display","block"):d3.select(this).style("display","none")})}function o(e,t,s){"president"==e&&(a("#president .geo","#districtName","#chart","us_states.json",e,"us","country",t),a("#president .geo","#districtName","#chart","us_counties.json","county","us","counties",t),a("#president .geo","#districtName","#chart","us_counties.json","countyShift","us","countiesShift",t),a("#president .geo","#infobox","#chart","mnprecincts.json","precincts","us","precincts",s)),"house"==e&&(a("#house .geo","#districtName","#chart","uscongress.json",e,"us","country",t),houseCarto(t)),"senate"==e&&a("#senate .geo","#districtName","#chart","us_states.json",e,"us","country",t),"governors"==e&&a("#governors .geo","#districtName","#chart","us_states.json",e,"us","country",t),"mnhouse"==e&&(a("#mnhouse .mapState","#districtName","#chart","mnleg.json",e,"mn","country",t),a("#mnhouse .mapMetro","#districtName","#chart","mnleg_metro.json",e,"metro","country",t)),"mnsenate"==e&&(a("#mnsenate .mapState","#districtName","#chart","mnsenate.json",e,"mn","country",t),a("#mnsenate .mapMetro","#districtName","#chart","mnsenate_metro.json",e,"metro","country",t))}function l(e,t){$("#allResults .president").html("");for(var s=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","District of Columbia","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],i=[9,3,11,6,55,9,7,3,3,29,16,4,4,20,11,6,6,8,8,2,10,11,16,10,6,10,3,2,6,4,14,5,29,15,3,18,7,7,20,4,9,3,11,38,6,3,13,12,5,10,3],a=0,n=0,o=0,l=0;l<s.length;l++){var c=r(null,s[l],"winner",e,"president",null,null,null);"GOP Win"==c?n+=i[l]:"DEM Win"==c?a+=i[l]:"IND Win"==c&&(o+=i[l]),$("#allResults .president").append(r(null,s[l],"board",e,"president",i[l],null))}var d=r(null,"ME","lean",t,"president",null,null,"District 1"),p=r(null,"ME","lean",t,"president",null,null,"District 2"),u=r(null,"NE","lean",t,"president",null,null,"District 1"),h=r(null,"NE","lean",t,"president",null,null,"District 2"),v=r(null,"NE","lean",t,"president",null,null,"District 3");$(".ME01").css("background-color",d),$(".ME02").css("background-color",p),$(".NE01").css("background-color",u),$(".NE02").css("background-color",h),$(".NE03").css("background-color",v),$("#ME01").css("fill",d),$("#ME02").css("fill",p),$("#NE01").css("fill",u),$("#NE02").css("fill",h),$("#NE03").css("fill",v),$("#allResults .president").append(r("District 1","ME","board",t,"president",1,"ME01","District 1")),$("#allResults .president").append(r("District 2","ME","board",t,"president",1,"ME02","District 2")),$("#allResults .president").append(r("District 1","NE","board",t,"president",1,"NE01","District 1")),$("#allResults .president").append(r("District 2","NE","board",t,"president",1,"NE02","District 2")),$("#allResults .president").append(r("District 3","NE","board",t,"president",1,"NE03","District 3"));var m=r("District 1","ME","votesR",t,"president",1,"ME01","District 1"),f=r("District 1","ME","votesD",t,"president",1,"ME01","District 1"),S=r("District 2","ME","votesR",t,"president",1,"ME02","District 2"),g=r("District 2","ME","votesD",t,"president",1,"ME02","District 2"),b=r("District 1","NE","votesR",t,"president",1,"NE01","District 1"),w=r("District 1","NE","votesD",t,"president",1,"NE01","District 1"),A=r("District 2","NE","votesR",t,"president",1,"NE02","District 2"),E=r("District 2","NE","votesD",t,"president",1,"NE02","District 2"),M=r("District 3","NE","votesR",t,"president",1,"NE03","District 3"),C=r("District 3","NE","votesD",t,"president",1,"NE03","District 3"),D=r(null,"Maine","winner",e,"president",null,null,null),N=r(null,"Nebraska","winner",e,"president",null,null,null);"GOP Win"!=D&&"DEM Win"!=D||(m>f&&n++,m<f&&a++,S>g&&n++,S<g&&a++),"GOP Win"!=N&&"DEM Win"!=N||(b>w&&n++,b<w&&a++,A>E&&n++,A<E&&a++,M>C&&n++,M<C&&a++);var x=r(null,"United States","winner",e,"president",null,null);"GOP Win"==x?$("#rMark").html("&#x2714;"):"DEM Win"==x&&$("#dMark").html("&#x2714;"),$(".demsCount").html(a),$(".gopCount").html(n),$("#dWin").css("width",d3.format("%")(a/538)),$("#rWin").css("width",d3.format("%")(n/538)),$("#iWin").css("width",d3.format("%")(o/538)),$("#dChange").html(""),$("#rChange").html(""),$(".filter_box").keyup(function(e){$("#allResults .president .tableRow").hide(),$("#allResults .president .tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$("#allResults .president .tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".president .tableRow").click(function(){$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e=$(this).attr("name");$(".cartoState").removeClass("selectedBox"),$("#cartogram #"+$(this).attr("name")).addClass("selectedBox"),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()});var U=r(null,"United States","timestamp",e,"president",null,null);$("#timestamp").html("Last update: "+U.toLocaleTimeString())}function c(e){$("#allResults .senate").html(""),$("#rMark, #dMark").html("");for(var t=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maryland","Missouri","Nevada","New Hampshire","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","South Carolina","South Dakota","Utah","Vermont","Washington","Wisconsin"],s=36,i=30,a=0,n=0;n<t.length;n++){var o=r(null,t[n],"winner",e,"senate",null,null);"GOP Win"==o?i++:"DEM Win"==o?s++:"IND Win"==o&&a++,$("#allResults .senate").append(r(null,t[n],"board",e,"senate",null,null))}$(".demsCount").html(s),$(".gopCount").html(i),$("#dWin").css("width",d3.format("%")(s/100)),$("#rWin").css("width",d3.format("%")(i/100)),$("#iWin").css("width",d3.format("%")(a/100)),$("#dChange").html(d3.format("+")(s-46)),$("#rChange").html(d3.format("+")(i-54)),$(".filter_box").keyup(function(e){$("#allResults .senate .tableRow").hide(),$("#allResults .senate .tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$("#allResults .senate .tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".senate .tableRow").click(function(){d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e=$(this).attr("name")+"s";$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()})}function d(e){$("#allResults .governors").html(""),$("#rMark, #dMark").html("");for(var t=["Delaware","Indiana","Missouri","Montana","New Hampshire","North Carolina","North Dakota","Oregon","Utah","Vermont","Washington","West Virginia"],s=10,i=27,a=1,n=0;n<t.length;n++){var o=r(null,t[n],"winner",e,"governors",null,null);"GOP Win"==o?i++:"DEM Win"==o?s++:"IND Win"==o&&a++,$("#allResults .governors").append(r(null,t[n],"board",e,"governors",null,null))}$(".demsCount").html(s),$(".gopCount").html(i),$("#dWin").css("width",d3.format("%")(s/50)),$("#rWin").css("width",d3.format("%")(i/50)),$("#iWin").css("width",d3.format("%")(a/50)),$("#dChange").html(d3.format("+")(s-18)),$("#rChange").html(d3.format("+")(i-31)),$(".filter_box").keyup(function(e){$("#allResults .governors .tableRow").hide(),$("#allResults .governors .tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$("#allResults .governors .tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".governors .tableRow").click(function(){d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e=$(this).attr("name")+"g"
;$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()})}function p(e){$("#allResults .house").html(""),$("#rMark, #dMark").html("");for(var t=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],s=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53],i=0,a=0,n=0,o=0;o<s.length;o++)for(var l=0;l<t.length;l++){var c=r("District "+s[o],t[l],"winner",e,"ushouse",null,"District "+s[o]);"GOP Win"==c?a++:"DEM Win"==c?i++:"IND Win"==c&&n++}$("#allResults .house").append(r("District 1","Minnesota","board",e,"ushouse",null,"1")),$("#allResults .house").append(r("District 2","Minnesota","board",e,"ushouse",null,"2")),$("#allResults .house").append(r("District 3","Minnesota","board",e,"ushouse",null,"3")),$("#allResults .house").append(r("District 4","Minnesota","board",e,"ushouse",null,"4")),$("#allResults .house").append(r("District 5","Minnesota","board",e,"ushouse",null,"5")),$("#allResults .house").append(r("District 6","Minnesota","board",e,"ushouse",null,"6")),$("#allResults .house").append(r("District 7","Minnesota","board",e,"ushouse",null,"7")),$("#allResults .house").append(r("District 8","Minnesota","board",e,"ushouse",null,"8")),$(".demsCount").html(i),$(".gopCount").html(a),$("#dWin").css("width",d3.format("%")(i/435)),$("#rWin").css("width",d3.format("%")(a/435)),$("#iWin").css("width",d3.format("%")(n/435)),$("#dChange").html(d3.format("+")(i-188)),$("#rChange").html(d3.format("+")(a-247)),$(".filter_box").keyup(function(e){$("#allResults .house .tableRow").hide(),$("#allResults .house .tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$("#allResults .house .tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".house .tableRow").click(function(){d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e=$(this).attr("name");$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click();var t=$(this).attr("name")+"c";$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Click()})}function u(e){$("#allResults .mnhouse").html(""),$("#rMark, #dMark").html("");for(var t=["1A","1B","2A","2B","3A","3B","4A","4B","5A","5B","6A","6B","7A","7B","8A","8B","9A","9B","10A","10B","11A","11B","12A","12B","13A","13B","14A","14B","15A","15B","16A","16B","17A","17B","18A","18B","19A","19B","20A","20B","21A","21B","22A","22B","23A","23B","24A","24B","25A","25B","26A","26B","27A","27B","28A","28B","29A","29B","30A","30B","31A","31B","32A","32B","33A","33B","34A","34B","35A","35B","36A","36B","37A","37B","38A","38B","39A","39B","40A","40B","41A","41B","42A","42B","43A","43B","44A","44B","45A","45B","46A","46B","47A","47B","48A","48B","49A","49B","50A","50B","51A","51B","52A","52B","53A","53B","54A","54B","55A","55B","56A","56B","57A","57B","58A","58B","59A","59B","60A","60B","61A","61B","62A","62B","63A","63B","64A","64B","65A","65B","66A","66B","67A","67B"],s=0,i=0,a=0,n=0;n<t.length;n++){var o=r("District "+t[n],"Minnesota","winner",e,"mnhouse",null,"District "+t[n]);"GOP Win"==o?i++:"DEM Win"==o?s++:"IND Win"==o&&a++,$("#allResults .mnhouse").append(r("District "+t[n],"Minnesota","board",e,"mnhouse",null,t[n]))}$(".demsCount").html(s),$(".gopCount").html(i),$("#dWin").css("width",d3.format("%")(s/134)),$("#rWin").css("width",d3.format("%")(i/134)),$("#iWin").css("width",d3.format("%")(a/134)),$("#dChange").html(d3.format("+")(s-61)),$("#rChange").html(d3.format("+")(i-73)),$(".filter_box").keyup(function(e){$("#allResults .mnhouse .tableRow").hide(),$("#allResults .mnhouse .tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$("#allResults .mnhouse .tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".mnhouse .tableRow").click(function(){d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e="mnh"+$(this).attr("name");$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()})}function h(e){$("#allResults .mnsenate").html(""),$("#rMark, #dMark").html("");for(var t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],s=0,i=0,a=0,n=0;n<t.length;n++){var o=r("District "+t[n],"Minnesota","winner",e,"mnsenate",null,"District "+t[n]);"GOP Win"==o?i++:"DEM Win"==o?s++:"IND Win"==o&&a++,$("#allResults .mnsenate").append(r("District "+t[n],"Minnesota","board",e,"mnsenate",null,t[n]))}$(".demsCount").html(s),$(".gopCount").html(i),$("#dWin").css("width",d3.format("%")(s/67)),$("#rWin").css("width",d3.format("%")(i/67)),$("#iWin").css("width",d3.format("%")(a/67)),$("#dChange").html(d3.format("+")(s-39)),$("#rChange").html(d3.format("+")(i-28)),$(".filter_box").keyup(function(e){$(".tableRow").hide(),$(".tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$(".tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".mnsenate .tableRow").click(function(){d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e="mns"+$(this).attr("name");$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()})}function v(e,t,s,a,o,v,m,f,S){function g(r){"president"==r&&l(e,m,S),"senate"==r&&c(t),"governors"==r&&d(s),"mnsenate"==r&&h(a),"mnhouse"==r&&u(o),"house"==r&&p(v)}function w(){$(".ME01, #ME01").hover(function(e){i(r("District 1","ME","table",m,"president",null,"District 1","District 1")),$(".block").removeClass("blockSelect"),$(".ME01.evcd").addClass("blockSelect"),$("#evcdME01").addClass("selectedBox"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$("#evcdME01").click(function(e){i(r("District 1","ME","table",m,"president",null,"District 1","District 1")),$(".block").removeClass("blockSelect"),$(".ME01.evcd").addClass("blockSelect"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$(".ME02, #ME02").hover(function(e){i(r("District 2","ME","table",m,"president",null,"District 2","District 2")),$(".block").removeClass("blockSelect"),$(".ME02.evcd").addClass("blockSelect"),$("#evcdME02").addClass("selectedBox"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$("#evcdME02").click(function(e){i(r("District 2","ME","table",m,"president",null,"District 2","District 2")),$(".block").removeClass("blockSelect"),$(".ME02.evcd").addClass("blockSelect"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$(".NE01, #NE01").hover(function(e){i(r("District 1","NE","table",m,"president",null,"District 1","District 1")),$(".block").removeClass("blockSelect"),$(".NE01.evcd").addClass("blockSelect"),$("#evcdNE01").addClass("selectedBox"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$("#evcdNE01").click(function(e){i(r("District 1","NE","table",m,"president",null,"District 1","District 1")),$(".block").removeClass("blockSelect"),$(".NE01.evcd").addClass("blockSelect"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$(".NE02, #NE02").hover(function(e){i(r("District 2","NE","table",m,"president",null,"District 2","District 2")),$(".block").removeClass("blockSelect"),$(".NE02.evcd").addClass("blockSelect"),$("#evcdNE02").addClass("selectedBox"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$("#evcdNE02").click(function(e){i(r("District 2","NE","table",m,"president",null,"District 2","District 2")),$(".block").removeClass("blockSelect"),$(".NE02.evcd").addClass("blockSelect"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$(".NE03, #NE03").hover(function(e){i(r("District 3","NE","table",m,"president",null,"District 3","District 3")),$(".block").removeClass("blockSelect"),$(".NE03.evcd").addClass("blockSelect"),$("#evcdNE03").addClass("selectedBox"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$("#evcdNE03").click(function(e){i(r("District 3","NE","table",m,"president",null,"District 3","District 3")),$(".block").removeClass("blockSelect"),$(".NE03.evcd").addClass("blockSelect"),d3.selectAll("path").classed("faded",!1).classed("active",!1)})}var A=0;g(E),w(),$(".cartoState").click(function(t){i(r($(this).attr("name"),$(this).attr("name"),"table",e,"president"))}),$(".cartoState polygon").hover(function(t){$(".cartoState, .tableRow").removeClass("selectedBox"),$(".tableRow[name="+$(this).parent().attr("id")+"]").addClass("selectedBox"),i(r($(this).parent().attr("name"),$(this).parent().attr("name"),"table",e,"president"))}),$(".cartoState").mouseleave(function(t){$(".cartoState").removeClass("blockSelect"),$(".cartoState, .tableRow").removeClass("selectedBox"),"mn"==b?i(r("Minnesota","Minnesota","table",e,"president")):"us"==b?i(r("United States","United States","table",e,"president")):"cd"==b?i(r("District 2","Minnesota","table",v,"ushouse",null,"District 2")):$("#infobox").html("")}),$(".block").mouseleave(function(t){$(".block").removeClass("blockSelect"),$(".tableRow").removeClass("selectedBox"),"mn"==b?i(r("Minnesota","Minnesota","table",e,"president")):"us"==b?i(r("United States","United States","table",e,"president")):"cd"==b?i(r("District 2","Minnesota","table",v,"ushouse",null,"District 2")):$("#infobox").html(""),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$(".zoom").click(function(t){$(".block").removeClass("blockSelect"),$(".tableRow").removeClass("selectedBox"),$(".cartoState").removeClass("selectedBox"),d3.selectAll(".cd").classed("active",!1),$(".tableRow").show(),$(".filter_box").val(""),"mn"==b?i(r("Minnesota","Minnesota","table",e,"president")):"us"==b?i(r("United States","United States","table",e,"president")):"cd"==b?i(r("District 2","Minnesota","table",v,"ushouse",null,"District 2")):$("#infobox").html("")}),$(".stateBlock").click(function(e){$(".block").removeClass("blockSelect"),$(this).addClass("blockSelect");var t=$(this).attr("ab");$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Click()}),$(".stateBlock").hover(function(e){var t=$(this).attr("ab");$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Click()},function(){}),$(".has-sub").click(function(e){$(".raceSwitch, li").removeClass("selected2")}),$(".raceSwitch").click(function(t){b=$(this).attr("infobox"),"mn"==b?i(r("Minnesota","Minnesota","table",e,"president")):"us"==b?i(r("United States","United States","table",e,"president")):"cd"==b?i(r("District 2","Minnesota","table",v,"ushouse",null,"District 2")):$("#infobox").html(""),g($(this).attr("data")),$(".chatter").hide(),$("#chatter"+$(this).attr("index")).show(),$(".slide").hide(),$("#"+$(this).attr("slide")).show(),$(".raceSwitch, li").removeClass("selected2"),$(".cartoState").removeClass("selectedBox"),$(this).addClass("selected2"),$(".raceSwitch").find("a").removeClass("selected3"),$(this).find("a").addClass("selected3"),$(".dataviz, .bigBoard").hide(),$("#"+$(this).attr("data")).show(),$("."+$(this).attr("data")).show(),E=$(this).attr("data"),$(".legendBlock").hide(),$("#"+$(this).attr("legend")).show(),$(".dparty").html($(this).attr("dLabel")),$(".rparty").html($(this).attr("rLabel")),"showMe"==$(this).attr("stateKey")?$(".sideStates").show():$(".sideStates").hide(),$(".map").hide(),$("."+$(this).attr("type")).show(),$("."+$(this).attr("type")).css("display","inline-block"),A++,n(".map",$(this).attr("layer")),w()})}function m(){var e={top:20,right:60,bottom:20,left:120},t=c3.generate({bindto:"#countiesChartD",padding:e,data:{columns:[["Clinton",.75,.42],["Trump",.9,.24]],type:"bar"},color:{pattern:["#3585BC","#d34A44"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("%")}},x:{type:"category",categories:["White Non-Hispanic","Bachelors or Higher"]}}});$(".raceSwitch").click(function(e){t.flush()})}function f(){var e={top:20,right:40,bottom:20,left:60},t=c3.generate({bindto:"#chartH",padding:e,data:{x:"x",columns:[["x",1982,1986,1990,1994,1998,2002,2006,2010,2014,2018],["Minnesota PVI",7,8,8,6,4,3,2,2,2,1]],type:"line"},point:{show:!1},color:{pattern:["#3F88C5"]},axis:{y:{min:0,padding:{left:0,right:0,bottom:0,top:0},tick:{count:4,format:d3.format("+.0f")}},x:{padding:{left:0,right:0,bottom:0,top:0},tick:{values:[1982,1990,1998,2010,2018],count:5,multiline:!1},padding:{}}},grid:{y:{lines:[{value:218,text:"",position:"start",class:"powerline"}]}},tooltip:{contents:function(e,t,s,r){var i,a,n,o,l,c,d=this,p=d.config,u=p.tooltip_format_title||t,h=p.tooltip_format_name||function(e){return e},v=p.tooltip_format_value||s;for(a=0;a<e.length;a++)e[a]&&(e[a].value||0===e[a].value)&&(i||(n=u?u(e[a].x):e[a].x,i="<table class='"+d.CLASS.tooltip+"'>"+(n||0===n?"<tr><th colspan='2'>"+n+"</th></tr>":"")),l=h(e[a].name),o=v(e[a].value,e[a].ratio,e[a].id,e[a].index),c=d.levelColor?d.levelColor(e[a].value):r(e[a].id),i+="<tr class='"+d.CLASS.tooltipName+"-"+e[a].id+"'>",i+="<td class='name'><span style='background-color:"+c+"'></span>"+l+"</td>",i+="<td class='value'>D"+o+"</td>",i+="</tr><tr>",i+="</tr>");return i+"</table>"}}});$(".raceSwitch").click(function(e){t.flush()})}function S(){var e={top:20,right:40,bottom:20,left:60},t=c3.generate({bindto:"#chartS",padding:e,data:{x:"x",columns:[["x",1992,1996,2e3,2004,2008,2012,2016],["DEM Counties",65,76,18,24,41,28,9],["GOP Counties",22,11,69,63,46,59,78]],type:"line"},point:{show:!1},color:{pattern:["#3F88C5","#A52129"]},axis:{y:{min:0,padding:{bottom:0},tick:{values:[0,43,87],count:3,format:d3.format(".0f")}},x:{tick:{values:["1992","2000","2012","2016"],count:4,multiline:!1},padding:{left:.7,right:.3}}},grid:{y:{},x:{}}});$(".raceSwitch").click(function(e){t.flush()})}function g(e){this.dd=e,this.placeholder=this.dd.children("span"),this.opts=this.dd.find("ul.dropdown > li"),this.val="",this.index=-1,this.initEvents()}var b="us",w=0;jQuery.fn.d3Click=function(){this.each(function(e,t){var s=document.createEvent("MouseEvents");return s.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(s),!1})},jQuery.fn.d3Down=function(){this.each(function(e,t){var s=document.createEvent("MouseEvents");return s.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(s),!1})},jQuery.fn.d3Up=function(){this.each(function(e,t){var s=document.createEvent("MouseEvents");return s.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(s),!1})};var A="president";$(".raceSwitch, li").removeClass("selected2"),$(".raceSwitch[section="+A+"]").addClass("selected2"),$("li[section="+A+"]").addClass("selected2");var E=A;d3.json("./data/prezCounty2016.json?"+Math.floor(1e3*Math.random()),function(e,t){d3.json("https://s3-us-west-2.amazonaws.com/strib-elections-ap-api/us-uspresident-nebraska-maine/full.json?"+Math.floor(1e3*Math.random()),function(e,s){d3.json("./data/pct.json?"+Math.floor(1e3*Math.random()),function(e,a){var l=t,c=a.pct,d=s;o("president",l,c),$(document).ready(function(){$(".dataviz").hide(),$("#"+A).show(),n(".map","country");var e=$(window).width();e<500&&($("svg").width(e),$("svg").height(e/1.5))}),v(l,null,null,null,null,null,d,!1,c),i(r("United States","United States","table",l,"president")),$(".dparty").html("Clinton"),$(".rparty").html("Trump"),$("#prezButton").trigger("click"),$("#table .president").show(),$("#wrapper").show(),window.setTimeout(function(){$("#message").html("<div class='message'>Rendering results...</div><img src='http://stmedia.startribune.com/designimages/ajax-loader.gif' class='loader-img'>")},4e3),window.setTimeout(function(){$(".loading-mask").hide(),$("#wrapper").show(),$("#cssmenu, .sideStates").css("opacity",1)},5e3)})})}),d3.json("./data/pollster.json",function(e,t){var s=t.pollster;!function(){d3.csv("./data/turnout.csv",function(e){return{state:e.ab,turnout:+e.turnout,turnout2012:+e.turnout2012}},function(e,t){var s=t,r=[],i=[],a=[];r[0]="x",i[0]="2016 Turnout",a[0]="2012 Turnout";for(var n=1;n<=s.length;n++)r[n]=s[n-1].state,i[n]=s[n-1].turnout,a[n]=s[n-1].turnout2012;var o={top:20,right:60,bottom:20,left:60},l=c3.generate({bindto:"#chartNational",padding:o,data:{x:"x",columns:[r,i,a],types:{"2016 Turnout":"bar","2012 Turnout":"bar"},colors:{"Voter Turnout":function(e){return 0==e.index||36==e.index?"#000":"#bbb"}}},color:{pattern:["#333","#aaa"]},axis:{rotated:!0,y:{max:1,min:0,padding:{bottom:0,top:0},tick:{count:4,format:d3.format("%")}},x:{type:"category"}},grid:{x:{}}});$(".raceSwitch").click(function(){l.flush(),l.resize({height:700,width:$("#wrapper").innerWidth()})})})}(),m(),f(),S(),function(e,t){var s=[],r=[],i=[],a=[],n=[],o=[],l=[],c=[];s[0]="clinton_x",r[0]="trump_x",i[0]="u_x",a[0]="o_x",n[0]="Clinton",o[0]="Trump",l[0]="Undecided/Other",c[0]="Other";for(var d=1,p=0;p<t.length;p++)s[d]=new Date(t[p].entry_date),r[d]=d3.time.format("%m-%d-%Y")(new Date(t[p].entry_date)),i[d]=d3.time.format("%m-%d-%Y")(new Date(t[p].entry_date)),a[d]=d3.time.format("%m-%d-%Y")(new Date(t[p].entry_date)),n[d]=t[p].clinton,o[d]=t[p].trump,l[d]=t[p].undecided,c[d]=t[p].other,d++;var u={top:20,right:30,bottom:20,left:40},h=c3.generate({bindto:e,padding:u,point:{r:3},data:{xs:{Clinton:"clinton_x",Trump:"clinton_x"},colors:{Clinton:"#3F88C5",Trump:"#8C1B17"},columns:[s,n,o],type:"scatter"},axis:{y:{max:.55,min:.2,padding:{bottom:0,top:0},tick:{count:3,values:[0,.25,.55],format:d3.format("%")}},x:{type:"timeseries",tick:{format:"%m-%d-%Y",count:3,multiline:!1}}},grid:{y:{lines:[{value:.46,text:"Clinton:46%",position:"start",class:"blueline"},{value:.44,text:"Trump:44%",position:"start",class:"redline"}]}},tooltip:{contents:function(e,s,r,i){var a,n,o,l,c,d,p=this,u=p.config,h=u.tooltip_format_title||s,v=u.tooltip_format_name||function(e){return e},m=u.tooltip_format_value||r;for(n=0;n<e.length;n++)if(e[n]&&(e[n].value||0===e[n].value)){a||(o=h?h(e[n].x):e[n].x,a="<table class='"+p.CLASS.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"</th></tr>":""));var f="";c=v(e[n].name),l=m(e[n].value,e[n].ratio,e[n].id,e[n].index),d=p.levelColor?p.levelColor(e[n].value):i(e[n].id);for(var S=0;S<t.length;S++)if(d3.time.format("%m-%d-%Y")(new Date(t[S].entry_date))==o){f="<td class='value pollster' colspan='2'>"+t[S].pollster+" ("+t[S].mode+")</td>";break}a+="<tr class='"+p.CLASS.tooltipName+"-"+e[n].id+"'>",a+="<td class='name'><span style='background-color:"+d+"'></span>"+c+"</td>",a+="<td class='value'>"+l+"</td>",a+="</tr><tr>",a+=f,a+="</tr>"}return a+"</table>"}}});$(".raceSwitch").click(function(e){h.flush()})}("#chartP",s),function(e){d3.csv("./data/countyShift.csv",function(e){return{abb:e.abb,rDIFF:+e.rDIFF,county:e.county,votes:+e.votes}},function(t,s){var r=s,i=[],a=[];i[0]="shift_x",a[0]="Votes";for(var n=1,o=0;o<r.length;o++)i[n]=r[o].rDIFF,a[n]=r[o].votes,n++;var l={top:20,right:30,bottom:20,left:80},c=c3.generate({bindto:e,padding:l,point:{r:3},data:{xs:{Votes:"shift_x"},colors:{Votes:"#8C1B17"},columns:[i,a],type:"scatter"},legend:{show:!1},axis:{y:{padding:{bottom:0,top:0},label:"Total votes",tick:{format:d3.format(",.0f"),count:3}},x:{label:"GOP % change",tick:{count:3,format:d3.format("+%"),multiline:!1}}},grid:{x:{lines:[{value:0,text:"0% change",position:"end",class:"powerline"}]}},tooltip:{contents:function(e,t,s,i){var a,n,o,l,c,d,p,u=this,h=u.config,v=h.tooltip_format_title||t,m=h.tooltip_format_name||function(e){return e},f=h.tooltip_format_value||s;for(n=0;n<e.length;n++)if(e[n]&&(e[n].value||0===e[n].value)){a||(o=v?v(e[n].x):e[n].x,p=e[n].x,a="<table class='"+u.CLASS.tooltip+"'>"+(o||0===o?"<tr><th colspan='2'>"+o+"</th></tr>":""));var S="";c=m(e[n].name),l=f(e[n].value,e[n].ratio,e[n].id,e[n].index),d=u.levelColor?u.levelColor(e[n].value):i(e[n].id);for(var g=0;g<r.length;g++)if(r[g].rDIFF==p){S="<td class='value pollster' colspan='2'>"+r[g].county+", "+r[g].abb+"</td>";break}a+="<tr class='"+u.CLASS.tooltipName+"-"+e[n].id+"'>",a+="<td class='name'><span style='background-color:"+d+"'></span>"+c+"</td>",a+="<td class='value'>"+l+"</td>",a+="</tr><tr>",a+=S,a+="</tr>"}return a+"</table>"}}});$(".raceSwitch").click(function(e){c.flush()})})}("#chartR"),$(window).width()<500&&$(".raceSwitch").click(function(e){$(".chart:not(#chartNational) svg").height(500),$(".chart:not(#chartNational) svg").css("height","500px !important")})}),g.prototype={initEvents:function(){var e=this;e.dd.on("click",function(e){return $(this).toggleClass("active"),!1}),e.opts.on("click",function(){var t=$(this);e.val=t.text(),e.index=t.index(),e.placeholder.text(e.val)})},getValue:function(){return this.val},getIndex:function(){return this.index}},$(function(){new g($("#dd")),new g($("#ddY"));$(document).click(function(){$(".wrapper-dropdown-1").removeClass("active")})})},{}]},{},[1]);