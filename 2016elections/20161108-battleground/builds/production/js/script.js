!function e(t,s,r){function i(o,n){if(!s[o]){if(!t[o]){var l="function"==typeof require&&require;if(!n&&l)return l(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=s[o]={exports:{}};t[o][0].call(c.exports,function(e){var s=t[o][1][e];return i(s||e)},c,c.exports,e,t,s,r)}return s[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,s){function r(e,t,s,r,i,a,o,n){for(var l="",c="",d=0,p=0,u=0,h=0,v=0,m=[],S=[],f=[],$=[],g=[],b=[],M=[],w=0;w<r.races.length;w++)if("ushouse"==i||"mnhouse"==i||"mnsenate"==i){if("District 0"==e){if("District 1"==r.races[w].seatName)for(var E=0;E<r.races[w].reportingUnits.length;E++)if(r.races[w].reportingUnits[E].stateName==t){l=r.races[w].reportingUnits[E].stateName,c=r.races[w].reportingUnits[E].statePostal,d=r.races[w].reportingUnits[E].precinctsReporting,p=r.races[w].reportingUnits[E].precinctsTotal,u=r.races[w].reportingUnits[E].precinctsReportingPct,h=r.races[w].reportingUnits[E].lastUpdated;for(var A=0;A<r.races[w].reportingUnits[E].candidates.length;A++)m[A]=r.races[w].reportingUnits[E].candidates[A].first,S[A]=r.races[w].reportingUnits[E].candidates[A].last,f[A]=r.races[w].reportingUnits[E].candidates[A].party,$[A]=r.races[w].reportingUnits[E].candidates[A].incumbent,g[A]=r.races[w].reportingUnits[E].candidates[A].voteCount,b[A]=r.races[w].reportingUnits[E].candidates[A].winner}}else if(r.races[w].seatName==e)for(var E=0;E<r.races[w].reportingUnits.length;E++)if(r.races[w].reportingUnits[E].stateName==t){l=r.races[w].reportingUnits[E].stateName,c=r.races[w].reportingUnits[E].statePostal,d=r.races[w].reportingUnits[E].precinctsReporting,p=r.races[w].reportingUnits[E].precinctsTotal,u=r.races[w].reportingUnits[E].precinctsReportingPct,h=r.races[w].reportingUnits[E].lastUpdated;for(var A=0;A<r.races[w].reportingUnits[E].candidates.length;A++)m[A]=r.races[w].reportingUnits[E].candidates[A].first,S[A]=r.races[w].reportingUnits[E].candidates[A].last,f[A]=r.races[w].reportingUnits[E].candidates[A].party,$[A]=r.races[w].reportingUnits[E].candidates[A].incumbent,g[A]=r.races[w].reportingUnits[E].candidates[A].voteCount,b[A]=r.races[w].reportingUnits[E].candidates[A].winner}}else for(var E=0;E<r.races[w].reportingUnits.length;E++)if(null!=t&&null!=n){if(r.races[w].reportingUnits[E].statePostal==t&&r.races[w].reportingUnits[E].reportingunitName==n){l=r.races[w].reportingUnits[E].stateName,c=r.races[w].reportingUnits[E].statePostal,d=r.races[w].reportingUnits[E].precinctsReporting,p=r.races[w].reportingUnits[E].precinctsTotal,u=r.races[w].reportingUnits[E].precinctsReportingPct,h=r.races[w].reportingUnits[E].lastUpdated;for(var A=0;A<r.races[w].reportingUnits[E].candidates.length;A++)m[A]=r.races[w].reportingUnits[E].candidates[A].first,S[A]=r.races[w].reportingUnits[E].candidates[A].last,f[A]=r.races[w].reportingUnits[E].candidates[A].party,$[A]=r.races[w].reportingUnits[E].candidates[A].incumbent,g[A]=r.races[w].reportingUnits[E].candidates[A].voteCount,b[A]=r.races[w].reportingUnits[E].candidates[A].winner}}else if(null!=t){if(r.races[w].reportingUnits[E].stateName==t){l=r.races[w].reportingUnits[E].stateName,c=r.races[w].reportingUnits[E].statePostal,d=r.races[w].reportingUnits[E].precinctsReporting,p=r.races[w].reportingUnits[E].precinctsTotal,u=r.races[w].reportingUnits[E].precinctsReportingPct,h=r.races[w].reportingUnits[E].lastUpdated;for(var A=0;A<r.races[w].reportingUnits[E].candidates.length;A++)m[A]=r.races[w].reportingUnits[E].candidates[A].first,S[A]=r.races[w].reportingUnits[E].candidates[A].last,f[A]=r.races[w].reportingUnits[E].candidates[A].party,$[A]=r.races[w].reportingUnits[E].candidates[A].incumbent,g[A]=r.races[w].reportingUnits[E].candidates[A].voteCount,b[A]=r.races[w].reportingUnits[E].candidates[A].winner}}else if(null!=e&&r.races[w].reportingUnits[E].fipsCode==e){l=r.races[w].reportingUnits[E].stateName,c=r.races[w].reportingUnits[E].statePostal,d=r.races[w].reportingUnits[E].precinctsReporting,p=r.races[w].reportingUnits[E].precinctsTotal,u=r.races[w].reportingUnits[E].precinctsReportingPct,h=r.races[w].reportingUnits[E].lastUpdated;for(var A=0;A<r.races[w].reportingUnits[E].candidates.length;A++)m[A]=r.races[w].reportingUnits[E].candidates[A].first,S[A]=r.races[w].reportingUnits[E].candidates[A].last,f[A]=r.races[w].reportingUnits[E].candidates[A].party,$[A]=r.races[w].reportingUnits[E].candidates[A].incumbent,g[A]=r.races[w].reportingUnits[E].candidates[A].voteCount,b[A]=r.races[w].reportingUnits[E].candidates[A].winner}for(var w=0;w<g.length;w++)M.push({first:m[w],last:S[w],party:f[w],incumbent:$[w],voteCount:g[w],winner:b[w]});M.sort(function(e,t){return t.voteCount-e.voteCount}),m=[],S=[],f=[],$=[],g=[],b=[];for(var w=0;w<M.length;w++)m.push(M[w].first),S.push(M[w].last),f.push(M[w].party),$.push(M[w].incumbent),g.push(M[w].voteCount),b.push(M[w].winner);for(var w=0;w<g.length;w++)v+=g[w];var D=(g[0],"");null!=a&&(D="<span class='ev'> - "+a+" electoral votes</span>");var N=t;N=null!=o?o+", "+c:t;for(var T=[],w=0;w<$.length;w++)1==$[w]?T[w]="*":T[w]="";for(var C=[],w=0;w<S.length;w++)"X"==b[w]?C[w]="&#x2714;":"R"==b[w]?C[w]="-R":C[w]="";for(var U=[],w=0;w<S.length;w++){var R=g[w]/v;"GOP"==f[w]?U[w]=R>=.8?"#d34A44":R>=.7?"#d34A44":R>=.5?"#f7816E":R>0?"#f7816E":"#bbbbbb":"Dem"==f[w]?U[w]=R>=.8?"#3585BC":R>=.7?"#3585BC":R>=.5?"#72A9D6":R>0?"#72A9D6":"#bbbbbb":U[w]=R>0?"#7CB342":"#bbbbbb"}if("pct"==s)return u;if("timestamp"==s){return new Date(h)}if("votesT"==s)return v;if("votesD"==s)for(var w=0;w<S.length;w++)if("Dem"==f[w])return g[w];if("votesR"==s)for(var w=0;w<S.length;w++)if("GOP"==f[w])return g[w];if("winner"==s)for(var w=0;w<S.length;w++)if("X"==b[w])return"GOP"==f[w]?"GOP Win":"Dem"==f[w]?"DEM Win":"IND Win";if("lean"==s)return"X"==b[0]&&"GOP"==f[0]?"#d34A44":"X"==b[0]&&"Dem"==f[0]?"#3585BC":"X"==b[0]?"#7CB342":"GOP"==f[0]&&0!=g[0]?"#f7816E":"Dem"==f[0]&&0!=g[0]?"#72A9D6":(g[0],"#bbbbbb");if("colors"==s)return U[0];if("tooltip"==s){var k="<div class='districtName'>"+N+"</div>";if(S.length<2)var x=S.length;else var x=2;for(var w=0;w<x;w++){var R="0%";v>0&&(R=d3.format("%")(g[w]/v)),k+="<div class='candidate'>"+T[w]+S[w]+" "+C[w]+"</div><div class='pct' style='background-color:"+U[w]+"'>"+R+"</div><div class='smallbreak'>"}return k}if("table"==s){var B="";if(S.length<3)var x=S.length;else var x=3;for(var y="<div class='districtName'>"+N+" "+D+"</div><div class='resultsRow'><div class='resultsHead'>Candidate</div><div class='counts resultsHead'>#</div><div class='pct resultsHead'>%</div></div>",w=0;w<x;w++){var R="0%";v>0&&(R=d3.format(".1%")(g[w]/v)),B="","X"==b[w]&&"GOP"==f[w]?B="republican":"X"==b[w]&&"Dem"==f[w]?B="democrat":"X"==b[w]&&(B="green4"),"president"==i&&null!=n&&(B=U[w],C[w]=""),y+="<div class='resultsRow'><div class='candidate'>"+T[w]+m[w]+" "+S[w]+" ("+f[w]+") "+C[w]+"</div><div class='counts'>"+d3.format(",")(g[w])+"</div><div class='pct "+B+"' style='background-color:"+U[w]+";'>"+R+"</div></div>"}return y+"<div class='reportingRow'><span class='pctReported'>"+d+"</span> / <span class='pctAll'>"+p+"</span> ("+u+"%) precincts reporting</div>"}if("board"==s){for(var P="0%",I="0%",W="",j="",O=m[0]+" "+S[0],_=m[1]+" "+S[1],G="",H="",V=!1,w=0;w<2;w++)"Dem"==f[w]&&"0%"==P?(P=d3.format("%")(g[w]/v),W=U[w],"X"==b[w]&&(G="democrat",V=!0)):"Dem"==f[w]&&"0%"!=P?(I=d3.format("%")(g[w]/v),j=U[w],"X"==b[w]&&(H="democrat",V=!0)):"GOP"==f[w]&&"0%"==I?(I=d3.format("%")(g[w]/v),j=U[w],"X"==b[w]&&(H="republican",V=!0)):"GOP"==f[w]&&"0%"!=I&&(P=d3.format("%")(g[w]/v),W=U[w],"X"==b[w]&&(G="republican",V=!0));if("president"==i&&null!=n&&1==V&&("Dem"==f[0]?(G="democrat",H=""):(G="",H="republican")),0==v&&(P="0%",I="0%"),"president"==i&&null!=n)return"<div id='evcd"+o+"' class='tableRow evcd' name='"+o+"'><div class='stateBlockR'>"+o+"</div><div class='pctBox'>"+a+"</div><div class='pctBox "+G+"' style='border:2px solid "+W+";'>"+P+"</div><div class='pctBox "+H+"' style='border:2px solid "+j+";'>"+I+"</div><div class='pctBox reporting'>"+u+"%</div><div class='searchTerms'>"+l+" "+O+" "+_+"</div></div>";if("president"==i)return"<div class='tableRow' name='"+c+"'><div class='stateBlockR'>"+c+"</div><div class='pctBox'>"+a+"</div><div class='pctBox "+G+"' style='border:2px solid "+W+";'>"+P+"</div><div class='pctBox "+H+"' style='border:2px solid "+j+";'>"+I+"</div><div class='pctBox reporting'>"+u+"%</div><div class='searchTerms'>"+l+" "+O+" "+_+"</div></div>";if("senate"==i||"governors"==i)return"<div class='tableRow' name='"+c+"'><div class='stateBlockR'>"+c+"</div><div class='pctBox "+G+"' style='border:2px solid "+W+";'>"+P+"</div><div class='pctBox "+H+"' style='border:2px solid "+j+";'>"+I+"</div><div class='pctBox reporting'>"+u+"%</div><div class='searchTerms'>"+l+" "+O+" "+_+"</div></div>";if("mnhouse"==i||"mnsenate"==i)return"<div class='tableRow' name='"+o+"'><div class='stateBlockR'>"+o+"</div><div class='pctBox "+G+"' style='border:2px solid "+W+";'>"+P+"</div><div class='pctBox "+H+"' style='border:2px solid "+j+";'>"+I+"</div><div class='pctBox reporting'>"+u+"%</div><div class='searchTerms'>"+l+" "+O+" "+_+"</div></div>";if("ushouse"==i)return"<div class='tableRow' name='Minnesota"+o+"'><div class='stateBlockR'>MN"+o+"</div><div class='pctBox "+G+"' style='border:2px solid "+W+";'>"+P+"</div><div class='pctBox "+H+"' style='border:2px solid "+j+";'>"+I+"</div><div class='pctBox reporting'>"+u+"%</div><div class='searchTerms'>"+l+" "+O+" "+_+"</div></div>"}}function i(e){$("#infobox").html(e)}function a(e){$(".cartoState").each(function(t,s){var i=r($(this).attr("name"),$(this).attr("name"),"lean",e,"president");$(this).attr("fill",i)})}function o(e){!function(){var t=d3.geo.equirectangular().scale(800/1.1).translate([200,240]).center([-102,40]),s=d3.geo.path().projection(t),a=d3.select("#cartoHouse svg").attr("width",800).attr("height",600),o=a.append("g").attr("transform","translate(150,25)").attr("class","house-group-g");!function(){d3.json("shapefiles/usdistricts_cartogram.json",function(t,a){o.append("g").attr("id","districts").selectAll("path").data(topojson.feature(a,a.objects.uscd).features).enter().append("path").attr("d",s).attr("class","cd").attr("fill",function(t){return r("District "+t.properties.d,t.properties.State,"lean",e,"ushouse",null,"District "+t.properties.d)}).attr("id",function(e){return e.properties.State+""+e.properties.d+"c"}).attr("data-hash-key",function(e){return e.properties.State+"-"+e.properties.d}).on("mousedown",function(t,s){if(d3.selectAll(".cd").classed("active",!1),d3.select(this).classed("active",!0),$(".tableRow").removeClass("selectedBox"),"Minnesota"==t.properties.State&&$(".tableRow[name="+t.properties.State+t.properties.d+"]").addClass("selectedBox"),0==t.properties.d)var a="1";else var a=t.properties.d;i(r("District "+t.properties.d,t.properties.State,"table",e,"ushouse",null,"District "+a))}).call(d3.helper.tooltip(function(t,s){if($(window).width()>500)return r("District "+t.properties.d,t.properties.State,"tooltip",e,"ushouse",null,"District "+t.properties.d);$(".tooltip").hide()}))})}()}(),d3.helper={},d3.helper.tooltip=function(e){return function(t){var s,r=d3.select("body").node();t.on("mouseover",function(t,i){d3.select("body").selectAll("div.tooltip").remove(),s=d3.select("body").append("div").attr("class","tooltip");var a=d3.mouse(r);s.style("left",a[0]-160+"px").style("top",a[1]-15+"px").style("position","absolute").style("z-index",1001);e(t,i)}).on("mousemove",function(t,i){var a=d3.mouse(r);s.style("left",a[0]-160+"px").style("top",a[1]-15+"px");var o=e(t,i)||"";s.html(o)}).on("mouseout",function(e,t){s.remove()})}};var t=$("#cartoHouse svg"),s=t.parent().width();t.attr("width",s),t.attr("height",s/(800/600)),$(window).width()<=420&&$("#cartogram svg").attr("viewBox","0 0 500 400"),$(window).on("resize",function(){$(window).width()>=970&&$("#mobmenu").hide(),t.attr("style",""),$("#cartogram svg").attr("style","");var e=t.parent().width();t.attr("width",e),t.attr("height",e/(800/600))})}function n(e,t,s,a,o,n,l,c,d,p){function u(e){if(e&&S!==e){var t=M.centroid(e);t[0],t[1],3,S=e}else f/2,g/2,3,S=null;E.selectAll("."+o+" path").classed("faded",!0).classed("active",S&&function(e){return e===S})}function h(e){var t,s,r;M.centroid(e);t=429.8542649319006,s=90.27472769218944,r=5,E.transition().duration(200).attr("transform","translate("+f/2+","+g/2+")scale("+r+")translate("+-t+","+-s+")").style("stroke-width","0"),E.selectAll("path").style("stroke-width","0.3px")}function v(e){var t,s,r;M.centroid(e);t=439.8542649319006,s=103.27472769218944,r=25,E.transition().duration(200).attr("transform","translate("+f/2+","+g/2+")scale("+r+")translate("+-t+","+-s+")").style("stroke-width","0"),E.selectAll("path").style("stroke-width","0.1px")}function m(e){var t,s,r;if(e&&S!==e){var i=M.centroid(e);t=i[0],s=i[1],r=1,S=e}else t=f/2,s=g/2,r=1,S=null;E.selectAll("."+o+" path").classed("faded",!1).classed("active",S&&function(e){return e===S}),E.transition().duration(200).attr("transform","translate("+f/2+","+g/2+")scale("+r+")translate("+-t+","+-s+")").style("stroke-width","0.5px"),E.selectAll("path").style("stroke-width",".5px")}if("us"==n)var S,f=800,g=600,b=d3.geo.albersUsa().scale(1e3).translate([400,210]);else if("mn"==n)var S,f=400,g=400,b=d3.geo.mercator().scale([3200]).center([-89.736328,46.377254]);else if("metro"==n)var S,f=400,g=400,b=d3.geo.mercator().scale([16500]).center([-92.403259,44.988113]);var M=d3.geo.path().projection(b),w=d3.select(e+" svg").attr("width",f).attr("height",g),E=w.append("g").attr("class","mappage states "+o+" "+l);d3.json("shapefiles/"+a,function(e,t){E.selectAll("path").data(t.features).enter().append("path").attr("d",M).on("click",u).attr("precinctName",function(e){return e.properties.NAME}).style("fill",function(e){return"president"==o?($("#president .sideStates .block").each(function(t,s){if($(this).hasClass(e.properties.STUSPS)){var i=r(e.properties.NAME,e.properties.NAME,"lean",c,o);$(this).css("background-color",i)}}),r(e.properties.NAME,e.properties.NAME,"lean",c,o)):"senate"==o?($("#senate .sideStates .block").each(function(t,s){if($(this).hasClass(e.properties.STUSPS)){var i=r(e.properties.NAME,e.properties.NAME,"lean",c,o);$(this).css("background-color",i)}}),r(e.properties.NAME,e.properties.NAME,"lean",c,o)):"governors"==o?($("#governors .sideStates .block").each(function(t,s){if($(this).hasClass(e.properties.STUSPS)){var i=r(e.properties.NAME,e.properties.NAME,"lean",c,o);$(this).css("background-color",i)}}),r(e.properties.NAME,e.properties.NAME,"lean",c,o)):"county"==o?r(e.properties.GEOID,null,"colors",c,o):"house"==o?r("District "+e.properties.DISTRICT,e.properties.STATENAME,"lean",c,"ushouse",null,"District "+e.properties.DISTRICT):"mnsenate"==o||"mnhouse"==o?r("District "+e.properties.DISTRICT,"Minnesota","lean",c,o,null,"District "+e.properties.DISTRICT):void 0}).on("mousedown",function(e,t){e.properties.NAME;if($(".district").removeClass("selected"),$(".tableRow").removeClass("selectedBox"),$(".tableRow[name="+e.properties.STUSPS+"]").addClass("selectedBox"),$(".tableRow[name="+e.properties.DISTRICT+"]").addClass("selectedBox"),"president"==o||"senate"==o||"governors"==o)i(r(e.properties.NAME,e.properties.NAME,"table",c,o)),$(".block").removeClass("blockSelect"),$("."+e.properties.STUSPS).addClass("blockSelect");else if("county"==o)i(r(e.properties.GEOID,null,"table",c,o,null,e.properties.NAME));else if("house"==o){if(0==e.properties.DISTRICT)var s="1";else var s=e.properties.DISTRICT;i(r("District "+e.properties.DISTRICT,e.properties.STATENAME,"table",c,"ushouse",null,"District "+s)),"Minnesota"==e.properties.STATENAME&&$(".tableRow[name="+e.properties.STATENAME+e.properties.DISTRICT+"]").addClass("selectedBox")}else if("mnsenate"==o||"mnhouse"==o){if("32B"==e.properties.DISTRICT)return i("<div class='districtName'>District 32B, MN</div><div>No race. A special election has been called for Feb. 14, 2017.</div>");i(r("District "+e.properties.DISTRICT,"Minnesota","table",c,o,null,"District "+e.properties.DISTRICT))}}).style("stroke-width","0.3px").style("stroke","#fff").attr("id",function(e){return"president"==o?e.properties.STUSPS:"senate"==o?e.properties.STUSPS+"s":"governors"==o?e.properties.STUSPS+"g":"mnsenate"==o?"mns"+e.properties.DISTRICT:"mnhouse"==o?"mnh"+e.properties.DISTRICT:"house"==o?e.properties.STATENAME+""+e.properties.DISTRICT:null}).attr("class",function(e){return"president"==o?"district "+e.properties.STUSPS:"senate"!=o||"Montana"!=e.properties.NAME&&"Wyoming"!=e.properties.NAME&&"Nebraska"!=e.properties.NAME&&"Minnesota"!=e.properties.NAME&&"New Mexico"!=e.properties.NAME&&"Texas"!=e.properties.NAME&&"Mississippi"!=e.properties.NAME&&"Tennessee"!=e.properties.NAME&&"West Virginia"!=e.properties.NAME&&"Virginia"!=e.properties.NAME&&"New Jersey"!=e.properties.NAME&&"Delaware"!=e.properties.NAME&&"Rhode Island"!=e.properties.NAME&&"Massachusetts"!=e.properties.NAME&&"Maine"!=e.properties.NAME&&"Michigan"!=e.properties.NAME?"governors"==o&&"Washington"!=e.properties.NAME&&"Oregon"!=e.properties.NAME&&"Montana"!=e.properties.NAME&&"Utah"!=e.properties.NAME&&"Missouri"!=e.properties.NAME&&"Montana"!=e.properties.NAME&&"Montana"!=e.properties.NAME&&"Montana"!=e.properties.NAME&&"West Virginia"!=e.properties.NAME&&"North Carolina"!=e.properties.NAME&&"Delaware"!=e.properties.NAME&&"New Hampshire"!=e.properties.NAME&&"Vermont"!=e.properties.NAME&&"Indiana"!=e.properties.NAME&&"North Dakota"!=e.properties.NAME?"noclicky district "+e.properties.STUSPS:"county"==o?46==e.properties.STATEFP&&"Shannon"==e.properties.NAME?"noclicky district":27==e.properties.STATEFP?"Hennepin"==e.properties.NAME||"Ramsey"==e.properties.NAME||"Washington"==e.properties.NAME||"Carver"==e.properties.NAME||"Scott"==e.properties.NAME||"Dakota"==e.properties.NAME||"Anoka"==e.properties.NAME?"mn metro":"mn":2==e.properties.STATEFP?"noclicky district":"areas district":"house"==o?"Minnesota"==e.properties.STATENAME?"mn":"areas district":void 0:"noclicky  district "+e.properties.STUSPS}).call(d3.helper.tooltip(function(e,t){if($(window).width()>500){if("president"==o||"senate"==o||"governors"==o)return r(e.properties.NAME,e.properties.NAME,"tooltip",c,o);if("county"==o)return r(e.properties.GEOID,null,"tooltip",c,o,null,e.properties.NAME);if("house"==o){if(0==e.properties.DISTRICT)var s="1";else var s=e.properties.DISTRICT;return r("District "+e.properties.DISTRICT,e.properties.STATENAME,"tooltip",c,"ushouse",null,"District "+s)}if("mnsenate"==o||"mnhouse"==o)return"32B"==e.properties.DISTRICT?"<div class='districtName'>District 32B, MN</div><div>No race</div>":r("District "+e.properties.DISTRICT,"Minnesota","tooltip",c,o,null,"District "+e.properties.DISTRICT)}else $(".tooltip").hide()})),"president"!=o&&"senate"!=o&&"governors"!=o||E.selectAll("text").data(t.features).enter().append("text").attr("fill","white").style("font-weight",900).attr("class","passthrough").attr("transform",function(e){var t=M.centroid(e),s=t[0],r=t[1];return"FL"==e.properties.STUSPS&&(s+=11),"MI"==e.properties.STUSPS&&(s+=9,r+=18),"AK"==e.properties.STUSPS&&(r-=4),"LA"==e.properties.STUSPS&&(s-=8,r-=4),"translate("+s+","+r+")"}).attr("text-anchor","middle").attr("dy",".35em").text(function(e){return"president"==o&&"MA"!=e.properties.STUSPS&&"RI"!=e.properties.STUSPS&&"CT"!=e.properties.STUSPS&&"DE"!=e.properties.STUSPS&&"DC"!=e.properties.STUSPS&&"MD"!=e.properties.STUSPS&&"NH"!=e.properties.STUSPS&&"VT"!=e.properties.STUSPS&&"NJ"!=e.properties.STUSPS?e.properties.STUSPS:"senate"==o&&"MA"!=e.properties.STUSPS&&"RI"!=e.properties.STUSPS&&"CT"!=e.properties.STUSPS&&"DE"!=e.properties.STUSPS&&"DC"!=e.properties.STUSPS&&"MD"!=e.properties.STUSPS&&"NH"!=e.properties.STUSPS&&"VT"!=e.properties.STUSPS&&"NJ"!=e.properties.STUSPS&&"MT"!=e.properties.STUSPS&&"WY"!=e.properties.STUSPS&&"NE"!=e.properties.STUSPS&&"NM"!=e.properties.STUSPS&&"TX"!=e.properties.STUSPS&&"MN"!=e.properties.STUSPS&&"MI"!=e.properties.STUSPS&&"MS"!=e.properties.STUSPS&&"TN"!=e.properties.STUSPS&&"WV"!=e.properties.STUSPS&&"VA"!=e.properties.STUSPS&&"ME"!=e.properties.STUSPS?e.properties.STUSPS:"governors"==o&&"OH"!=e.properties.STUSPS&&"MI"!=e.properties.STUSPS&&"AZ"!=e.properties.STUSPS&&"ME"!=e.properties.STUSPS&&"NY"!=e.properties.STUSPS&&"PA"!=e.properties.STUSPS&&"VA"!=e.properties.STUSPS&&"FL"!=e.properties.STUSPS&&"SC"!=e.properties.STUSPS&&"GA"!=e.properties.STUSPS&&"MS"!=e.properties.STUSPS&&"AL"!=e.properties.STUSPS&&"KY"!=e.properties.STUSPS&&"TN"!=e.properties.STUSPS&&"WI"!=e.properties.STUSPS&&"IL"!=e.properties.STUSPS&&"AR"!=e.properties.STUSPS&&"LA"!=e.properties.STUSPS&&"MN"!=e.properties.STUSPS&&"IA"!=e.properties.STUSPS&&"TX"!=e.properties.STUSPS&&"KS"!=e.properties.STUSPS&&"OK"!=e.properties.STUSPS&&"SD"!=e.properties.STUSPS&&"NE"!=e.properties.STUSPS&&"NM"!=e.properties.STUSPS&&"CO"!=e.properties.STUSPS&&"ID"!=e.properties.STUSPS&&"WY"!=e.properties.STUSPS&&"CA"!=e.properties.STUSPS&&"NV"!=e.properties.STUSPS&&"AK"!=e.properties.STUSPS&&"HI"!=e.properties.STUSPS&&"MA"!=e.properties.STUSPS&&"RI"!=e.properties.STUSPS&&"CT"!=e.properties.STUSPS&&"DE"!=e.properties.STUSPS&&"DC"!=e.properties.STUSPS&&"MD"!=e.properties.STUSPS&&"NH"!=e.properties.STUSPS&&"VT"!=e.properties.STUSPS&&"NJ"!=e.properties.STUSPS?e.properties.STUSPS:void 0}),E.append("path").attr("class","state-borders").attr("d",M)});d3.behavior.zoom().on("zoom",function(){E.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),E.selectAll("circle").attr("d",M.projection(b)),E.selectAll("path").attr("d",M.projection(b))});$(".zoom").click(function(){E.selectAll("."+o+" path").classed("faded",!1).classed("active",!1)}),$(".uszoom").on("mousedown",function(){m(),d3.selectAll(".areas").classed("gone",!1),d3.selectAll(".mn").classed("gone",!1),d3.selectAll(".metro").classed("gone",!1)}),$(".mnzoom").on("mousedown",function(){h(),d3.selectAll(".areas").classed("gone",!0),d3.selectAll(".mn").classed("gone",!1)}),$(".metrozoom").on("mousedown",function(){v(),d3.selectAll(".areas").classed("gone",!0),d3.selectAll(".mn").classed("gone",!0),d3.selectAll(".metro").classed("gone",!1)}),d3.helper={},d3.helper.tooltip=function(e){return function(t){var s,r=d3.select("body").node();t.on("mouseover",function(t,i){d3.select("body").selectAll("div.tooltip").remove(),s=d3.select("body").append("div").attr("class","tooltip");var a=d3.mouse(r);s.style("left",a[0]-160+"px").style("top",a[1]-15+"px").style("position","absolute").style("z-index",1001);e(t,i)}).on("mousemove",function(t,i){var a=d3.mouse(r);s.style("left",a[0]-160+"px").style("top",a[1]-15+"px");var o=e(t,i)||"";s.html(o)}).on("mouseout",function(e,t){s.remove()})}};var A=$(e+" svg");$(document).ready(function(){var e=A.parent().width();A.attr("width",e),A.attr("height",e/(800/600))}),$(window).on("resize",function(){$(window).width()>=970&&$("#mobmenu").hide(),A.attr("style","");var e=A.parent().width();A.attr("width",e),A.attr("height",e/(800/600))})}function l(e,t){d3.selectAll(".mappage").each(function(e){d3.select(this).classed(t)?d3.select(this).style("display","block"):d3.select(this).style("display","none")})}function c(e,t){"president"==e&&(n("#president .geo","#districtName","#chart","us_states.json",e,"us","country",t),$(window).width()>500&&n("#president .geo","#districtName","#chart","us_counties.json","county","us","counties",t),a(t)),"house"==e&&(n("#house .geo","#districtName","#chart","uscongress.json",e,"us","country",t),o(t)),"senate"==e&&n("#senate .geo","#districtName","#chart","us_states.json",e,"us","country",t),"governors"==e&&n("#governors .geo","#districtName","#chart","us_states.json",e,"us","country",t),"mnhouse"==e&&(n("#mnhouse .mapState","#districtName","#chart","mnleg.json",e,"mn","country",t),n("#mnhouse .mapMetro","#districtName","#chart","mnleg_metro.json",e,"metro","country",t)),"mnsenate"==e&&(n("#mnsenate .mapState","#districtName","#chart","mnsenate.json",e,"mn","country",t),n("#mnsenate .mapMetro","#districtName","#chart","mnsenate_metro.json",e,"metro","country",t))}function d(e,t){$("#allResults .president").html("");for(var s=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","District of Columbia","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],i=[9,3,11,6,55,9,7,3,3,29,16,4,4,20,11,6,6,8,8,2,10,11,16,10,6,10,3,2,6,4,14,5,29,15,3,18,7,7,20,4,9,3,11,38,6,3,13,12,5,10,3],a=0,o=0,n=0,l=0;l<s.length;l++){var c=r(null,s[l],"winner",e,"president",null,null,null);"GOP Win"==c?o+=i[l]:"DEM Win"==c?a+=i[l]:"IND Win"==c&&(n+=i[l]),$("#allResults .president").append(r(null,s[l],"board",e,"president",i[l],null))}var d=r(null,"ME","lean",t,"president",null,null,"District 1"),p=r(null,"ME","lean",t,"president",null,null,"District 2"),u=r(null,"NE","lean",t,"president",null,null,"District 1"),h=r(null,"NE","lean",t,"president",null,null,"District 2"),v=r(null,"NE","lean",t,"president",null,null,"District 3");$(".ME01").css("background-color",d),$(".ME02").css("background-color",p),$(".NE01").css("background-color",u),$(".NE02").css("background-color",h),$(".NE03").css("background-color",v),$("#ME01").css("fill",d),$("#ME02").css("fill",p),$("#NE01").css("fill",u),$("#NE02").css("fill",h),$("#NE03").css("fill",v),$("#allResults .president").append(r("District 1","ME","board",t,"president",1,"ME01","District 1")),$("#allResults .president").append(r("District 2","ME","board",t,"president",1,"ME02","District 2")),$("#allResults .president").append(r("District 1","NE","board",t,"president",1,"NE01","District 1")),$("#allResults .president").append(r("District 2","NE","board",t,"president",1,"NE02","District 2")),$("#allResults .president").append(r("District 3","NE","board",t,"president",1,"NE03","District 3"));var m=r("District 1","ME","votesR",t,"president",1,"ME01","District 1"),S=r("District 1","ME","votesD",t,"president",1,"ME01","District 1"),f=r("District 2","ME","votesR",t,"president",1,"ME02","District 2"),g=r("District 2","ME","votesD",t,"president",1,"ME02","District 2"),b=r("District 1","NE","votesR",t,"president",1,"NE01","District 1"),M=r("District 1","NE","votesD",t,"president",1,"NE01","District 1"),w=r("District 2","NE","votesR",t,"president",1,"NE02","District 2"),E=r("District 2","NE","votesD",t,"president",1,"NE02","District 2"),A=r("District 3","NE","votesR",t,"president",1,"NE03","District 3"),D=r("District 3","NE","votesD",t,"president",1,"NE03","District 3"),N=r(null,"Maine","winner",e,"president",null,null,null),T=r(null,"Nebraska","winner",e,"president",null,null,null);"GOP Win"!=N&&"DEM Win"!=N||(m>S&&o++,m<S&&a++,f>g&&o++,f<g&&a++),"GOP Win"!=T&&"DEM Win"!=T||(b>M&&o++,b<M&&a++,w>E&&o++,w<E&&a++,A>D&&o++,A<D&&a++);var C=r(null,"United States","winner",e,"president",null,null);"GOP Win"==C?$("#rMark").html("&#x2714;"):"DEM Win"==C&&$("#dMark").html("&#x2714;"),$(".demsCount").html(a),$(".gopCount").html(o),$("#dWin").css("width",d3.format("%")(a/538)),$("#rWin").css("width",d3.format("%")(o/538)),$("#iWin").css("width",d3.format("%")(n/538)),$("#dChange").html(""),$("#rChange").html(""),$(".filter_box").keyup(function(e){$("#allResults .president .tableRow").hide(),$("#allResults .president .tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$("#allResults .president .tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".president .tableRow").click(function(){$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e=$(this).attr("name");$(".cartoState").removeClass("selectedBox"),$("#cartogram #"+$(this).attr("name")).addClass("selectedBox"),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()});var U=r(null,"United States","timestamp",e,"president",null,null);$("#timestamp").html("Last update: "+U.toLocaleTimeString())}function p(e){$("#allResults .senate").html(""),$("#rMark, #dMark").html("");for(var t=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maryland","Missouri","Nevada","New Hampshire","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","South Carolina","South Dakota","Utah","Vermont","Washington","Wisconsin"],s=36,i=30,a=0,o=0;o<t.length;o++){var n=r(null,t[o],"winner",e,"senate",null,null);"GOP Win"==n?i++:"DEM Win"==n?s++:"IND Win"==n&&a++,$("#allResults .senate").append(r(null,t[o],"board",e,"senate",null,null))}$(".demsCount").html(s),$(".gopCount").html(i),$("#dWin").css("width",d3.format("%")(s/100)),$("#rWin").css("width",d3.format("%")(i/100)),$("#iWin").css("width",d3.format("%")(a/100)),$("#dChange").html(d3.format("+")(s-46)),$("#rChange").html(d3.format("+")(i-54)),$(".filter_box").keyup(function(e){$("#allResults .senate .tableRow").hide(),$("#allResults .senate .tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$("#allResults .senate .tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".senate .tableRow").click(function(){d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e=$(this).attr("name")+"s";$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()})}function u(e){$("#allResults .governors").html(""),$("#rMark, #dMark").html("");for(var t=["Delaware","Indiana","Missouri","Montana","New Hampshire","North Carolina","North Dakota","Oregon","Utah","Vermont","Washington","West Virginia"],s=10,i=27,a=1,o=0;o<t.length;o++){var n=r(null,t[o],"winner",e,"governors",null,null);"GOP Win"==n?i++:"DEM Win"==n?s++:"IND Win"==n&&a++,$("#allResults .governors").append(r(null,t[o],"board",e,"governors",null,null))}$(".demsCount").html(s),$(".gopCount").html(i),$("#dWin").css("width",d3.format("%")(s/50)),$("#rWin").css("width",d3.format("%")(i/50)),$("#iWin").css("width",d3.format("%")(a/50)),$("#dChange").html(d3.format("+")(s-18)),$("#rChange").html(d3.format("+")(i-31)),$(".filter_box").keyup(function(e){$("#allResults .governors .tableRow").hide(),$("#allResults .governors .tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$("#allResults .governors .tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".governors .tableRow").click(function(){d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e=$(this).attr("name")+"g";$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()})}function h(e){$("#allResults .house").html(""),$("#rMark, #dMark").html("")
;for(var t=["Alabama","Alaska","Arizona","Arkansas","California","Colorado","Connecticut","Delaware","Florida","Georgia","Hawaii","Idaho","Illinois","Indiana","Iowa","Kansas","Kentucky","Louisiana","Maine","Maryland","Massachusetts","Michigan","Minnesota","Mississippi","Missouri","Montana","Nebraska","Nevada","New Hampshire","New Jersey","New Mexico","New York","North Carolina","North Dakota","Ohio","Oklahoma","Oregon","Pennsylvania","Rhode Island","South Carolina","South Dakota","Tennessee","Texas","Utah","Vermont","Virginia","Washington","West Virginia","Wisconsin","Wyoming"],s=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53],i=0,a=0,o=0,n=0;n<s.length;n++)for(var l=0;l<t.length;l++){var c=r("District "+s[n],t[l],"winner",e,"ushouse",null,"District "+s[n]);"GOP Win"==c?a++:"DEM Win"==c?i++:"IND Win"==c&&o++}$("#allResults .house").append(r("District 1","Minnesota","board",e,"ushouse",null,"1")),$("#allResults .house").append(r("District 2","Minnesota","board",e,"ushouse",null,"2")),$("#allResults .house").append(r("District 3","Minnesota","board",e,"ushouse",null,"3")),$("#allResults .house").append(r("District 4","Minnesota","board",e,"ushouse",null,"4")),$("#allResults .house").append(r("District 5","Minnesota","board",e,"ushouse",null,"5")),$("#allResults .house").append(r("District 6","Minnesota","board",e,"ushouse",null,"6")),$("#allResults .house").append(r("District 7","Minnesota","board",e,"ushouse",null,"7")),$("#allResults .house").append(r("District 8","Minnesota","board",e,"ushouse",null,"8")),$(".demsCount").html(i),$(".gopCount").html(a),$("#dWin").css("width",d3.format("%")(i/435)),$("#rWin").css("width",d3.format("%")(a/435)),$("#iWin").css("width",d3.format("%")(o/435)),$("#dChange").html(d3.format("+")(i-188)),$("#rChange").html(d3.format("+")(a-247)),$(".filter_box").keyup(function(e){$("#allResults .house .tableRow").hide(),$("#allResults .house .tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$("#allResults .house .tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".house .tableRow").click(function(){d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e=$(this).attr("name");$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click();var t=$(this).attr("name")+"c";$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Click()})}function v(e){$("#allResults .mnhouse").html(""),$("#rMark, #dMark").html("");for(var t=["1A","1B","2A","2B","3A","3B","4A","4B","5A","5B","6A","6B","7A","7B","8A","8B","9A","9B","10A","10B","11A","11B","12A","12B","13A","13B","14A","14B","15A","15B","16A","16B","17A","17B","18A","18B","19A","19B","20A","20B","21A","21B","22A","22B","23A","23B","24A","24B","25A","25B","26A","26B","27A","27B","28A","28B","29A","29B","30A","30B","31A","31B","32A","32B","33A","33B","34A","34B","35A","35B","36A","36B","37A","37B","38A","38B","39A","39B","40A","40B","41A","41B","42A","42B","43A","43B","44A","44B","45A","45B","46A","46B","47A","47B","48A","48B","49A","49B","50A","50B","51A","51B","52A","52B","53A","53B","54A","54B","55A","55B","56A","56B","57A","57B","58A","58B","59A","59B","60A","60B","61A","61B","62A","62B","63A","63B","64A","64B","65A","65B","66A","66B","67A","67B"],s=0,i=0,a=0,o=0;o<t.length;o++){var n=r("District "+t[o],"Minnesota","winner",e,"mnhouse",null,"District "+t[o]);"GOP Win"==n?i++:"DEM Win"==n?s++:"IND Win"==n&&a++,$("#allResults .mnhouse").append(r("District "+t[o],"Minnesota","board",e,"mnhouse",null,t[o]))}$(".demsCount").html(s),$(".gopCount").html(i),$("#dWin").css("width",d3.format("%")(s/134)),$("#rWin").css("width",d3.format("%")(i/134)),$("#iWin").css("width",d3.format("%")(a/134)),$("#dChange").html(d3.format("+")(s-61)),$("#rChange").html(d3.format("+")(i-73)),$(".filter_box").keyup(function(e){$("#allResults .mnhouse .tableRow").hide(),$("#allResults .mnhouse .tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$("#allResults .mnhouse .tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".mnhouse .tableRow").click(function(){d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e="mnh"+$(this).attr("name");$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()})}function m(e){$("#allResults .mnsenate").html(""),$("#rMark, #dMark").html("");for(var t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67],s=0,i=0,a=0,o=0;o<t.length;o++){var n=r("District "+t[o],"Minnesota","winner",e,"mnsenate",null,"District "+t[o]);"GOP Win"==n?i++:"DEM Win"==n?s++:"IND Win"==n&&a++,$("#allResults .mnsenate").append(r("District "+t[o],"Minnesota","board",e,"mnsenate",null,t[o]))}$(".demsCount").html(s),$(".gopCount").html(i),$("#dWin").css("width",d3.format("%")(s/67)),$("#rWin").css("width",d3.format("%")(i/67)),$("#iWin").css("width",d3.format("%")(a/67)),$("#dChange").html(d3.format("+")(s-39)),$("#rChange").html(d3.format("+")(i-28)),$(".filter_box").keyup(function(e){$(".tableRow").hide(),$(".tableRow").removeClass("selectedBox");var t=String($(".filter_box").val());$(".tableRow").each(function(){-1!=$(this).text().toUpperCase().indexOf(t.toUpperCase())&&$(this).show()})}),$(".mnsenate .tableRow").click(function(){d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".tableRow").removeClass("selectedBox"),$(this).addClass("selectedBox");var e="mns"+$(this).attr("name");$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+e.replace(new RegExp(" ","g"),"-")+"']").d3Click()})}function S(e,t,s,a,o,n,c,S){function f(r){"president"==r&&d(e,c),"senate"==r&&p(t),"governors"==r&&u(s),"mnsenate"==r&&m(a),"mnhouse"==r&&v(o),"house"==r&&h(n)}function g(){$(".ME01, #ME01").hover(function(e){i(r("District 1","ME","table",c,"president",null,"District 1","District 1")),$(".block").removeClass("blockSelect"),$(".ME01.evcd").addClass("blockSelect"),$("#evcdME01").addClass("selectedBox"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$("#evcdME01").click(function(e){i(r("District 1","ME","table",c,"president",null,"District 1","District 1")),$(".block").removeClass("blockSelect"),$(".ME01.evcd").addClass("blockSelect"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$(".ME02, #ME02").hover(function(e){i(r("District 2","ME","table",c,"president",null,"District 2","District 2")),$(".block").removeClass("blockSelect"),$(".ME02.evcd").addClass("blockSelect"),$("#evcdME02").addClass("selectedBox"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$("#evcdME02").click(function(e){i(r("District 2","ME","table",c,"president",null,"District 2","District 2")),$(".block").removeClass("blockSelect"),$(".ME02.evcd").addClass("blockSelect"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$(".NE01, #NE01").hover(function(e){i(r("District 1","NE","table",c,"president",null,"District 1","District 1")),$(".block").removeClass("blockSelect"),$(".NE01.evcd").addClass("blockSelect"),$("#evcdNE01").addClass("selectedBox"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$("#evcdNE01").click(function(e){i(r("District 1","NE","table",c,"president",null,"District 1","District 1")),$(".block").removeClass("blockSelect"),$(".NE01.evcd").addClass("blockSelect"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$(".NE02, #NE02").hover(function(e){i(r("District 2","NE","table",c,"president",null,"District 2","District 2")),$(".block").removeClass("blockSelect"),$(".NE02.evcd").addClass("blockSelect"),$("#evcdNE02").addClass("selectedBox"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$("#evcdNE02").click(function(e){i(r("District 2","NE","table",c,"president",null,"District 2","District 2")),$(".block").removeClass("blockSelect"),$(".NE02.evcd").addClass("blockSelect"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$(".NE03, #NE03").hover(function(e){i(r("District 3","NE","table",c,"president",null,"District 3","District 3")),$(".block").removeClass("blockSelect"),$(".NE03.evcd").addClass("blockSelect"),$("#evcdNE03").addClass("selectedBox"),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$("#evcdNE03").click(function(e){i(r("District 3","NE","table",c,"president",null,"District 3","District 3")),$(".block").removeClass("blockSelect"),$(".NE03.evcd").addClass("blockSelect"),d3.selectAll("path").classed("faded",!1).classed("active",!1)})}var M=0;f(w),g(),$(".cartoState").click(function(t){i(r($(this).attr("name"),$(this).attr("name"),"table",e,"president"))}),$(".cartoState polygon").hover(function(t){$(".cartoState, .tableRow").removeClass("selectedBox"),$(".tableRow[name="+$(this).parent().attr("id")+"]").addClass("selectedBox"),i(r($(this).parent().attr("name"),$(this).parent().attr("name"),"table",e,"president"))}),$(".cartoState").mouseleave(function(t){$(".cartoState").removeClass("blockSelect"),$(".cartoState, .tableRow").removeClass("selectedBox"),"mn"==b?i(r("Minnesota","Minnesota","table",e,"president")):"us"==b?i(r("United States","United States","table",e,"president")):"cd"==b?i(r("District 2","Minnesota","table",n,"ushouse",null,"District 2")):$("#infobox").html("")}),$(".block").mouseleave(function(t){$(".block").removeClass("blockSelect"),$(".tableRow").removeClass("selectedBox"),"mn"==b?i(r("Minnesota","Minnesota","table",e,"president")):"us"==b?i(r("United States","United States","table",e,"president")):"cd"==b?i(r("District 2","Minnesota","table",n,"ushouse",null,"District 2")):$("#infobox").html(""),d3.selectAll("path").classed("faded",!1).classed("active",!1)}),$(".zoom").click(function(t){$(".block").removeClass("blockSelect"),$(".tableRow").removeClass("selectedBox"),$(".cartoState").removeClass("selectedBox"),d3.selectAll(".cd").classed("active",!1),$(".tableRow").show(),$(".filter_box").val(""),"mn"==b?i(r("Minnesota","Minnesota","table",e,"president")):"us"==b?i(r("United States","United States","table",e,"president")):"cd"==b?i(r("District 2","Minnesota","table",n,"ushouse",null,"District 2")):$("#infobox").html("")}),$(".stateBlock").click(function(e){$(".block").removeClass("blockSelect"),$(this).addClass("blockSelect");var t=$(this).attr("ab");$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Click()}),$(".stateBlock").hover(function(e){var t=$(this).attr("ab");$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Down(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Up(),$("[id='"+t.replace(new RegExp(" ","g"),"-")+"']").d3Click()},function(){}),$(".has-sub").click(function(e){$(".raceSwitch, li").removeClass("selected2")}),$(".raceSwitch").click(function(t){b=$(this).attr("infobox"),"mn"==b?i(r("Minnesota","Minnesota","table",e,"president")):"us"==b?i(r("United States","United States","table",e,"president")):"cd"==b?i(r("District 2","Minnesota","table",n,"ushouse",null,"District 2")):$("#infobox").html(""),f($(this).attr("data")),$(".raceSwitch, li").removeClass("selected2"),$(".cartoState").removeClass("selectedBox"),$(this).addClass("selected2"),$(".raceSwitch").find("a").removeClass("selected3"),$(this).find("a").addClass("selected3"),$(".dataviz, .bigBoard").hide(),$("#"+$(this).attr("data")).show(),$("."+$(this).attr("data")).show(),w=$(this).attr("data"),$(".legendBlock").hide(),$("#"+$(this).attr("legend")).show(),$(".dparty").html($(this).attr("dLabel")),$(".rparty").html($(this).attr("rLabel")),"showMe"==$(this).attr("stateKey")?$(".sideStates").show():$(".sideStates").hide(),$(".map").hide(),$("."+$(this).attr("type")).show(),$("."+$(this).attr("type")).css("display","inline-block"),M++,l(".map",$(this).attr("layer")),g()})}function f(e,t,s,a,o){d3.json("shapefiles/"+t,function(t,s){"cartoHouse"!=a?d3.selectAll(e+" path").data(s.features).style("fill",function(e){return"president"==a?($("#president .sideStates .block").each(function(t,s){if($(this).hasClass(e.properties.STUSPS)){var i=r(e.properties.NAME,e.properties.NAME,"lean",o,a);$(this).css("background-color",i)}}),r(e.properties.NAME,e.properties.NAME,"lean",o,a)):"senate"==a?($("#senate .sideStates .block").each(function(t,s){if($(this).hasClass(e.properties.STUSPS)){var i=r(e.properties.NAME,e.properties.NAME,"lean",o,a);$(this).css("background-color",i)}}),r(e.properties.NAME,e.properties.NAME,"lean",o,a)):"governors"==a?($("#governors .sideStates .block").each(function(t,s){if($(this).hasClass(e.properties.STUSPS)){var i=r(e.properties.NAME,e.properties.NAME,"lean",o,a);$(this).css("background-color",i)}}),r(e.properties.NAME,e.properties.NAME,"lean",o,a)):"county"==a?r(e.properties.GEOID,null,"colors",o,a):"house"==a?r("District "+e.properties.DISTRICT,e.properties.STATENAME,"lean",o,"ushouse",null,"District "+e.properties.DISTRICT):"mnsenate"==a||"mnhouse"==a?r("District "+e.properties.DISTRICT,"Minnesota","lean",o,a):void 0}).on("mousedown",function(e,t){e.properties.NAME;if($(".district").removeClass("selected"),$(".tableRow").removeClass("selectedBox"),$(".tableRow[name="+e.properties.STUSPS+"]").addClass("selectedBox"),$(".tableRow[name="+e.properties.DISTRICT+"]").addClass("selectedBox"),"president"==a||"senate"==a||"governors"==a)i(r(e.properties.NAME,e.properties.NAME,"table",o,a)),$(".block").removeClass("blockSelect"),$("."+e.properties.STUSPS).addClass("blockSelect");else if("county"==a)i(r(e.properties.GEOID,null,"table",o,a,null,e.properties.NAME));else if("house"==a){if(0==e.properties.DISTRICT)var s="1";else var s=e.properties.DISTRICT;i(r("District "+e.properties.DISTRICT,e.properties.STATENAME,"table",o,"ushouse",null,"District "+s)),$(".tableRow").removeClass("selectedBox"),"Minnesota"==e.properties.STATENAME&&$(".tableRow[name="+e.properties.STATENAME+e.properties.DISTRICT+"]").addClass("selectedBox")}else if("mnsenate"==a||"mnhouse"==a){if("32B"==e.properties.DISTRICT)return i("<div class='districtName'>District 32B, MN</div><div>No race. A special election has been called for Feb. 14, 2017.</div>");i(r("District "+e.properties.DISTRICT,"Minnesota","table",o,a,null,"District "+e.properties.DISTRICT))}return!1}).call(d3.helper.tooltip(function(e,t){if($(window).width()>500){if("president"==a||"senate"==a||"governors"==a)return r(e.properties.NAME,e.properties.NAME,"tooltip",o,a);if("county"==a)return r(e.properties.GEOID,null,"tooltip",o,a,null,e.properties.NAME);if("house"==a){if(0==e.properties.DISTRICT)var s="1";else var s=e.properties.DISTRICT;return r("District "+e.properties.DISTRICT,e.properties.STATENAME,"tooltip",o,"ushouse",null,"District "+s)}if("mnsenate"==a||"mnhouse"==a)return"32B"==e.properties.DISTRICT?"<div class='districtName'>District 32B, MN</div><div>No race</div>":r("District "+e.properties.DISTRICT,"Minnesota","tooltip",o,a,null,"District "+e.properties.DISTRICT)}})):d3.selectAll(e+" path").data(topojson.feature(s,s.objects.uscd).features).style("fill",function(e){return r("District "+e.properties.d,e.properties.State,"lean",o,"ushouse",null,"District "+e.properties.d)}).attr("class","cd").on("mousedown",function(e,t){if(d3.selectAll(".cd").classed("active",!1),d3.select(this).classed("active",!0),$(".tableRow").removeClass("selectedBox"),"Minnesota"==e.properties.State&&$(".tableRow[name="+e.properties.State+e.properties.d+"]").addClass("selectedBox"),0==e.properties.d)var s="1";else var s=e.properties.d;i(r("District "+e.properties.d,e.properties.State,"table",o,"ushouse",null,"District "+s))}).call(d3.helper.tooltip(function(e,t){if($(window).width()>500)return r("District "+e.properties.d,e.properties.State,"tooltip",o,"ushouse",null,"District "+e.properties.d);$(".tooltip").hide()}))})}function g(){d3.json(E+"?"+Math.floor(1e3*Math.random()),function(e,t){d3.json(A+"?"+Math.floor(1e3*Math.random()),function(e,s){d3.json(D+"?"+Math.floor(1e3*Math.random()),function(e,o){d3.json(N+"?"+Math.floor(1e3*Math.random()),function(e,n){d3.json(T+"?"+Math.floor(1e3*Math.random()),function(e,l){d3.json(C+"?"+Math.floor(1e3*Math.random()),function(e,c){d3.json(U+"?"+Math.floor(1e3*Math.random()),function(e,d){var p=t,u=s,h=o,v=n,m=l,g=c,M=d;$(".raceSwitch").on("blur change click dblclick error focus focusin focusout hover keydown keypress keyup load mousedown mouseenter mouseleave mousemove mouseout mouseover mouseup resize scroll select submit",function(e){return e.stopPropagation(),!1}),$(".raceSwitch").off("click"),$(".block, .cartoState, .tableRow, path, .stateBlock, .ME01, #ME01, .ME02, #ME02, .NE01, #NE01, .NE02, #NE02, .NE03, #NE03, .evcd, .cartoState polygon").off(),f("#USMAP .country","us_states.json","country","president",p),$(window).width()>500&&f("#USMAP .counties","us_counties.json","counties","county",p),a(p),$(window).width()>500&&f("#USSENATE .country","us_states.json","country","senate",u),$(window).width()>500&&f("#USGOV .country","us_states.json","country","governors",h),f("#cartoHouse svg","usdistricts_cartogram.json","country","cartoHouse",g),f("#USHOUSE .country","uscongress.json","country","house",g),f("#MNHOUSE .country","mnleg.json","country","mnhouse",m),$(window).width()>500&&f("#MNHOUSEMETRO","mnleg_metro.json","country","mnhouse",m),f("#MNSENATE .country","mnsenate.json","country","mnsenate",v),$(window).width()>500&&f("#MNSENATEMETRO","mnsenate_metro.json","country","mnsenate",v),d3.selectAll("path").classed("faded",!1).classed("active",!1),$(".block").removeClass("blockSelect"),S(p,u,h,v,m,g,M),"mn"==b?i(r("Minnesota","Minnesota","table",p,"president")):"us"==b?i(r("United States","United States","table",p,"president")):"cd"==b?i(r("District 2","Minnesota","table",g,"ushouse",null,"District 2")):$("#infobox").html("")})})})})})})})}var b="us";jQuery.fn.d3Click=function(){this.each(function(e,t){var s=document.createEvent("MouseEvents");return s.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(s),!1})},jQuery.fn.d3Down=function(){this.each(function(e,t){var s=document.createEvent("MouseEvents");return s.initMouseEvent("mousedown",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(s),!1})},jQuery.fn.d3Up=function(){this.each(function(e,t){var s=document.createEvent("MouseEvents");return s.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(s),!1})},$.urlParam=function(e){return new RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href)[1]||0};var M=$.urlParam("race");$(".raceSwitch, li").removeClass("selected2"),$(".raceSwitch[section="+M+"]").addClass("selected2"),$("li[section="+M+"]").addClass("selected2");var w=M,E="./data/prezCounty2016.json",A="./data/ussenate2016.json",D="./data/usgov2016.json",N="./data/mnsenate2016.json",T="./data/mnhouse2016.json",C="./data/ushouse2016.json",U="./data/prezEVCD2016.json";d3.json(E+"?"+Math.floor(1e3*Math.random()),function(e,t){d3.json(A+"?"+Math.floor(1e3*Math.random()),function(s,a){d3.json(D+"?"+Math.floor(1e3*Math.random()),function(o,n){d3.json(N+"?"+Math.floor(1e3*Math.random()),function(d,p){d3.json(T+"?"+Math.floor(1e3*Math.random()),function(u,h){d3.json(C+"?"+Math.floor(1e3*Math.random()),function(v,m){d3.json(U+"?"+Math.floor(1e3*Math.random()),function(f,b){if(null!=e||null!=s||null!=o||null!=d||null!=u||null!=v||null!=f)return void function(){$("#fulldataviz, #loader").hide(),$("#fallback").html("<div style='padding:20px; text-align:center;'>We're experiencing technical difficulties, please check back shortly.</div><div><img src='http://static.startribune.com/news/elections/frontpage_bars_maps.png' width='100%' /></div><div><img src='http://static.startribune.com/news/elections/frontpage_bars_desktop.png' width='100%' /></div>"),$("#fallback").show()}();var w=t,E=a,A=n,D=p,N=h,T=m,C=b;c("president",w),$(window).width()>500&&c("senate",E),$(window).width()>500&&c("governors",A),c("mnsenate",D),c("mnhouse",N),c("house",T),$(document).ready(function(){$(".dataviz").hide(),$("#"+M).show(),l(".map","country");var e=$(window).width();e<500&&($("svg").width(e),$("svg").height(e/1.5))}),S(w,E,A,D,N,T,C,!1),i(r("United States","United States","table",w,"president")),$(".dparty").html("Clinton"),$(".rparty").html("Trump"),$("#prezButton").trigger("click"),$("#table .president").show(),window.setTimeout(function(){$("#message").html("<div class='message'>Rendering results...</div><img src='http://stmedia.startribune.com/designimages/ajax-loader.gif' class='loader-img'>")},3e3),window.setTimeout(function(){$("#wrapper").show(),$(".loading-mask").hide();var e=120;setInterval(function(){e--,$(".ticker").html(e),0==e&&(e=120,$(".ticker").html("--"),g())},1e3)},6e3)})})})})})})}),$("#cssmenu li.active").addClass("open").children("ul").show(),$("#cssmenu li.has-sub>a, #mobmenu li.has-sub>a").on("click",function(){$(this).removeAttr("href");var e=$(this).parent("li");e.hasClass("open")?(e.removeClass("open"),e.find("li").removeClass("open"),e.find("ul").slideUp(200)):(e.addClass("open"),e.children("ul").slideDown(200),e.siblings("li").children("ul").slideUp(200),e.siblings("li").removeClass("open"),e.siblings("li").find("li").removeClass("open"),e.siblings("li").find("ul").slideUp(200))}),$("button").click(function(){$("#mobmenu").toggle()}),$("#mobmenu .raceSwitch").click(function(){$("#mobmenu").toggle()})},{}]},{},[1]);