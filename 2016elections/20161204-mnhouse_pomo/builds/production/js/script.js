!function t(e,r,o){function a(n,s){if(!r[n]){if(!e[n]){var l="function"==typeof require&&require;if(!s&&l)return l(n,!0);if(i)return i(n,!0);throw new Error("Cannot find module '"+n+"'")}var c=r[n]={exports:{}};e[n][0].call(c.exports,function(t){var r=e[n][1][t];return a(r||t)},c,c.exports,t,e,r,o)}return r[n].exports}for(var i="function"==typeof require&&require,n=0;n<o.length;n++)a(o[n]);return a}({1:[function(t,e,r){d3.csv("./data/mnhouse2016.csv",function(t){return{district:t.district,gop:+t.gop,dfl:+t.dfl}},function(t,e){d3.csv("./data/mnhouse2012.csv",function(t){return{district:t.district,gop:+t.gop,dfl:+t.dfl}},function(t,r){d3.csv("./data/mnhouse2008.csv",function(t){return{district:t.district,gop:+t.gop,dfl:+t.dfl}},function(t,o){function a(t,e,r){for(var o=0;o<r.length;o++)if(t.properties.DISTRICT==r[o].district){if(r[o].gop>r[o].dfl)return"r3";if(r[o].gop<r[o].dfl)return"d3"}}function i(t,e,r){for(var o=0;o<r.length;o++)if(t.properties.DISTRICT==r[o].district){if(r[o].gop>r[o].dfl)return"<div class='districtName'>District "+t.properties.DISTRICT+"</div><div class='republican'>"+d3.format(".1f")(r[o].gop)+"% GOP</div><div class='democrat'>"+d3.format(".1f")(r[o].dfl)+"% DFL</div>";if(r[o].gop<r[o].dfl)return"<div class='districtName'>District "+t.properties.DISTRICT+"</div><div class='democrat'>"+d3.format(".1f")(r[o].dfl)+"% DFL</div><div class='republican'>"+d3.format(".1f")(r[o].gop)+"% GOP</div>"}return"<div class='districtName'>District "+t.properties.DISTRICT+"</div>"}function n(t,e,r,o,n,s,l,c){function d(t){if(t&&p!==t){var e=v.centroid(t);e[0],e[1],1,p=t}else u/2,f/2,1,p=null;g.selectAll("path").classed("faded",!1).classed("active",p&&function(t){return t===p})}var p,u=320,f=400;if("us"==s)var m=d3.geo.albersUsa().scale(700).translate([330,200]);else if("mn"==s)var m=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==s)var m=d3.geo.mercator().scale([16800]).center([-92.384033,45.209134]);var v=d3.geo.path().projection(m),h=d3.select(t+" svg").attr("width",u).attr("height",f);h.append("rect").attr("class","background").attr("width",u).attr("height",f);var g=h.append("g");d3.json("shapefiles/"+o,function(t,e){g.append("g").attr("class","states").selectAll("path").data(e.features).enter().append("path").attr("d",v).attr("id",function(t){return(s+"_"+t.properties.DISTRICT).replace(new RegExp(" ","g"),"-")}).attr("precinctName",function(t){return t.properties.DISTRICT}).attr("class",function(t){return a(t,n,l)}).style("stroke-width","1px").style("stroke","#fff").call(d3.helper.tooltip(function(t,e){return i(t,n,l)})),g.append("path").attr("id","state-borders").attr("d",v)});d3.behavior.zoom().on("zoom",function(){g.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),g.selectAll("circle").attr("d",v.projection(m)),g.selectAll("path").attr("d",v.projection(m))});$(".zoom, .switch, #close, .mapSwitch").click(function(){d(),$("#filter input").val(""),$(".district").removeClass("selected"),$("#infobox").hide(),d3.selectAll(".map rect").classed("faded",!1),d3.selectAll(".map rect").classed("active",!1),$(".rightSide").show()}),$(".mapSwitch").click(function(){$("#filter input").val("")})}var s=o,l=r,c=e;$.urlParam=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null!=e?e[1]||0:null};var d=$.urlParam("chart");null!=d?($(".chart").hide(),$("#"+d).show()):$(".chart").show(),d3.helper={},d3.helper.tooltip=function(t){return function(e){var r,o=d3.select("body").node();e.on("mouseover",function(e,a){d3.select("body").selectAll("div.tooltip").remove(),r=d3.select("body").append("div").attr("class","tooltip");var i=d3.mouse(o);r.style("left",i[0]+10+"px").style("top",i[1]-15+"px").style("position","absolute").style("z-index",1001);t(e,a)}).on("mousemove",function(e,a){var i=d3.mouse(o);r.style("left",i[0]+10+"px").style("top",i[1]-15+"px");var n=t(e,a)||"";r.html(n)}).on("mouseout",function(t,e){r.remove()})}},function(){var t={top:20,right:40,bottom:20,left:60};c3.generate({bindto:"#chart",padding:t,data:{x:"x",columns:[["x",2002,2004,2006,2008,2010,2012,2014,2016],["DFL seats",52,66,85,87,62,73,62,57],["GOP seats",81,68,49,47,72,61,72,76]],type:"line"},color:{pattern:["#3F88C5","#A52129"]},axis:{y:{min:0,padding:{bottom:0},tick:{values:[0,67,96],count:3,format:d3.format(".0f")}},x:{tick:{values:["2002","2004","2008","2012","2016"],count:5,multiline:!1},padding:{left:.7,right:.3}}},grid:{y:{lines:[{value:67,text:"",position:"start",class:"powerline"}]},x:{lines:[{value:2002,text:"Midterm",position:"start"},{value:2004,text:"Bush (R) Win",position:"start"},{value:2006,text:"Midterm",position:"start"},{value:2008,text:"Obama (D) Win",position:"start"},{value:2010,text:"Midterm",position:"start"},{value:2012,text:"Obama (D) Win",position:"start"},{value:2014,text:"Midterm",position:"start"},{value:2016,text:"Trump (R) Win",position:"start"}]}}}),path=d3.selectAll("#chart path");var e=path.node().getTotalLength();path.attr("stroke-dasharray",e+" "+e).attr("stroke-dashoffset",e).transition().duration(1500).ease("linear").attr("stroke-dashoffset",0)}(),n("#mapMetro","#infobox","#chart","mnleg_metro.json","house","metro",c,0),n("#mapState","#infobox","#chart","mnleg.json","house","mn",c,0),n("#mapMetro2012","#infobox","#chart","mnleg_metro.json","house","metro",l,0),n("#mapState2012","#infobox","#chart","mnleg.json","house","mn",l,0),n("#mapMetro2008","#infobox","#chart","mnleg2008_metro.json","redistrict","metro",s,0),n("#mapState2008","#infobox","#chart","mnleg2002.json","redistrict","mn",s,0)})})})},{}]},{},[1]);