!function t(e,r,o){function n(i,c){if(!r[i]){if(!e[i]){var s="function"==typeof require&&require;if(!c&&s)return s(i,!0);if(a)return a(i,!0);throw new Error("Cannot find module '"+i+"'")}var p=r[i]={exports:{}};e[i][0].call(p.exports,function(t){var r=e[i][1][t];return n(r||t)},p,p.exports,t,e,r,o)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<o.length;i++)n(o[i]);return n}({1:[function(t,e,r){$.urlParam=function(t){var e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href);return null!=e?e[1]||0:null};var o=$.urlParam("chart");null!=o?($(".chart").hide(),$("#"+o).show()):$(".chart").show(),d3.csv("./data/votes.csv",function(t){return{votes:+t.votes,vtd:t.vtdcode}},function(t,e){d3.csv("./data/counties.csv",function(t){return{pct:+t.pct,county:t.county}},function(t,r){function o(t,e,r,o,i,c,s,p){function l(t){if(t&&u!==t){var e=m.centroid(t);e[0],e[1],1,u=t}else d/2,f/2,1,u=null;g.selectAll("path").classed("faded",!1).classed("active",u&&function(t){return t===u})}var u,d=600,f=800;if("us"==c)var v=d3.geo.albersUsa().scale(700).translate([330,200]);else if("mn"==c)var v=d3.geo.albersUsa().scale(5037).translate([50,970]);else if("metro"==c)var v=d3.geo.mercator().scale([21e3]).center([-92.7,45.059134]);var m=d3.geo.path().projection(v),h=d3.select(t+" svg").attr("width",d).attr("height",f);h.append("rect").attr("class","background").attr("width",d).attr("height",f);var g=h.append("g");d3.json("shapefiles/"+o,function(t,e){g.append("g").attr("class","states").selectAll("path").data(e.features).enter().append("path").attr("d",m).attr("id",function(t){return t.properties.county_id}).attr("class",function(t){if("counties"==i)for(var e=0;e<a.length;e++)if(a[e].county==t.properties.COUNTYNAME){if(a[e].pct>=.4)return"purple5";if(a[e].pct>=.3)return"purple4";if(a[e].pct>=.2)return"purple3";if(a[e].pct>=.1)return"purple2";if(a[e].pct>=0)return"purple1"}if("precinct"==i)for(var e=0;e<n.length;e++)if(n[e].vtd==t.properties.VTDID){if(n[e].votes>=400)return"purple5";if(n[e].votes>=320)return"purple4";if(n[e].votes>=240)return"purple3";if(n[e].votes>=160)return"purple2";if(n[e].votes>=0)return"purple1"}return"null"}).style("stroke-width",function(t,e){return"counties"==i?"0.5px":"0"}).style("stroke","#bbb").call(d3.helper.tooltip(function(t,e){if("counties"==i){for(var e=0;e<a.length;e++){if(a[e].pct>=.18)var r="purple5";else if(a[e].pct>=.15)var r="purple4";else if(a[e].pct>=.1)var r="purple3";else if(a[e].pct>=.05)var r="purple2";else if(a[e].pct>=0)var r="purple1";if(a[e].county==t.properties.COUNTYNAME)return"<div class='countyName'>"+t.properties.COUNTYNAME+" County</div><div class='"+r+"'>"+d3.format("%")(a[e].pct)+" absentee voters</div>"}return"<div class='countyName'>"+t.properties.COUNTYNAME+" County</div><div>No data</div>"}})),g.append("path").attr("id","state-borders").attr("d",m)});d3.behavior.zoom().on("zoom",function(){g.attr("transform","translate("+d3.event.translate.join(",")+")scale("+d3.event.scale+")"),g.selectAll("circle").attr("d",m.projection(v)),g.selectAll("path").attr("d",m.projection(v))});$(".zoom, .switch, #close, .mapSwitch").click(function(){l()}),d3.helper={},d3.helper.tooltip=function(t){return function(e){var r,o=d3.select("body").node();e.on("mouseover",function(e,n){d3.select("body").selectAll("div.tooltip").remove(),r=d3.select("body").append("div").attr("class","tooltip");var a=d3.mouse(o);r.style("left",a[0]-160+"px").style("top",a[1]-15+"px").style("position","absolute").style("z-index",1001);t(e,n)}).on("mousemove",function(e,n){var a=d3.mouse(o);r.style("left",a[0]-160+"px").style("top",a[1]-15+"px");var i=t(e,n)||"";r.html(i)}).on("mouseout",function(t,e){r.remove()})}};var y=$(t+" svg");$(document).ready(function(){var t=y.parent().width();y.attr("width",t),y.attr("height",t/.75)}),$(window).on("resize",function(){y.attr("style","");var t=y.parent().width();y.attr("width",t),y.attr("height",t/.75)})}var n=e,a=r;o("#mapPrecinct","#infobox","#chart","mnprecincts.json","precinct","mn",n,0),o("#mapMetro","#infobox","#chart","metro_precincts.json","precinct","metro",n,0),o("#mapCounties","#infobox","#chart","counties.json","counties","mn",a,0),function(){var t={top:20,right:60,bottom:20,left:120};c3.generate({bindto:"#regionChart",padding:t,data:{columns:[["Presidential Voting 2012",.33,.23,.1,.09,.25],["Absentee Ballots 2016",.41,.23,.07,.07,.23]],type:"bar"},color:{pattern:["#333","#865f67"]},axis:{rotated:!0,y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("%")}},x:{type:"category",categories:["Hennepin/Ramsey counties","Rest of 7 county","Outer suburbs","Rochester-St.Cloud-Duluth","Remainder of outstate"]}}})}(),function(){var t={top:20,right:60,bottom:20,left:120};c3.generate({bindto:"#ageChart",padding:t,data:{columns:[["Registered Voters",.08,.16,.16,.18,.19,.13,.1,0],["Absentee Voters 9/1-10/30",.05,.07,.07,.1,.21,.25,.22,.04],["Absentee Voters 10/31-11/7",.06,.11,.12,.16,.21,.16,.11,.08]],type:"bar"},color:{pattern:["#333","#865f67","#C1ACB1"]},axis:{rotated:!0,y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format("%")}},x:{type:"category",categories:["18-24","25-34","35-44","45-54","55-64","65-74","75+","No age available"]}}})}(),function(){var t={top:20,right:60,bottom:20,left:60};c3.generate({bindto:"#dateChart",padding:t,data:{columns:[["Ballots Accepted",1425,19693,35324,45298,98057,124844,206871]],type:"line"},color:{pattern:["#865f67"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format(",.0f")}},x:{type:"category",categories:["Sep. 1-25","Sep 26-30","Oct. 1-8","Oct. 9-15","Oct 16-24","Oct 25-31","Nov 1-7"]}}})}(),function(){var t={top:20,right:60,bottom:20,left:60};c3.generate({bindto:"#compareChart",padding:t,data:{x:"x",columns:[["x",1902,1903,1906,1908,1919,1920,1930,1932,1934,1936,1938,1940,1941,1942,1944,1945,1946,1947,1948,1949,1950,1951,1952,1953,1954,1955,1956,1957,1958,1959,1960,1961,1962,1963,1964,1965,1966,1967,1968,1969,1970,1971,1972,1973,1974,1975,1976,1977,1978,1979,1980,1981,1982,1983,1984,1985,1986,1987,1988,1989,1990,1991,1992,1993,1994,1995,1996,1997,1998,1999,2e3,2001,2002,2003,2004,2005,2006,2007,2008,2009,2010,2011,2012,2013,2014,2015,2016],["Voter Registrations",2,1,3,1,1,1,1,1,1,2,1,1,2,2,10,2,14,4,39,2,21,16,119,11,32,27,198,18,111,43,309,37,155,69,372,77,299,79,594,89,321,198,802,492,2427,842,2050,368,1655,348,2044,274,1466,367,2952,477,1939,789,5429,3172,2952,1114,3849,1265,3482,1316,4368,1589,5019,1799,5678,2035,5616,1754,8971,2031,7040,3163,9616,2370,7377,3463,14506,5761,16824,13963,25313]],type:"line"},color:{pattern:["#865f67"]},axis:{y:{min:0,padding:{bottom:0},tick:{count:4,format:d3.format(",.0f")}},x:{tick:{values:[1902,1925,1950,1975,2e3,2016],count:6,multiline:!1}}}})}()})})},{}]},{},[1]);