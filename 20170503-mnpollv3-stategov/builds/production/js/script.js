!function e(a,l,n){function r(t,u){if(!l[t]){if(!a[t]){var i="function"==typeof require&&require;if(!u&&i)return i(t,!0);if(s)return s(t,!0);throw new Error("Cannot find module '"+t+"'")}var c=l[t]={exports:{}};a[t][0].call(c.exports,function(e){var l=a[t][1][e];return r(l||e)},c,c.exports,e,a,l,n)}return l[t].exports}for(var s="function"==typeof require&&require,t=0;t<n.length;t++)r(n[t]);return r}({1:[function(e,a,l){function n(e){this.dd=e,this.placeholder=this.dd.children("span"),this.opts=this.dd.find("ul.dropdown > li"),this.val="",this.index=-1,this.initEvents()}d3.json("./data/polls.json",function(e,a){function l(e,a){return d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).rollup(function(e){return e.length}).entries(data).length}function n(e,a){for(i=0;i<data.length;i++)data[i].tag==e&&"main"==data[i].demographic&&$(a).html("<div class='question'>"+data[i].question+"</div")}function r(e,a){var l="";for(i=0;i<data.length;i++)data[i].tag==e&&"main"==data[i].demographic&&("null"!=data[i].answer1&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer1+"</div>"),"null"!=data[i].answer2&&(l+="<div class='legendBlock' style='background-color:"+colors[1]+"'></div> <div class='legendText'>"+data[i].answer2+"</div>"),"null"!=data[i].answer3&&(l+="<div class='legendBlock' style='background-color:"+colors[2]+"'></div> <div class='legendText'>"+data[i].answer3+"</div>"),"null"!=data[i].answer4&&(l+="<div class='legendBlock' style='background-color:"+colors[3]+"'></div> <div class='legendText'>"+data[i].answer4+"</div>"),"null"!=data[i].answer5&&(l+="<div class='legendBlock' style='background-color:"+colors[4]+"'></div> <div class='legendText'>"+data[i].answer5+"</div>"),"null"!=data[i].answer6&&(l+="<div class='legendBlock' style='background-color:"+colors[5]+"'></div> <div class='legendText'>"+data[i].answer6+"</div>"),"null"!=data[i].answer7&&(l+="<div class='legendBlock' style='background-color:"+colors[6]+"'></div> <div class='legendText'>"+data[i].answer7+"</div>"),"null"!=data[i].answer8&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer8+"</div>"),"null"!=data[i].answer9&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer9+"</div>"),"null"!=data[i].answer10&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer10+"</div>"),"null"!=data[i].answer11&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer11+"</div>"),"null"!=data[i].answer12&&(l+="<div class='legendBlock' style='background-color:"+colors[0]+"'></div> <div class='legendText'>"+data[i].answer12+"</div>"));$(".legendBox").html(l)}function s(e,a){$(a).append("<div class='icon'><img src='img/"+e.toLowerCase()+".png' /></div><div class='category'>"+e+"</div>")}function t(e,a,l,n){var r=d3.nest().key(function(l){return l.tag==e&&l.demographic==a}).entries(data),s=r[1].values[0],t=e+"_"+n;$(l).append("<div rel='"+a+"' id='"+t+"' class='chart'><svg></svg></div>");var u;nv.addGraph(function(){u=nv.models.multiBarHorizontalChart().x(function(e){return e.label}).y(function(e){return e.value}).margin({top:10,right:20,bottom:15,left:115}).color(colors).stacked(!0).showValues(!1).showLegend(!1).showControls(!1),u.yAxis.tickFormat(d3.format("%")),d3.select("#"+t+" svg").datum(c).transition().duration(500).call(u),nv.utils.windowResize(u.update);var e=$(document);e.width();return u});var i=$("#chartBox");i.width();if("null"!=s.answer12)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]},{key:s.answer11,values:[{label:a,value:Number(s.answer11_pct)}]},{key:s.answer12,values:[{label:a,value:Number(s.answer12_pct)}]}];else if("null"!=s.answer11)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]},{key:s.answer11,values:[{label:a,value:Number(s.answer11_pct)}]}];else if("null"!=s.answer10)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]},{key:s.answer10,values:[{label:a,value:Number(s.answer10_pct)}]}];else if("null"!=s.answer9)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]},{key:s.answer9,values:[{label:a,value:Number(s.answer9_pct)}]}];else if("null"!=s.answer8)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]},{key:s.answer8,values:[{label:a,value:Number(s.answer8_pct)}]}];else if("null"!=s.answer7)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]},{key:s.answer7,values:[{label:a,value:Number(s.answer7_pct)}]}];else if("null"!=s.answer6)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]},{key:s.answer6,values:[{label:a,value:Number(s.answer6_pct)}]}];else if("null"!=s.answer5)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]},{key:s.answer5,values:[{label:a,value:Number(s.answer5_pct)}]}];else if("null"!=s.answer4)var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]},{key:s.answer4,values:[{label:a,value:Number(s.answer4_pct)}]}];else var c=[{key:s.answer1,values:[{label:a,value:Number(s.answer1_pct)}]},{key:s.answer2,values:[{label:a,value:Number(s.answer2_pct)}]},{key:s.answer3,values:[{label:a,value:Number(s.answer3_pct)}]}]}function u(e){var a,l,n=0,r=0;for(i=0;i<data.length;i++)if(data[i].tag==e&&"Total"==data[i].demographic){var n=Number(100*data[i].answer1_pct),r=Number(100*data[i].answer2_pct);a=data[i].answer1,l=data[i].answer2}$(".forLabel").html("said  "+a),$(".againstLabel").html("said "+l),$({countNum:$(".for").text()}).animate({countNum:Math.round(n)},{duration:1e3,easing:"linear",step:function(){$(".for").text(Math.floor(this.countNum))},complete:function(){$(".for").text(this.countNum)}}),$({countNum:$(".for").text()}).animate({countNum:Math.round(r)},{duration:1e3,easing:"linear",step:function(){$(".against").text(Math.floor(this.countNum))},complete:function(){$(".against").text(this.countNum)}})}data=a.polls;var c=window.location.href,v=/poll=([^&]+)/.exec(c)[1],o=v||"test",d="test";d3.select(".dropdown").selectAll(".list").data(data).enter().append("div").attr("class","list").html(function(e){if(e.tag!=d)return d=e.tag,"<a href='index.html?poll='"+e.tag+" class='loadLink'><li class='card' data='"+e.tag+"''>"+e.year+" | "+e.question+"</li></a>"}),$(document).ready(function(){$(".loadLink").each(function(){$(this).attr("href","index.html?poll="+$(this).find("li").attr("data"))}),$(".loadLink").click(function(){window.location.href=$(this).attr("href")})}),colors=["#000000","#737373","#969696","#bdbdbd","#d9d9d9","#f0f0f0"];var w=o;!function(e,a,i,c){$(a).html(""),$(i).html(""),$(c).html(""),n(e,"#question"),l(e,"Total")>1&&t(e,"Total",a,0),(l(e,"Democrat")>1||l(e,"Republican")>1)&&s("Party",i),l(e,"Democrat")>1&&t(e,"Democrat",i,1),l(e,"Republican")>1&&t(e,"Republican",i,2),l(e,"Independent")>1&&t(e,"Independent",i,3),l(e,"Other/None")>1&&t(e,"Other/None",i,4),l(e,"Men")>1&&s("Gender",i),l(e,"Men")>1&&t(e,"Men",i,5),l(e,"Women")>1&&t(e,"Women",i,6),l(e,"Hennepin/Ramsey")>1&&s("Region",i),l(e,"Hennepin/Ramsey")>1&&t(e,"Hennepin/Ramsey",i,9),l(e,"Metro Suburbs")>1&&t(e,"Metro Suburbs",i,10),l(e,"Rest of State")>1&&t(e,"Rest of State",i,11),l(e,"No. Minnesota")>1&&t(e,"No. Minnesota",i,22),l(e,"So. Minnesota")>1&&t(e,"So. Minnesota",i,23),l(e,"< $50,000")>1&&s("Income",c),l(e,"< $50,000")>1&&t(e,"< $50,000",c,7),l(e,"> $50,000")>1&&t(e,"> $50,000",c,8),l(e,"Age 18-34")>1&&s("Age",c),l(e,"Age 18-34")>1&&t(e,"Age 18-34",c,12),l(e,"Age 35-49")>1&&t(e,"Age 35-49",c,13),l(e,"Age 50-64")>1&&t(e,"Age 50-64",c,14),l(e,"Age 65+")>1&&t(e,"Age 65+",c,15),l(e,"White")>1&&s("Race",i),l(e,"White")>1&&t(e,"White",i,16),l(e,"Black")>1&&t(e,"Black",i,17),l(e,"Hispanic")>1&&t(e,"Hispanic",i,18),l(e,"Asian")>1&&t(e,"Asian",i,19),l(e,"Native")>1&&t(e,"Native",i,20),l(e,"Other")>1&&t(e,"Other",i,21),l(e,"Yes")>1&&s("Gun Ownership",c),l(e,"Yes")>1&&t(e,"Yes",c,24),l(e,"No")>1&&t(e,"No",c,25),u(e),r(e,"#legendBox")}(w,"#chartBox0","#chartBox1","#chartBox2")}),n.prototype={initEvents:function(){var e=this;e.dd.on("click",function(e){return $(this).toggleClass("active"),!1}),e.opts.on("click",function(){var a=$(this);e.val=a.text(),e.index=a.index(),e.placeholder.text(e.val)})},getValue:function(){return this.val},getIndex:function(){return this.index}},$(function(){new n($("#dd")),new n($("#ddY"));$(document).click(function(){$(".wrapper-dropdown-1").removeClass("active")})})},{}]},{},[1]);